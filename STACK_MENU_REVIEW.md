# 굴뚝 관련 메뉴 UI 점검 및 보완 계획

## ✅ 구현 완료 사항 점검

### 1. Phase 1 & 2 개선 사항 구현 완료
- ✅ 측정 데이터 입력 제한 (CONFIRMED만)
- ✅ 고객사 굴뚝 목록 페이지 (확정 완료 탭)
- ✅ 고객사 굴뚝 수정 권한 및 페이지
- ✅ 거부 프로세스 개선 (사유 필수)

### 2. 현재 메뉴 구조
**환경측정기업**:
- 굴뚝 관리 (`/masters/stacks`) - 확정 굴뚝 전체 관리

**고객사**:
- 굴뚝 검토/확정 (`/customer/stacks`) - 2개 탭
  - 탭 1: 확인 필요 (PENDING_REVIEW)
  - 탭 2: 확정 완료 (CONFIRMED) ✅ 새로 구현
- 굴뚝 요청 관리 (`/customer/stack-requests`) - 별도 메뉴

---

## 🔍 발견된 문제점

### 1. 메뉴 분산 🟡
- 고객사 굴뚝 관련 기능이 2개 메뉴로 분산
- "굴뚝 검토/확정"과 "굴뚝 요청 관리"의 차이 불명확

### 2. 메뉴 명칭 혼란 🟡
- "굴뚝 검토/확정" → 기능이 명확하지 않음
- "확인 필요" → "검토 대기"가 더 명확
- "확정 완료" → "굴뚝 목록"이 더 직관적

### 3. 직접 등록 버튼 위치 🟡
- 검토/확정 페이지에 "직접 등록" 버튼 → 혼란

---

## 💡 보완 계획

### 제안: 단일 메뉴 통합 (권장)

**새로운 구조**:
```
📁 굴뚝 관리 (/customer/stacks)
   - 탭 1: 전체 굴뚝 (기본) - CONFIRMED 상태
   - 탭 2: 검토 대기 - PENDING_REVIEW 상태
   - 탭 3: 굴뚝 요청 - StackRequest 목록
   
   우측 상단:
   - [+ 굴뚝 직접 등록] 버튼
   - [+ 담당 추가 요청] 버튼 (탭 3에서만)
```

**변경 사항**:
1. `/customer/stacks` 페이지에 탭 1개 추가 (요청 탭)
2. `/customer/stack-requests` 기능을 탭으로 통합
3. 네비게이션에서 "굴뚝 요청 관리" 메뉴 제거
4. 메뉴 명칭: "굴뚝 검토/확정" → "굴뚝 관리"

**장점**:
- ✅ 모든 굴뚝 기능이 한 곳에 집중
- ✅ 메뉴 개수 감소 (3개 → 1개)
- ✅ 사용자 혼란 최소화
- ✅ 환경측정기업 메뉴와 명칭 통일

---

## 🚀 구현 계획

### Step 1: 탭 구조 변경 (30분)
```typescript
// /customer/stacks/page.tsx
const [activeTab, setActiveTab] = useState<"list" | "pending" | "requests">("list");

// 3개 탭 추가
- 전체 굴뚝 (기본)
- 검토 대기
- 굴뚝 요청
```

### Step 2: 요청 기능 통합 (1시간)
- `/customer/stack-requests` 페이지 내용을 탭으로 이동
- 요청 목록 조회 API 연동
- 버튼 위치 조정

### Step 3: 네비게이션 정리 (10분)
```typescript
// Navbar.tsx
// 변경: "굴뚝 검토/확정" → "굴뚝 관리"
// 제거: "굴뚝 요청 관리" 메뉴
{ href: "/customer/stacks", label: "굴뚝 관리", roles: ["SUPER_ADMIN", "CUSTOMER_ADMIN"] },
```

### Step 4: 리다이렉트 설정 (10분)
```typescript
// /customer/stack-requests/page.tsx
// 기존 URL 접근 시 새 URL로 리다이렉트
redirect("/customer/stacks?tab=requests");
```

**총 소요 시간**: 약 2시간

---

## 📋 테스트 체크리스트

- [ ] 전체 굴뚝 탭에서 목록 조회
- [ ] 검토 대기 탭에서 승인/거부
- [ ] 굴뚝 요청 탭에서 요청 목록 조회
- [ ] 직접 등록 버튼 동작
- [ ] 담당 추가 요청 버튼 동작
- [ ] 기존 URL 리다이렉트 확인
- [ ] 모바일 반응형 확인

---

## 🎯 우선순위

### 즉시 실행 (선택)
- 메뉴 통합 작업 (2시간)

### 현재 상태 유지 (권장)
- Phase 1 & 2 개선 사항이 모두 구현되어 기능적으로 문제 없음
- 메뉴 통합은 UX 개선 사항으로 선택적 진행 가능

---

## 📝 결론

**현재 상태**: 
- ✅ 핵심 기능 모두 구현 완료
- ✅ 측정 데이터 입력 제한 적용
- ✅ 고객사 굴뚝 조회/수정 가능
- ✅ 거부 프로세스 개선

**보완 권장 사항**:
- 🟡 메뉴 통합으로 UX 개선 (선택적)
- 🟡 메뉴 명칭 개선 (선택적)

**의사결정 필요**:
메뉴 통합 작업 진행 여부 결정 필요 (약 2시간 소요)
