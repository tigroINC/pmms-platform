(()=>{var e={};e.id=7226,e.ids=[7226],e.modules={72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},55315:e=>{"use strict";e.exports=require("path")},17360:e=>{"use strict";e.exports=require("url")},56484:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>i.a,__next_app__:()=>p,originalPathname:()=>u,pages:()=>c,routeModule:()=>m,tree:()=>o}),r(10037),r(92553),r(35866);var s=r(23191),a=r(88716),n=r(37922),i=r.n(n),l=r(95231),d={};for(let e in l)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(d[e]=()=>l[e]);r.d(t,d);let o=["",{children:["reports",{children:["new",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,10037)),"C:\\Users\\User\\boaz\\frontend\\src\\app\\reports\\new\\page.tsx"]}]},{}]},{metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,73881))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(r.bind(r,92553)),"C:\\Users\\User\\boaz\\frontend\\src\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,35866,23)),"next/dist/client/components/not-found-error"],metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,73881))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}],c=["C:\\Users\\User\\boaz\\frontend\\src\\app\\reports\\new\\page.tsx"],u="/reports/new/page",p={require:r,loadChunk:()=>Promise.resolve()},m=new s.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/reports/new/page",pathname:"/reports/new",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:o}})},41257:(e,t,r)=>{Promise.resolve().then(r.bind(r,67598))},67598:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>d});var s=r(10326),a=r(17577),n=r(21120),i=r(35047),l=r(99837);function d(){let{user:e}=(0,n.a)(),t=(0,i.useRouter)(),[r,d]=(0,a.useState)(!1),[o,c]=(0,a.useState)(""),[u,p]=(0,a.useState)(""),[m,x]=(0,a.useState)(""),[h,b]=(0,a.useState)([]),[g,f]=(0,a.useState)([]),[v,y]=(0,a.useState)([]),j=(0,a.useMemo)(()=>{let e=h.find(e=>(e.code?`[${e.code}] ${e.name}`:e.name)===o||e.name===o);return e?.id},[h,o]),w=async()=>{if(!j||!u||!m){alert("고객사, 굴뚝, 측정일자를 모두 선택해주세요.");return}let e=u.match(/\[(.*?)\]/)?.[1]||u,r=g.find(t=>t.name===e||u.includes(t.name))?.id;if(!r){alert("굴뚝을 찾을 수 없습니다.");return}d(!0);try{let e=await fetch("/api/reports",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({customerId:j,stackId:r,measuredAt:m})}),s=await e.json();e.ok?t.push(`/reports/${s.data.id}`):alert(s.error||"보고서 생성 실패")}catch(e){alert(e.message||"보고서 생성 중 오류가 발생했습니다.")}finally{d(!1)}};return(0,s.jsxs)("div",{className:"p-6 max-w-2xl mx-auto space-y-6",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[s.jsx("h1",{className:"text-2xl font-bold",children:"신규 보고서 작성"}),s.jsx(l.Z,{variant:"secondary",onClick:()=>t.push("/reports"),children:"취소"})]}),(0,s.jsxs)("div",{className:"rounded-lg border bg-white/50 dark:bg-white/5 p-6 space-y-4",children:[s.jsx("h2",{className:"text-lg font-semibold mb-4",children:"기본 정보 선택"}),(0,s.jsxs)("div",{className:"space-y-1",children:[(0,s.jsxs)("label",{className:"text-sm font-medium",children:["고객사 ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx("input",{list:"customers-list",value:o,onChange:e=>{c(e.target.value),p("")},placeholder:"고객사를 검색하거나 선택하세요",className:"w-full border rounded px-3 py-2 dark:bg-gray-800"}),s.jsx("datalist",{id:"customers-list",children:h.map(e=>{let t=e.code?`[${e.code}] ${e.name}`:e.name;return s.jsx("option",{value:t,children:e.fullName||e.name},e.id)})})]}),(0,s.jsxs)("div",{className:"space-y-1",children:[(0,s.jsxs)("label",{className:"text-sm font-medium",children:["굴뚝명 ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx("input",{list:"stacks-list",value:u,onChange:e=>p(e.target.value),disabled:!j,placeholder:"굴뚝을 검색하거나 선택하세요",className:"w-full border rounded px-3 py-2 dark:bg-gray-800 disabled:opacity-50"}),s.jsx("datalist",{id:"stacks-list",children:g.map(e=>{let t=`[${e.name}] ${e.fullName||e.name}`;return s.jsx("option",{value:t,children:t},e.id)})})]}),(0,s.jsxs)("div",{className:"space-y-1",children:[(0,s.jsxs)("label",{className:"text-sm font-medium",children:["측정일자 ",s.jsx("span",{className:"text-red-500",children:"*"})]}),(0,s.jsxs)("select",{value:m,onChange:e=>x(e.target.value),disabled:0===v.length,className:"w-full border rounded px-3 py-2 dark:bg-gray-800 disabled:opacity-50",children:[s.jsx("option",{value:"",children:"측정일자를 선택하세요"}),v.map(e=>s.jsx("option",{value:e,children:new Date(e).toLocaleDateString("ko-KR",{year:"numeric",month:"long",day:"numeric"})},e))]}),s.jsx("p",{className:"text-xs text-gray-500",children:0===v.length&&u?"해당 굴뚝의 측정 데이터가 없습니다.":"측정 데이터가 있는 날짜만 표시됩니다."})]}),s.jsx("div",{className:"bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded p-3",children:(0,s.jsxs)("p",{className:"text-sm text-blue-800 dark:text-blue-200",children:["\uD83D\uDCA1 보고서는 선택한 측정일자의 데이터를 자동으로 불러옵니다.",s.jsx("br",{}),"생성 후 모든 항목을 수정할 수 있습니다."]})}),(0,s.jsxs)("div",{className:"flex gap-2 pt-4",children:[s.jsx(l.Z,{onClick:w,disabled:r,className:"flex-1",children:r?"생성 중...":"보고서 생성"}),s.jsx(l.Z,{variant:"secondary",onClick:()=>t.push("/reports"),className:"flex-1",children:"취소"})]})]})]})}},99837:(e,t,r)=>{"use strict";r.d(t,{Z:()=>i});var s=r(10326);r(17577);let a={primary:"bg-black text-white hover:bg-black/90 dark:bg-white dark:text-black dark:hover:bg-white/90",secondary:"border border-gray-300 text-gray-900 hover:bg-gray-50 dark:border-white/20 dark:text-white dark:hover:bg-white/10",ghost:"text-gray-700 hover:bg-gray-100 dark:text-gray-200 dark:hover:bg-white/10"},n={sm:"h-8 px-3 text-sm",md:"h-10 px-4 text-sm",lg:"h-11 px-5 text-base"};function i({variant:e="primary",size:t="md",className:r="",...i}){return s.jsx("button",{className:`inline-flex items-center justify-center rounded-md font-medium transition-colors focus:outline-none focus:ring-2 focus:ring-offset-2 disabled:opacity-50 disabled:pointer-events-none ${a[e]} ${n[t]} ${r}`,...i})}},10037:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>s});let s=(0,r(68570).createProxy)(String.raw`C:\Users\User\boaz\frontend\src\app\reports\new\page.tsx#default`)},73881:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>a});var s=r(66621);let a=e=>[{type:"image/x-icon",sizes:"16x16",url:(0,s.fillMetadataSegment)(".",e.params,"favicon.ico")+""}]}};var t=require("../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[8948,9975,6621,5736],()=>r(56484));module.exports=s})();