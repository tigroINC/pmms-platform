(()=>{var e={};e.id=7702,e.ids=[7702],e.modules={72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},55315:e=>{"use strict";e.exports=require("path")},17360:e=>{"use strict";e.exports=require("url")},84254:(e,t,a)=>{"use strict";a.r(t),a.d(t,{GlobalError:()=>i.a,__next_app__:()=>u,originalPathname:()=>m,pages:()=>o,routeModule:()=>x,tree:()=>c}),a(38256),a(92553),a(35866);var r=a(23191),s=a(88716),l=a(37922),i=a.n(l),n=a(95231),d={};for(let e in n)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(d[e]=()=>n[e]);a.d(t,d);let c=["",{children:["dashboard",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(a.bind(a,38256)),"C:\\Users\\User\\boaz\\frontend\\src\\app\\dashboard\\page.tsx"]}]},{metadata:{icon:[async e=>(await Promise.resolve().then(a.bind(a,73881))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(a.bind(a,92553)),"C:\\Users\\User\\boaz\\frontend\\src\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(a.t.bind(a,35866,23)),"next/dist/client/components/not-found-error"],metadata:{icon:[async e=>(await Promise.resolve().then(a.bind(a,73881))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}],o=["C:\\Users\\User\\boaz\\frontend\\src\\app\\dashboard\\page.tsx"],m="/dashboard/page",u={require:a,loadChunk:()=>Promise.resolve()},x=new r.AppPageRouteModule({definition:{kind:s.x.APP_PAGE,page:"/dashboard/page",pathname:"/dashboard",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},19036:(e,t,a)=>{Promise.resolve().then(a.bind(a,61781))},61781:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>b});var r=a(10326);function s({title:e,value:t,sub:a}){return(0,r.jsxs)("div",{className:"rounded-lg border p-3 bg-white/50 dark:bg-white/5",children:[r.jsx("div",{className:"text-xs text-gray-500 mb-1",children:e}),(0,r.jsxs)("div",{className:"flex items-baseline gap-2",children:[r.jsx("div",{className:"text-2xl font-semibold",children:t}),a&&r.jsx("div",{className:"text-xs text-gray-400",children:a})]})]})}var l=a(17577);function i({labels:e,data:t,limit:a,title:s="ë†ë„ ì¶”ì´",chartType:i="line",showLimit30:n=!1,showPrediction:d=!1,showAverage:c=!1,xTimes:o,height:m,monthTicks:u,monthTickLabels:x,pointStacks:h,pointPayloads:g,exportRef:p,aiPredictions:y}){let b=(0,l.useRef)(null);(0,l.useRef)(null);let[f,k]=(0,l.useState)(!1);return(0,r.jsxs)("div",{className:"w-full rounded-lg border bg-white/50 dark:bg-white/5 p-3",style:{height:(m??256)+"px"},children:[r.jsx("canvas",{ref:b,className:"h-full w-full"}),!f&&r.jsx("div",{className:"h-full w-full -mt-64 flex items-center justify-center text-xs text-gray-500",children:"ì°¨íŠ¸ ë¼ì´ë¸ŒëŸ¬ë¦¬ ë¯¸ì„¤ì¹˜ ìƒíƒœì…ë‹ˆë‹¤. chart.js ì„¤ì¹˜ í›„ ìë™ ë Œë”ë§ë©ë‹ˆë‹¤."})]})}var n=a(89175),d=a(2102);function c({open:e,onClose:t,summaries:a,loading:s,initialSelectedNames:i=[],onApply:n}){let[d,c]=(0,l.useState)(""),[o,m]=(0,l.useState)(i),u=(0,l.useMemo)(()=>{let e=d.trim(),t=[...a];return e&&(t=t.filter(t=>t.stackName.toLowerCase().includes(e.toLowerCase()))),t.sort((e,t)=>t.avg-e.avg||e.stackName.localeCompare(t.stackName)),t},[a,d]);return e?(0,r.jsxs)("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[r.jsx("div",{className:"absolute inset-0 bg-black/40",onClick:t}),(0,r.jsxs)("div",{className:"relative bg-white dark:bg-neutral-900 rounded shadow-xl w-[880px] max-h-[80vh] flex flex-col",children:[(0,r.jsxs)("div",{className:"px-4 py-3 border-b flex items-center gap-3",children:[r.jsx("h2",{className:"text-lg font-semibold",children:"êµ´ëš ì„ íƒ"}),r.jsx("div",{className:"ml-auto flex items-center gap-2",children:r.jsx("input",{value:d,onChange:e=>c(e.target.value),placeholder:"êµ´ëš ê²€ìƒ‰",className:"border rounded px-3 py-1 bg-transparent"})})]}),r.jsx("div",{className:"p-4 flex-1 overflow-auto",children:s?r.jsx("div",{className:"py-12 text-center text-sm text-neutral-500",children:"ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘â€¦"}):(0,r.jsxs)("table",{className:"w-full text-sm",children:[r.jsx("thead",{children:(0,r.jsxs)("tr",{className:"text-left border-b",children:[r.jsx("th",{className:"py-2 px-2 w-10",children:"ì„ íƒ"}),r.jsx("th",{className:"py-2 px-2",children:"êµ´ëš"}),r.jsx("th",{className:"py-2 px-2",children:"í‰ê· ë†ë„"}),r.jsx("th",{className:"py-2 px-2",children:"ì¸¡ì •ê±´ìˆ˜"}),r.jsx("th",{className:"py-2 px-2",children:"ê¸°ì¤€ì´ˆê³¼"}),r.jsx("th",{className:"py-2 px-2",children:"ìµœê·¼ì¸¡ì •"})]})}),r.jsx("tbody",{children:u.map(e=>{let t=o.includes(e.stackName);return(0,r.jsxs)("tr",{className:"border-b hover:bg-neutral-50 dark:hover:bg-neutral-800",children:[r.jsx("td",{className:"py-2 px-2",children:r.jsx("input",{type:"checkbox",checked:t,onChange:t=>{let a=t.currentTarget.checked;m(t=>a?Array.from(new Set([...t,e.stackName])):t.filter(t=>t!==e.stackName))}})}),r.jsx("td",{className:"py-2 px-2",children:e.stackName}),r.jsx("td",{className:"py-2 px-2",children:e.avg}),r.jsx("td",{className:"py-2 px-2",children:e.count}),r.jsx("td",{className:"py-2 px-2",children:e.exceedCount}),r.jsx("td",{className:"py-2 px-2",children:e.lastMeasuredAt?new Date(e.lastMeasuredAt).toLocaleDateString():"-"})]},e.stackId)})})]})}),(0,r.jsxs)("div",{className:"px-4 py-3 border-t flex items-center gap-2",children:[r.jsx("button",{className:"px-3 py-1 border rounded",onClick:()=>{m(u.map(e=>e.stackName))},children:"ëª¨ë‘ ì„ íƒ"}),r.jsx("button",{className:"px-3 py-1 border rounded",onClick:()=>m([]),children:"ëª¨ë‘ í•´ì œ"}),r.jsx("button",{className:"px-3 py-1 border rounded",onClick:()=>{m(u.slice(0,5).map(e=>e.stackName))},children:"Top 5 ì„ íƒ"}),r.jsx("button",{className:"px-3 py-1 border rounded",onClick:()=>{m(u.filter(e=>(e.exceedCount??0)>0).map(e=>e.stackName))},children:"ê¸°ì¤€ì´ˆê³¼ë§Œ"}),r.jsx("div",{className:"ml-auto"}),r.jsx("button",{className:"px-3 py-1 border rounded",onClick:t,children:"ì·¨ì†Œ"}),r.jsx("button",{className:"px-3 py-1 bg-blue-600 text-white rounded",onClick:()=>n(o),children:"ì ìš©"})]})]})]}):null}var o=a(93746),m=a(20872),u=a(91245),x=a(33326);let h="http://localhost:8000";var g=a(99837),p=a(77109);function y({itemKey:e,selected:t,onChange:a}){let s=e=>{t.includes(e)?a(t.filter(t=>t!==e)):a([...t,e])};return r.jsx("div",{className:"flex flex-wrap gap-2",children:("weather"===e?["ë§‘ìŒ","íë¦¼","ë¹„","ëˆˆ","êµ¬ë¦„","ì•ˆê°œ"]:"wind_dir"===e||"wind_direction"===e?["ë¶","ë¶ë™","ë™","ë‚¨ë™","ë‚¨","ë‚¨ì„œ","ì„œ","ë¶ì„œ"]:[]).map(e=>(0,r.jsxs)("label",{className:"inline-flex items-center gap-1 text-xs cursor-pointer",children:[r.jsx("input",{type:"checkbox",className:"accent-blue-500",checked:t.includes(e),onChange:()=>s(e)}),r.jsx("span",{className:"text-gray-700 dark:text-gray-300",children:e})]},e))})}function b(){let{selectedOrg:e,loading:t}=(0,x.o)(),{list:a}=(0,o.n)(),{items:b}=(0,m.F)(),{data:f}=(0,p.useSession)(),k=f?.user?.role,v=f?.user?.customerId,[j,N]=(0,l.useState)([]),[w,S]=(0,l.useState)("ì „ì²´"),C="CUSTOMER_ADMIN"===k||"CUSTOMER_USER"===k,M=(()=>{let e=new Date,t=new Date(e);t.setMonth(e.getMonth()-6);let a=e=>{let t=e.getFullYear(),a=String(e.getMonth()+1).padStart(2,"0"),r=String(e.getDate()).padStart(2,"0");return`${t}-${a}-${r}`};return{start:a(t),end:a(e)}})(),[A,$]=(0,l.useState)("ì „ì²´"),[D,_]=(0,l.useState)([]),[P,R]=(0,l.useState)("ë¨¼ì§€"),[F,U]=(0,l.useState)(M.start),[E,I]=(0,l.useState)(M.end),[K,L]=(0,l.useState)({customer:"ì „ì²´",stack:"ì „ì²´",item:"ë¨¼ì§€",start:M.start,end:M.end}),[T,Z]=(0,l.useState)("scatter"),[O,z]=(0,l.useState)(!1),[q,Y]=(0,l.useState)(!1),[B,G]=(0,l.useState)(!1),{predict:J,loading:H,error:X,result:Q}=function(){let[e,t]=(0,l.useState)(!1),[a,r]=(0,l.useState)(null),[s,i]=(0,l.useState)(null);return{predict:async e=>{t(!0),r(null);try{let t=await fetch(`${h}/api/predict`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({customer_id:e.customer_id,stack:e.stack,item_key:e.item_key,periods:e.periods||30,include_history:!0})});if(!t.ok){let e=await t.json();throw Error(e.detail||"ì˜ˆì¸¡ ì‹¤íŒ¨")}let a=await t.json();return i(a),a}catch(e){return r(e.message||"AutoML ì˜ˆì¸¡ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤."),null}finally{t(!1)}},checkHealth:async()=>{try{return(await fetch(`${h}/health`)).ok}catch{return!1}},reset:()=>{i(null),r(null)},loading:e,error:a,result:s}}(),[V,W]=(0,l.useState)([]),[ee,et]=(0,l.useState)(""),[ea,er]=(0,l.useState)(!1),[es,el]=(0,l.useState)(!1),[ei,en]=(0,l.useState)(!1),[ed,ec]=(0,l.useState)(""),[eo,em]=(0,l.useState)(!1),[eu,ex]=(0,l.useState)(!1),[eh,eg]=(0,l.useState)(""),[ep,ey]=(0,l.useState)(""),eb=(0,l.useMemo)(()=>b.filter(e=>"ë³´ì¡°í•­ëª©"===e.category).filter(e=>"wind_direction"!==e.key).map(e=>{let t="weather"===e.key||"wind_dir"===e.key||"wind_direction"===e.key;return{name:e.name,itemKey:e.key,mode:t?"category":"numeric"}}),[b]),[ef,ek]=(0,l.useState)([]),ev=e=>ek(t=>t.filter(t=>t.id!==e)),ej=(e,t)=>ek(a=>a.map(a=>a.id===e?{...a,...t}:a)),eN=(0,l.useMemo)(()=>{if("ì „ì²´"!==A)return a.find(e=>e.name===A)?.id},[a,A]),ew=(0,l.useMemo)(()=>C?v:"ì „ì²´"!==K.customer?a.find(e=>e.name===K.customer)?.id:void 0,[a,K.customer,C,null,v]),eS=(0,l.useMemo)(()=>b.find(e=>e.name===K.item),[b,K.item]),{list:eC}=(0,u.D)(eN),[eM,eA]=(0,l.useState)(b),{data:e$}=(0,m.r)({customerId:ew,stacks:"ì „ì²´"===K.stack||""===K.stack?void 0:K.stack.split(",").filter(Boolean),itemKey:eS?.key,page:1,pageSize:999999,start:K.start,end:K.end,sort:{key:"measuredAt",dir:"asc"}}),[eD,e_]=(0,l.useState)({}),[eP,eR]=(0,l.useState)(!1);(0,l.useEffect)(()=>{(async()=>{if(!ef.length){e_({}),eR(!1);return}eR(!0);let e=new URLSearchParams;ew&&e.set("customerId",ew),K.stack&&""!==K.stack&&"ì „ì²´"!==K.stack&&K.stack.split(",").filter(Boolean).forEach(t=>e.append("stack",t)),K.start&&e.set("start",K.start),K.end&&e.set("end",K.end);try{let t=await Promise.all(ef.map(async t=>{let a=new URLSearchParams(e);a.set("itemKey",t.itemKey);let r=`/api/measurements?${a.toString()}`,s=await fetch(r),l=await s.json(),i=Array.isArray(l?.data)?l.data:[],n=new Map;for(let e of i){let t=e.measuredAt?new Date(e.measuredAt):null,a=t?Math.floor(t.getTime()/6e4):e.measuredAt,r=e.stack?.id||e.stackId||e.stack?.name||"",s=`${r}|${a}`,l=e.value;n.set(s,l)}return[t.itemKey,n]})),a={};for(let[e,r]of t)a[e]=r;e_(a),eR(!1)}catch(e){e_({}),eR(!1)}})()},[JSON.stringify(ef),ew,K.stack,K.start,K.end]);let eF=(0,l.useMemo)(()=>{let e=""!==eh?Number(eh):void 0,t=""!==ep?Number(ep):void 0,a=e$.filter(a=>{let r=Number(a.value);return!!Number.isFinite(r)&&(void 0===e||!(r<e))&&(void 0===t||!(r>t))}),r=ef.filter(e=>"numeric"===e.mode?void 0!==e.min&&""!==e.min&&void 0!==e.max&&""!==e.max:e.categories&&e.categories.length>0);return r.length&&!eP&&r.every(e=>eD[e.itemKey])?a.filter(e=>{let t=e.measuredAt?new Date(e.measuredAt):null,a=t?Math.floor(t.getTime()/6e4):e.measuredAt,s=e.stack?.id||e.stackId||e.stack?.name||"",l=`${s}|${a}`;for(let e of r){let t=eD[e.itemKey].get(l);if(null==t)return!1;if("numeric"===e.mode){let a=Number(t);if(!Number.isFinite(a))return!1;let r=Number(e.min),s=Number(e.max);if(a<r||a>s)return!1}else{let a=e.categories||[],r=String(t).trim();if(!a.includes(r))return!1}}return!0}):a},[e$,eh,ep,JSON.stringify(ef),eD]),{data:eU,loading:eE}=function(e){let{customerId:t,itemKey:a,start:r,end:s,open:i}=e||{},[n,d]=(0,l.useState)([]),[c,o]=(0,l.useState)(!1);return{data:n,loading:c}}({customerId:ew,itemKey:eS?.key,start:K.start,end:K.end,open:eu}),eI=(0,l.useMemo)(()=>{if("scatter"!==T)return;let e=new Set,t=[];for(let a of eF){let r=a.measuredAt?new Date(a.measuredAt):null,s=r?Math.floor(r.getTime()/6e4):a.measuredAt,l="number"==typeof a.value?a.value.toFixed(3):String(a.value),i=a.stack?.id||a.stackId||a.stack?.name||"",n=a.itemKey||a.item?.key||"",d=a.id||`${i}|${n}|${s}|${l}`;e.has(d)||(e.add(d),t.push(a))}let a=t.map(e=>{let t=new Date(e.measuredAt),a=String(t.getMonth()+1).padStart(2,"0"),r=String(t.getDate()).padStart(2,"0"),s=String(t.getHours()).padStart(2,"0"),l=String(t.getMinutes()).padStart(2,"0");return`${a}/${r} ${s}:${l}`});return{labels:a,values:t.map(e=>Number(e.value)),times:t.map(e=>e.measuredAt),stacks:t.map(e=>e.stack?.name||""),payloads:t}},[eF,T]),eK=(0,l.useMemo)(()=>{let e=eF[0]?.item?.limit??eS?.limit??0;if("scatter"===T)return{labels:eI?.labels||[],data:eI?.values||[],limit:e};let t=new Date(K.start),a=new Date(K.end),r=t.getFullYear(),{labels:s,data:l}=function(e,t){let a=[],r={},s=new Date(e.y,e.m-1,1),l=new Date(t.y,t.m-1,1);for(;s<=l;){let e=`${s.getFullYear()}-${(s.getMonth()+1).toString().padStart(2,"0")}`;a.push(`${s.getMonth()+1}ì›”`),r[e]=[],s.setMonth(s.getMonth()+1)}for(let e of eF){let t=new Date(e.measuredAt),a=`${t.getFullYear()}-${(t.getMonth()+1).toString().padStart(2,"0")}`;a in r&&r[a].push(Number(e.value))}return{labels:a,data:Object.keys(r).map(e=>{let t=r[e];return 0===t.length?0:t.reduce((e,t)=>e+t,0)/t.length})}}({y:r,m:t.getMonth()+1},{y:a.getFullYear(),m:a.getMonth()+1});return{labels:s,data:l,limit:e}},[eF,K.start,K.end,eS?.limit,T]),eL=(0,l.useMemo)(()=>{let e=eF.map(e=>Number(e.value)),t=e.length,a=new Date;return{totalCount:t,monthCount:eF.filter(e=>{let t=new Date(e.measuredAt);return t.getFullYear()===a.getFullYear()&&t.getMonth()===a.getMonth()}).length,exceed:eF.filter(e=>eS&&Number(e.value)>(eS.limit??1/0)).length,avg:Number((e.length?e.reduce((e,t)=>e+t,0)/e.length:0).toFixed(1))}},[eF,eS]),eT=(0,l.useMemo)(()=>"scatter"===T?eI?.times:void 0,[eI,T]),eZ=(0,l.useMemo)(()=>"scatter"===T?eI?.stacks:void 0,[eI,T]),eO=(0,l.useMemo)(()=>{if("scatter"!==T)return;let e=[],t=new Date(K.start),a=new Date(K.end),r=new Date(t.getFullYear(),t.getMonth(),1),s=new Date(a.getFullYear(),a.getMonth(),1);for(;r<=s;)e.push(r.getTime()),r.setMonth(r.getMonth()+1);return e},[K.start,K.end,T]),ez=(0,l.useMemo)(()=>{if(eO)return eO.map(e=>{let t=new Date(e);return`${t.getMonth()+1}ì›”`})},[eO]),eq=(0,l.useRef)(null);return t?r.jsx("div",{className:"flex items-center justify-center h-screen",children:r.jsx("div",{className:"text-lg",children:"ë¡œë”© ì¤‘..."})}):C||e?(0,r.jsxs)("section",{className:"space-y-6",children:[r.jsx("h1",{className:"text-2xl font-semibold",children:"í†µê³„ ì°¨íŠ¸ ëŒ€ì‹œë³´ë“œ"}),(0,r.jsxs)("div",{className:"grid grid-cols-12 gap-4",children:[r.jsx("aside",{className:"col-span-12 md:col-span-2 bg-gray-100 dark:bg-gray-800 text-gray-900 dark:text-gray-100 rounded-lg border border-gray-200 dark:border-gray-700",children:(0,r.jsxs)("div",{className:"sticky top-20 p-4 space-y-4",children:[r.jsx("div",{className:"space-y-1",children:C?(0,r.jsxs)(r.Fragment,{children:[r.jsx("label",{className:"text-sm",children:"í™˜ê²½ì¸¡ì •ê¸°ì—…"}),(0,r.jsxs)(d.Z,{className:"bg-white dark:bg-gray-700 text-gray-900 dark:text-white border-gray-300 dark:border-gray-600",value:w,onChange:e=>S(e.target.value),children:[r.jsx("option",{value:"ì „ì²´",children:"í†µí•© ë°ì´í„° (ì „ì²´)"}),j.map(e=>r.jsx("option",{value:e.id,children:e.nickname||e.name},e.id))]}),r.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"íŠ¹ì • ì¸¡ì •íšŒì‚¬ ë˜ëŠ” í†µí•© ë°ì´í„° ì„ íƒ"})]}):(0,r.jsxs)(r.Fragment,{children:[r.jsx("label",{className:"text-sm",children:"ê³ ê°ì‚¬"}),(0,r.jsxs)(d.Z,{className:"bg-white dark:bg-gray-700 text-gray-900 dark:text-white border-gray-300 dark:border-gray-600",value:A,onChange:e=>$(e.target.value),children:[r.jsx("option",{value:"ì „ì²´",children:"ì „ì²´"}),a.map(e=>(0,r.jsxs)("option",{value:e.name,children:[e.name," (",e.code,")"]},e.id))]})]})}),(0,r.jsxs)("div",{className:"space-y-1",children:[r.jsx("label",{className:"text-sm",children:"êµ´ëš"}),r.jsx("div",{className:"flex items-center gap-2",children:(0,r.jsxs)("button",{className:"px-3 py-2 border rounded w-full border-gray-300 dark:border-gray-600 hover:bg-gray-200 dark:hover:bg-gray-700",onClick:()=>ex(!0),children:["ìŠ¤íƒ ì„ íƒ",D.length?` (${D.length})`:""]})}),D.length>0&&r.jsx("div",{className:"text-xs text-gray-300 truncate",children:D.join(", ")})]}),(0,r.jsxs)("div",{className:"space-y-1",children:[r.jsx("label",{className:"text-sm",children:"í•­ëª©"}),r.jsx(d.Z,{className:"bg-white dark:bg-gray-700 text-gray-900 dark:text-white border-gray-300 dark:border-gray-600",value:P,onChange:e=>R(e.target.value),children:eM.map(e=>r.jsx("option",{value:e.name,children:e.name},e.key))})]}),(0,r.jsxs)("div",{className:"space-y-2 pt-2 border-t border-gray-300 dark:border-gray-700",children:[r.jsx("label",{className:"text-xs sm:text-sm font-medium text-gray-700 dark:text-gray-300",children:"\uD83D\uDCC5 ê¸°ê°„ ì„¤ì •"}),(0,r.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,r.jsxs)("div",{className:"flex flex-col gap-0.5",children:[r.jsx("label",{className:"text-xs text-gray-600 dark:text-gray-400",children:"ì‹œì‘ì¼"}),r.jsx(n.Z,{className:"w-full text-xs sm:text-sm bg-white dark:bg-gray-700 text-gray-900 dark:text-white border-gray-300 dark:border-gray-600",type:"date",value:F,onChange:e=>U(e.target.value)})]}),(0,r.jsxs)("div",{className:"flex flex-col gap-0.5",children:[r.jsx("label",{className:"text-xs text-gray-600 dark:text-gray-400",children:"ì¢…ë£Œì¼"}),r.jsx(n.Z,{className:"w-full text-xs sm:text-sm bg-white dark:bg-gray-700 text-gray-900 dark:text-white border-gray-300 dark:border-gray-600",type:"date",value:E,onChange:e=>I(e.target.value)})]})]})]}),(0,r.jsxs)("div",{className:"space-y-2 pt-2 border-t border-gray-300 dark:border-gray-700",children:[r.jsx("label",{className:"text-xs sm:text-sm font-medium text-gray-700 dark:text-gray-300",children:"\uD83D\uDCCA ê°’ ë²”ìœ„"}),(0,r.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,r.jsxs)("div",{className:"flex flex-col gap-0.5",children:[r.jsx("label",{className:"text-xs text-gray-600 dark:text-gray-400",children:"ìµœì†Œê°’"}),r.jsx(n.Z,{className:"w-full text-xs sm:text-sm bg-white dark:bg-gray-700 text-gray-900 dark:text-white border-gray-300 dark:border-gray-600",type:"number",placeholder:"0",value:eh,onChange:e=>eg(e.target.value)})]}),(0,r.jsxs)("div",{className:"flex flex-col gap-0.5",children:[r.jsx("label",{className:"text-xs text-gray-600 dark:text-gray-400",children:"ìµœëŒ€ê°’"}),r.jsx(n.Z,{className:"w-full text-xs sm:text-sm bg-white dark:bg-gray-700 text-gray-900 dark:text-white border-gray-300 dark:border-gray-600",type:"number",placeholder:"100",value:ep,onChange:e=>ey(e.target.value)})]})]})]}),(0,r.jsxs)("div",{className:"space-y-2 pt-2 border-t border-gray-300 dark:border-gray-700",children:[r.jsx("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"\uD83C\uDF21ï¸ ë³´ì¡°í•­ëª© í•„í„°"}),(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[r.jsx("button",{className:"px-2 py-1 border border-gray-300 dark:border-gray-600 rounded text-xs hover:bg-gray-200 dark:hover:bg-gray-700",onClick:()=>{let e=eb[0];if(!e)return;let t=e.mode;ek(a=>[...a,{id:Math.random().toString(36).slice(2),itemKey:e.itemKey,itemName:e.name,mode:t}])},children:"+ í•­ëª© ì¶”ê°€"}),r.jsx("button",{className:"px-2 py-1 border border-gray-300 dark:border-gray-600 rounded text-xs hover:bg-gray-200 dark:hover:bg-gray-700",onClick:()=>{ek([]),eg(""),ey("")},children:"ì´ˆê¸°í™”"})]}),0===ef.length&&r.jsx("div",{className:"text-xs text-gray-400",children:"ë³´ì¡°í•­ëª©ìœ¼ë¡œ í•„í„°ë§í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì˜ˆ) í’ì† 0~5"}),r.jsx("div",{className:"space-y-2",children:ef.map(e=>(0,r.jsxs)("div",{className:"space-y-1 p-2 border border-gray-300 dark:border-gray-600 rounded",children:[(0,r.jsxs)("div",{className:"space-y-1",children:[r.jsx(d.Z,{className:"w-full bg-white dark:bg-gray-700 text-gray-900 dark:text-white border-gray-300 dark:border-gray-600 text-xs",value:e.itemName,onChange:t=>{let a=t.target.value,r=eb.find(e=>e.name===a);r&&ej(e.id,{itemKey:r.itemKey,itemName:r.name,mode:r.mode})},children:eb.map(e=>r.jsx("option",{value:e.name,children:e.name},e.itemKey))}),r.jsx("button",{className:"w-full px-2 py-1 border border-gray-300 dark:border-gray-600 rounded text-xs hover:bg-gray-200 dark:hover:bg-gray-700",onClick:()=>ev(e.id),children:"ì‚­ì œ"})]}),"numeric"===e.mode?(0,r.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,r.jsxs)("div",{className:"flex flex-col gap-0.5",children:[r.jsx("label",{className:"text-xs text-gray-600 dark:text-gray-400",children:"ìµœì†Œ"}),r.jsx(n.Z,{className:"w-full text-xs sm:text-sm bg-white dark:bg-gray-700 text-gray-900 dark:text-white border-gray-300 dark:border-gray-600",type:"number",value:e.min??"",onChange:t=>ej(e.id,{min:t.target.value})})]}),(0,r.jsxs)("div",{className:"flex flex-col gap-0.5",children:[r.jsx("label",{className:"text-xs text-gray-600 dark:text-gray-400",children:"ìµœëŒ€"}),r.jsx(n.Z,{className:"w-full text-xs sm:text-sm bg-white dark:bg-gray-700 text-gray-900 dark:text-white border-gray-300 dark:border-gray-600",type:"number",value:e.max??"",onChange:t=>ej(e.id,{max:t.target.value})})]})]}):r.jsx(y,{itemKey:e.itemKey,selected:e.categories||[],onChange:t=>ej(e.id,{categories:t})})]},e.id))})]})]})}),(0,r.jsxs)("main",{className:"col-span-12 md:col-span-10 space-y-6",children:[(0,r.jsxs)("div",{className:"grid gap-4 md:grid-cols-4",children:[r.jsx(s,{title:"ì´ ì¸¡ì • ê±´ìˆ˜",value:eL.totalCount,sub:`${K.start} ~ ${K.end}`}),r.jsx(s,{title:"ì´ë²ˆ ë‹¬ ì¸¡ì •",value:eL.monthCount}),r.jsx(s,{title:"ê¸°ì¤€ ì´ˆê³¼",value:eL.exceed,sub:`${K.customer} / ${K.item}`}),r.jsx(s,{title:"í‰ê·  ë†ë„",value:eL.avg,sub:eS?.unit||"mg/Sã¥"})]}),(0,r.jsxs)("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-3",children:[(0,r.jsxs)("div",{className:"flex flex-wrap items-center gap-3",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[r.jsx("label",{className:"text-sm",children:"ì°¨íŠ¸ ìœ í˜•"}),(0,r.jsxs)(d.Z,{className:"min-w-[120px] bg-white dark:bg-gray-700",value:T,onChange:e=>Z(e.target.value),children:[r.jsx("option",{value:"line",children:"Line"}),r.jsx("option",{value:"bar",children:"Bar"}),r.jsx("option",{value:"scatter",children:"Scatter"})]})]}),(0,r.jsxs)("label",{className:"text-sm inline-flex items-center gap-2",children:[r.jsx("input",{type:"checkbox",className:"accent-blue-500",checked:O,onChange:e=>z(e.target.checked)})," 30% ê¸°ì¤€ì„ "]}),(0,r.jsxs)("label",{className:"text-sm inline-flex items-center gap-2",children:[r.jsx("input",{type:"checkbox",className:"accent-blue-500",checked:q,onChange:e=>Y(e.target.checked)})," ì´ë™í‰ê· ì„ "]}),"scatter"===T&&(0,r.jsxs)("label",{className:"text-sm inline-flex items-center gap-2",children:[r.jsx("input",{type:"checkbox",className:"accent-blue-500",checked:B,onChange:e=>G(e.target.checked)})," í‰ê· ì„ "]})]}),(0,r.jsxs)("div",{className:"flex justify-end gap-2",children:[r.jsx(g.Z,{variant:"secondary",onClick:async()=>{if(!ew||!eS?.key){alert("ê³ ê°ì‚¬ì™€ í•­ëª©ì„ ì„ íƒí•´ì£¼ì„¸ìš”.");return}try{el(!0);let e=await J({customer_id:ew,stack:eC[0]?.name||"dummy",item_key:eS.key,periods:30});if(e){W(e.predictions);let t=`ğŸ¤– AI ì˜ˆì¸¡ ì™„ë£Œ

ğŸ“Š ì˜ˆì¸¡ ì •ë³´:
â€¢ Prophet AutoML ëª¨ë¸ ê¸°ë°˜
â€¢ ê³ ê°ì‚¬ ì „ì²´ êµ´ëš ë°ì´í„° í•™ìŠµ
â€¢ ê³¼ê±° íŒ¨í„´ ë° ê³„ì ˆì„± ë°˜ì˜
â€¢ 30ì¼ ë¯¸ë˜ ì˜ˆì¸¡

ğŸ“ˆ ëª¨ë¸ ìƒì„¸ ì •ë³´:
â€¢ ëª¨ë¸: ${e.model_info.model_type} (Meta Research)
â€¢ í•™ìŠµ ë°ì´í„°: ${e.training_samples}ê±´
â€¢ ì˜ˆì¸¡ ê¸°ê°„: 30ì¼

ğŸ¯ ëª¨ë¸ ì •í™•ë„:
â€¢ RMSE: ${e.accuracy_metrics?.rmse?.toFixed(2)||"N/A"} mg/Sã¥
â€¢ MAE: ${e.accuracy_metrics?.mae?.toFixed(2)||"N/A"} mg/Sã¥
â€¢ R\xb2: ${e.accuracy_metrics?.r2?.toFixed(3)||"N/A"}

ğŸ’¡ ì„¤ëª…:
R\xb2 ê°’ì´ ë†’ì„ìˆ˜ë¡ ëª¨ë¸ì˜ ì„¤ëª…ë ¥ì´ ë†’ìœ¼ë©°,
RMSEì™€ MAEëŠ” ì˜ˆì¸¡ ì˜¤ì°¨ë¥¼ ë‚˜íƒ€ëƒ…ë‹ˆë‹¤.

âœ¨ ì°¨íŠ¸ì˜ ì´ˆë¡ìƒ‰ ì˜ˆì¸¡ì„ ì— ë§ˆìš°ìŠ¤ë¥¼ ì˜¬ë ¤
ê° ì˜ˆì¸¡ í¬ì¸íŠ¸ì˜ ìƒì„¸ ì •ë³´ë¥¼ í™•ì¸í•˜ì„¸ìš”!`;et(t),er(!0)}else et(`âŒ ì˜ˆì¸¡ ì‹¤íŒ¨

${X||"ì•Œ ìˆ˜ ì—†ëŠ” ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤."}

í•´ë‹¹ ê³ ê°ì‚¬/í•­ëª©ì˜ ì¸¡ì • ë°ì´í„°ê°€ ë¶€ì¡±í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
(ìµœì†Œ 10ê°œ ì´ìƒ í•„ìš”)`),er(!0)}catch(e){et(`âŒ ì˜ˆì¸¡ ì‹¤íŒ¨

${e.message||"ì˜ˆì¸¡ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤."}

í•´ë‹¹ ê³ ê°ì‚¬/í•­ëª©ì˜ ì¸¡ì • ë°ì´í„°ê°€ ë¶€ì¡±í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.`),er(!0)}finally{el(!1)}},disabled:es,title:"ê³ ê°ì‚¬ ì „ì²´ êµ´ëš ë°ì´í„°ë¥¼ ì‚¬ìš©í•˜ì—¬ AI ì˜ˆì¸¡ì„ ìˆ˜í–‰í•©ë‹ˆë‹¤",children:es?"ì˜ˆì¸¡ ìƒì„± ì¤‘...":"AutoML ì˜ˆì¸¡"}),r.jsx(g.Z,{variant:"primary",onClick:async()=>{if(!ew||!eS?.key){alert("ê³ ê°ì‚¬ì™€ í•­ëª©ì„ ì„ íƒí•´ì£¼ì„¸ìš”.");return}en(!0),ec("\uD83D\uDD04 ì¸ì‚¬ì´íŠ¸ ë³´ê³ ì„œ ìƒì„± ì¤‘...\n\nì˜ˆìƒ ì†Œìš” ì‹œê°„: ì•½ 10-15ì´ˆ\n\nAI ëª¨ë¸ í•™ìŠµ ë° ë¶„ì„ì„ ì§„í–‰í•˜ê³  ìˆìŠµë‹ˆë‹¤."),em(!0);try{let e=null;if(eq.current)try{e=eq.current.toDataURL("image/png").split(",")[1]}catch(e){}let t=await fetch("http://localhost:8000/api/predict/insight",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({customer_id:ew,stack:eC[0]?.name||"dummy",item_key:eS.key,item_name:eS.name,periods:30,chart_image:e,user_id:f?.user?.id})});if(!t.ok)throw Error("ë³´ê³ ì„œ ìƒì„± ì‹¤íŒ¨");let a=await t.json();if(!(a&&"object"==typeof a&&"string"==typeof a.pdf_base64&&a.pdf_base64.length>100&&Array.isArray(a.predictions)&&a.model_info&&a.insight_report))throw Error("ë°±ì—”ë“œì—ì„œ ìœ íš¨í•˜ì§€ ì•Šì€ ì‘ë‹µì„ ë°›ì•˜ìŠµë‹ˆë‹¤. PDF ë°ì´í„°ê°€ ì—†ìŠµë‹ˆë‹¤.");if(function(e){if(!e)throw Error("PDF ë°ì´í„°ê°€ ì—†ìŠµë‹ˆë‹¤.");if(e.length<100)throw Error("PDF ë°ì´í„°ê°€ ë„ˆë¬´ ì§§ìŠµë‹ˆë‹¤. ìœ íš¨í•˜ì§€ ì•Šì€ ë°ì´í„°ì¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤.");if(!/^[A-Za-z0-9+/]*={0,2}$/.test(e))throw Error("ìœ íš¨í•˜ì§€ ì•Šì€ Base64 í˜•ì‹ì…ë‹ˆë‹¤.")}(a.pdf_base64),W(a.predictions),ec("âœ… ë³´ê³ ì„œ ìƒì„± ì™„ë£Œ!\n\nìƒˆ íƒ­ì—ì„œ PDF ë³´ê³ ì„œë¥¼ ì—¬ì‹œê² ìŠµë‹ˆê¹Œ?"),confirm("\uD83D\uDCCA ë³´ê³ ì„œê°€ ìƒì„±ë˜ì—ˆìŠµë‹ˆë‹¤.\n\nPDFë¥¼ ìƒˆ íƒ­ì—ì„œ ì—¬ì‹œê² ìŠµë‹ˆê¹Œ?"))try{let e=atob(a.pdf_base64),t=Array(e.length);for(let a=0;a<e.length;a++)t[a]=e.charCodeAt(a);let r=new Uint8Array(t),s=new Blob([r],{type:"application/pdf"}),l=URL.createObjectURL(s),i=window.open(l,"_blank");(!i||i.closed||void 0===i.closed)&&alert("âš ï¸ íŒì—…ì´ ì°¨ë‹¨ë˜ì—ˆìŠµë‹ˆë‹¤.\n\në¸Œë¼ìš°ì € ì£¼ì†Œì°½ ì˜¤ë¥¸ìª½ì˜ íŒì—… ì°¨ë‹¨ ì•„ì´ì½˜ì„ í´ë¦­í•˜ì—¬\nì´ ì‚¬ì´íŠ¸ì˜ íŒì—…ì„ í—ˆìš©í•´ì£¼ì„¸ìš”.")}catch(e){alert("PDF í‘œì‹œ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.")}}catch(e){alert(`âŒ ë³´ê³ ì„œ ìƒì„± ì‹¤íŒ¨

${e.message}`)}finally{en(!1)}},disabled:ei,title:"AI ê¸°ë°˜ ì˜ˆì¸¡ ì¸ì‚¬ì´íŠ¸ ë³´ê³ ì„œë¥¼ ìƒì„±í•©ë‹ˆë‹¤",children:ei?"ë³´ê³ ì„œ ìƒì„± ì¤‘...":"ì¸ì‚¬ì´íŠ¸ ë³´ê³ ì„œ"}),r.jsx(g.Z,{variant:"secondary",onClick:()=>{try{let e=eF.map(e=>({measuredAt:e.measuredAt,customer:e.customer?.name||"",stackId:e.stack?.id||e.stackId||"",stackName:e.stack?.name||e.stackName||"",itemName:e.item?.name||"",itemKey:e.itemKey,unit:e.item?.unit??"",limit:e.item?.limit??"",value:e.value})).map(e=>[e.measuredAt,e.customer,e.stackId,e.stackName,e.itemName,e.itemKey,e.unit,e.limit,e.value].map(e=>null!=e?String(e).replaceAll('"','""'):"").map(e=>e.includes(",")||e.includes('"')?`"${e}"`:e).join(",")).join("\n"),t=new Blob(["\uFEFFmeasuredAt,customer,stackId,stackName,itemName,itemKey,unit,limit,value\n"+e],{type:"text/csv;charset=utf-8;"}),a=URL.createObjectURL(t),r=document.createElement("a");r.href=a,r.download=`boaz-data-${K.item}-${K.start}-${K.end}.csv`,r.click(),URL.revokeObjectURL(a)}catch{}},children:"ì—‘ì…€ ë‹¤ìš´ë¡œë“œ"}),r.jsx(g.Z,{variant:"secondary",onClick:()=>{let e=eq.current;if(!e)return;let t=e.toDataURL("image/png"),a=window.open("","print");if(!a)return;let r=`ì›”ë³„ ë†ë„ ì¶”ì´ - ${K.item}`,s=`${K.start} ~ ${K.end}`;a.document.write(`<!doctype html><html><head><title>${r}</title>
      <style>
        body{margin:24px;padding:0;background:#fff;color:#111;font-family:system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial}
        .header{margin-bottom:12px}
        .title{font-size:18px;font-weight:600}
        .period{font-size:12px;color:#555}
        .imgwrap{display:flex;justify-content:center;align-items:center}
        img{max-width:100%;}
      </style>
      </head><body>
      <div class="header"><div class="title">${r}</div><div class="period">${s}</div></div>
      <div class="imgwrap"><img src="${t}"/></div>
      </body></html>`),a.document.close(),a.focus(),a.print()},children:"ê·¸ë˜í”„ PDF"})]})]}),0===eK.data.length?r.jsx("div",{className:"rounded-lg border p-6 text-sm text-gray-500 bg-white/50 dark:bg-white/5",children:"í‘œì‹œí•  ë°ì´í„°ê°€ ì—†ìŠµë‹ˆë‹¤. ê¸°ê°„ê³¼ í•­ëª©ì„ ì¡°ì •í•´ ë³´ì„¸ìš”."}):r.jsx(i,{labels:eK.labels,data:eK.data,limit:eK.limit,title:`ì›”ë³„ ë†ë„ ì¶”ì´ - ${K.item}`,chartType:T,showLimit30:O,showPrediction:q,showAverage:B,xTimes:eT,pointStacks:eZ,pointPayloads:"scatter"===T?eI?.payloads:void 0,height:560,exportRef:eq,monthTicks:"scatter"===T?eO:void 0,monthTickLabels:"scatter"===T?ez:void 0,aiPredictions:V.length>0?V:void 0})]})]}),r.jsx(c,{open:eu,onClose:()=>ex(!1),summaries:eU,loading:eE,initialSelectedNames:D,onApply:e=>{_(e),ex(!1)}}),ea&&r.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",onClick:()=>er(!1),children:(0,r.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-8 max-w-2xl w-full mx-4 max-h-[80vh] overflow-y-auto shadow-2xl",onClick:e=>e.stopPropagation(),children:[r.jsx("pre",{className:"whitespace-pre-wrap text-base font-sans leading-relaxed text-gray-800 dark:text-gray-200",children:ee}),r.jsx("div",{className:"mt-8 flex justify-end",children:r.jsx(g.Z,{variant:"primary",onClick:()=>er(!1),children:"í™•ì¸"})})]})}),eo&&r.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",onClick:()=>em(!1),children:(0,r.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-6 max-w-2xl w-full mx-4 max-h-[80vh] overflow-y-auto",onClick:e=>e.stopPropagation(),children:[r.jsx("pre",{className:"whitespace-pre-wrap text-sm font-sans",children:ed}),r.jsx("div",{className:"mt-6 flex justify-end",children:r.jsx(g.Z,{variant:"primary",onClick:()=>em(!1),children:"í™•ì¸"})})]})})]}):r.jsx("div",{className:"flex items-center justify-center h-screen",children:r.jsx("div",{className:"text-lg text-red-600",children:"ì¡°ì§ ì •ë³´ë¥¼ ë¶ˆëŸ¬ì˜¬ ìˆ˜ ì—†ìŠµë‹ˆë‹¤."})})}},99837:(e,t,a)=>{"use strict";a.d(t,{Z:()=>i});var r=a(10326);a(17577);let s={primary:"bg-black text-white hover:bg-black/90 dark:bg-white dark:text-black dark:hover:bg-white/90",secondary:"border border-gray-300 text-gray-900 hover:bg-gray-50 dark:border-white/20 dark:text-white dark:hover:bg-white/10",ghost:"text-gray-700 hover:bg-gray-100 dark:text-gray-200 dark:hover:bg-white/10"},l={sm:"h-8 px-3 text-sm",md:"h-10 px-4 text-sm",lg:"h-11 px-5 text-base"};function i({variant:e="primary",size:t="md",className:a="",...i}){return r.jsx("button",{className:`inline-flex items-center justify-center rounded-md font-medium transition-colors focus:outline-none focus:ring-2 focus:ring-offset-2 disabled:opacity-50 disabled:pointer-events-none ${s[e]} ${l[t]} ${a}`,...i})}},89175:(e,t,a)=>{"use strict";a.d(t,{Z:()=>s});var r=a(10326);function s({className:e="",...t}){return r.jsx("input",{className:`rounded-md border bg-transparent px-3 py-2 text-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:border-white/20 ${e}`,...t})}a(17577)},2102:(e,t,a)=>{"use strict";a.d(t,{Z:()=>s});var r=a(10326);function s({className:e="",children:t,...a}){return r.jsx("select",{className:`w-full rounded-md border bg-transparent px-3 py-2 text-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:border-white/20 ${e}`,...a,children:t})}a(17577)},93746:(e,t,a)=>{"use strict";a.d(t,{n:()=>i});var r=a(17577),s=a(33326),l=a(77109);function i(){let[e,t]=(0,r.useState)([]),{selectedOrg:a}=(0,s.o)(),{data:i}=(0,l.useSession)(),n=i?.user?.role,d=i?.user?.customerId,c="CUSTOMER_ADMIN"===n||"CUSTOMER_USER"===n;return{list:e,refetch:(0,r.useCallback)(()=>{if(c&&d){fetch(`/api/customers/${d}`).then(e=>e.json()).then(e=>{let a=e.customer||e.data;t(a?[a]:[])}).catch(e=>{t([])});return}if(!a?.id){t([]);return}let e=new URLSearchParams;e.append("organizationId",a.id),e.append("tab","all"),fetch(`/api/customers?${e.toString()}`).then(e=>e.json()).then(e=>{t(e.customers||e.data||[])}).catch(e=>{t([])})},[a,c,d])}}},20872:(e,t,a)=>{"use strict";a.d(t,{F:()=>i,r:()=>n});var r=a(17577),s=a(33326),l=a(77109);function i(){let[e,t]=(0,r.useState)([]);return{items:e}}function n(e={}){let{customerId:t,stack:a,stacks:i,itemKey:n,page:d=1,pageSize:c=50,sort:o,start:m,end:u}=e,[x,h]=(0,r.useState)([]),[g,p]=(0,r.useState)(0),{selectedOrg:y}=(0,s.o)(),{data:b}=(0,l.useSession)(),f=b?.user?.role,k="CUSTOMER_ADMIN"===f||"CUSTOMER_USER"===f;(0,r.useEffect)(()=>{let e=!0,r=new AbortController;if(!k&&!y?.id){h([]);return}let s=new URLSearchParams;return t&&s.set("customerId",t),i&&i.length?i.forEach(e=>s.append("stack",e)):a&&s.set("stack",a),n&&s.set("itemKey",n),m&&s.set("start",m),u&&s.set("end",u),y?.id&&s.set("organizationId",y.id),fetch(`/api/measurements?${s.toString()}`,{signal:r.signal}).then(e=>e.json()).then(t=>{e&&h(Array.isArray(t.measurements)?t.measurements:Array.isArray(t.data)?t.data:[])}).catch(t=>{t.name,e&&h([])}),()=>{e=!1,r.abort()}},[t,a,(i||[]).join("|"),n,m,u,g,y,k]);let v=(0,r.useMemo)(()=>{if(!o)return x;let{key:e,dir:t}=o,a=[...x];return a.sort((a,r)=>{let s=a[e],l=r[e];return s<l?"asc"===t?-1:1:s>l?"asc"===t?1:-1:0}),a},[x,o]),j=v.length,N=(d-1)*c;return{data:c>=999999?v:v.slice(N,N+c),total:j,page:d,pageSize:c,mutate:()=>p(e=>e+1)}}},91245:(e,t,a)=>{"use strict";a.d(t,{D:()=>l});var r=a(17577),s=a(33326);function l(e){let[t,a]=(0,r.useState)([]),{selectedOrg:l}=(0,s.o)();return{list:t}}},38256:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>r});let r=(0,a(68570).createProxy)(String.raw`C:\Users\User\boaz\frontend\src\app\dashboard\page.tsx#default`)},73881:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>s});var r=a(66621);let s=e=>[{type:"image/x-icon",sizes:"16x16",url:(0,r.fillMetadataSegment)(".",e.params,"favicon.ico")+""}]}};var t=require("../../webpack-runtime.js");t.C(e);var a=e=>t(t.s=e),r=t.X(0,[8948,9975,6621,5736],()=>a(84254));module.exports=r})();