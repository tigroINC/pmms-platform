(()=>{var e={};e.id=8164,e.ids=[8164],e.modules={72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},55315:e=>{"use strict";e.exports=require("path")},17360:e=>{"use strict";e.exports=require("url")},21958:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>n.a,__next_app__:()=>x,originalPathname:()=>m,pages:()=>o,routeModule:()=>u,tree:()=>c}),s(41127),s(15802),s(92553),s(35866);var a=s(23191),r=s(88716),l=s(37922),n=s.n(l),i=s(95231),d={};for(let e in i)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(d[e]=()=>i[e]);s.d(t,d);let c=["",{children:["invite",{children:["[token]",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,41127)),"C:\\Users\\User\\boaz\\frontend\\src\\app\\invite\\[token]\\page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,15802)),"C:\\Users\\User\\boaz\\frontend\\src\\app\\invite\\layout.tsx"],metadata:{icon:[async e=>(await Promise.resolve().then(s.bind(s,73881))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(s.bind(s,92553)),"C:\\Users\\User\\boaz\\frontend\\src\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,35866,23)),"next/dist/client/components/not-found-error"],metadata:{icon:[async e=>(await Promise.resolve().then(s.bind(s,73881))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}],o=["C:\\Users\\User\\boaz\\frontend\\src\\app\\invite\\[token]\\page.tsx"],m="/invite/[token]/page",x={require:s,loadChunk:()=>Promise.resolve()},u=new a.AppPageRouteModule({definition:{kind:r.x.APP_PAGE,page:"/invite/[token]/page",pathname:"/invite/[token]",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},55248:(e,t,s)=>{Promise.resolve().then(s.bind(s,32040))},35303:()=>{},32040:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>n});var a=s(10326),r=s(17577),l=s(35047);function n(){let e=(0,l.useRouter)(),t=(0,l.useParams)().token,[s,n]=(0,r.useState)(!0),[i,d]=(0,r.useState)(null),[c,o]=(0,r.useState)(""),[m,x]=(0,r.useState)(""),[u,p]=(0,r.useState)(""),[h,g]=(0,r.useState)(""),[b,v]=(0,r.useState)(""),[j,N]=(0,r.useState)(""),[y,f]=(0,r.useState)(""),[w,S]=(0,r.useState)(""),[k,C]=(0,r.useState)(!1),P=async s=>{if(s.preventDefault(),!m||!u||!b||!j){alert("모든 필드를 입력해주세요.");return}if(u!==h){alert("비밀번호가 일치하지 않습니다.");return}if(u.length<8){alert("비밀번호는 최소 8자 이상이어야 합니다.");return}C(!0);try{let s=await fetch(`/api/customer-invitations/${t}/accept`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:m,password:u,name:b,phone:j,role:y||"ADMIN",businessNumber:w.trim()||void 0})}),a=await s.json();s.ok?(alert("가입이 완료되었습니다! 로그인해주세요."),e.push("/login")):alert(a.error||"가입 실패")}catch(e){alert("가입 중 오류가 발생했습니다.")}finally{C(!1)}};return s?a.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:a.jsx("div",{className:"text-gray-500",children:"로딩 중..."})}):c||!i?a.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:a.jsx("div",{className:"max-w-md w-full bg-white rounded-lg shadow-lg p-8",children:(0,a.jsxs)("div",{className:"text-center",children:[a.jsx("div",{className:"text-6xl mb-4",children:"❌"}),a.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"초대 링크 오류"}),a.jsx("p",{className:"text-gray-600 mb-6",children:c}),a.jsx("button",{onClick:()=>e.push("/"),className:"bg-blue-600 text-white px-6 py-2 rounded hover:bg-blue-700",children:"홈으로 이동"})]})})}):a.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 py-12 px-4 sm:px-6 lg:px-8",children:(0,a.jsxs)("div",{className:"max-w-2xl w-full",children:[(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow-lg p-8 mb-6",children:[(0,a.jsxs)("div",{className:"text-center mb-6",children:[a.jsx("div",{className:"text-5xl mb-4",children:"\uD83C\uDF89"}),a.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"고객사 초대"}),(0,a.jsxs)("p",{className:"text-gray-600",children:[a.jsx("span",{className:"font-semibold text-blue-600",children:i.organization.name}),"에서 귀하를 초대했습니다"]})]}),a.jsx("div",{className:"border-t border-b border-gray-200 py-4 mb-6",children:(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[a.jsx("div",{className:"text-sm text-gray-500",children:"고객사"}),a.jsx("div",{className:"font-medium",children:i.customer.name}),i.customer.fullName&&a.jsx("div",{className:"text-sm text-gray-600",children:i.customer.fullName})]}),(0,a.jsxs)("div",{children:[a.jsx("div",{className:"text-sm text-gray-500",children:"사업자등록번호"}),a.jsx("div",{className:"font-medium",children:i.customer.businessNumber})]}),i.customer.industry&&(0,a.jsxs)("div",{children:[a.jsx("div",{className:"text-sm text-gray-500",children:"업종"}),a.jsx("div",{className:"font-medium",children:i.customer.industry})]}),i.customer.address&&(0,a.jsxs)("div",{className:"col-span-2",children:[a.jsx("div",{className:"text-sm text-gray-500",children:"주소"}),a.jsx("div",{className:"font-medium",children:i.customer.address})]})]})}),a.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded p-4",children:(0,a.jsxs)("p",{className:"text-sm text-blue-800",children:["\uD83D\uDCA1 회원가입을 완료하면 ",a.jsx("strong",{children:i.organization.name}),"와 자동으로 연결되며, 측정 데이터를 실시간으로 확인할 수 있습니다."]})})]}),(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow-lg p-8",children:[a.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-6",children:"회원가입"}),(0,a.jsxs)("form",{onSubmit:P,className:"space-y-4",children:[(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"이메일 *"}),a.jsx("input",{type:"email",value:m,onChange:e=>x(e.target.value),className:"w-full border rounded px-3 py-2",placeholder:"example@company.com",required:!0})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"이름 *"}),a.jsx("input",{type:"text",value:b,onChange:e=>v(e.target.value),className:"w-full border rounded px-3 py-2",placeholder:"홍길동",required:!0})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"전화번호 *"}),a.jsx("input",{type:"tel",value:j,onChange:e=>N(e.target.value),className:"w-full border rounded px-3 py-2",placeholder:"010-1234-5678",required:!0})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"역할 선택 *"}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("label",{className:"flex items-center",children:[a.jsx("input",{type:"radio",name:"role",value:"ADMIN",checked:"ADMIN"===y||!y&&i?.suggestedRole==="ADMIN",onChange:e=>f(e.target.value),className:"mr-2"}),a.jsx("span",{children:"관리자 (CUSTOMER_ADMIN)"}),i?.suggestedRole==="ADMIN"&&a.jsx("span",{className:"ml-2 text-xs text-blue-600",children:"(권장)"})]}),(0,a.jsxs)("label",{className:"flex items-center",children:[a.jsx("input",{type:"radio",name:"role",value:"USER",checked:"USER"===y||!y&&i?.suggestedRole==="USER",onChange:e=>f(e.target.value),className:"mr-2"}),a.jsx("span",{children:"일반 사용자 (CUSTOMER_USER)"}),i?.suggestedRole==="USER"&&a.jsx("span",{className:"ml-2 text-xs text-blue-600",children:"(권장)"})]})]}),i?.roleNote&&(0,a.jsxs)("p",{className:"text-xs text-gray-500 mt-1",children:["힌트: ",i.roleNote]})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"사업자등록번호 (선택)"}),a.jsx("input",{type:"text",value:w,onChange:e=>S(e.target.value),className:"w-full border rounded px-3 py-2",placeholder:"123-45-67890"}),a.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"모르면 비워두세요. 나중에 추가할 수 있습니다."})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"비밀번호 * (최소 8자)"}),a.jsx("input",{type:"password",value:u,onChange:e=>p(e.target.value),className:"w-full border rounded px-3 py-2",placeholder:"••••••••",minLength:8,required:!0})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"비밀번호 확인 *"}),a.jsx("input",{type:"password",value:h,onChange:e=>g(e.target.value),className:"w-full border rounded px-3 py-2",placeholder:"••••••••",minLength:8,required:!0})]}),a.jsx("div",{className:"pt-4",children:a.jsx("button",{type:"submit",disabled:k,className:"w-full bg-blue-600 text-white px-4 py-3 rounded font-medium hover:bg-blue-700 disabled:bg-gray-400",children:k?"가입 중...":"회원가입 및 연결하기"})})]}),(0,a.jsxs)("div",{className:"mt-6 text-center text-sm text-gray-500",children:["이미 계정이 있으신가요?"," ",a.jsx("a",{href:"/login",className:"text-blue-600 hover:text-blue-700",children:"로그인"})]})]}),(0,a.jsxs)("div",{className:"mt-4 text-center text-sm text-gray-500",children:["이 초대 링크는 ",new Date(i.expiresAt).toLocaleDateString(),"까지 유효합니다."]})]})})}},41127:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});let a=(0,s(68570).createProxy)(String.raw`C:\Users\User\boaz\frontend\src\app\invite\[token]\page.tsx#default`)},15802:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>r});var a=s(19510);function r({children:e}){return a.jsx(a.Fragment,{children:e})}},73881:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>r});var a=s(66621);let r=e=>[{type:"image/x-icon",sizes:"16x16",url:(0,a.fillMetadataSegment)(".",e.params,"favicon.ico")+""}]}};var t=require("../../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),a=t.X(0,[8948,9975,6621,5736],()=>s(21958));module.exports=a})();