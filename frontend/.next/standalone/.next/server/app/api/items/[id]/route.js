"use strict";(()=>{var e={};e.id=3616,e.ids=[3616],e.modules={20399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},30517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},53361:(e,t,r)=>{r.r(t),r.d(t,{originalPathname:()=>w,patchFetch:()=>y,requestAsyncStorage:()=>c,routeModule:()=>m,serverHooks:()=>h,staticGenerationAsyncStorage:()=>l});var i={};r.r(i),r.d(i,{DELETE:()=>d,PATCH:()=>p});var s=r(49303),a=r(88716),n=r(60670),o=r(87070),u=r(20728);async function p(e,{params:t}){try{let r=t.id,i=await e.json(),{key:s,name:a,englishName:n,unit:p,limit:d,category:m,classification:c,hasLimit:l,isActive:h,order:w,inputType:y,options:x}=i,f=await u._.item.findUnique({where:{key:r}});if(!f)return o.NextResponse.json({error:"존재하지 않는 측정항목입니다."},{status:404});if(void 0!==h&&1===Object.keys(i).length){let e=await u._.item.update({where:{key:r},data:{isActive:h}});return o.NextResponse.json({data:e})}if(void 0!==w&&1===Object.keys(i).length){let e=await u._.item.update({where:{key:r},data:{order:w}});return o.NextResponse.json({data:e})}if(!s||!a)return o.NextResponse.json({error:"항목코드, 항목명은 필수입니다."},{status:400});if(s!==f.key&&await u._.item.findUnique({where:{key:s}}))return o.NextResponse.json({error:"이미 존재하는 항목코드입니다."},{status:400});let v=await u._.item.update({where:{key:r},data:{key:s.trim(),name:a.trim(),englishName:n?.trim()||null,unit:p?.trim()||f.unit,limit:void 0!==d?parseFloat(d):f.limit,category:m||f.category,classification:c?.trim()||f.classification,hasLimit:void 0!==l?l:f.hasLimit,isActive:void 0!==h?h:f.isActive,order:void 0!==w?w:f.order,inputType:y||f.inputType,options:void 0!==x?x:f.options}});return o.NextResponse.json({data:v})}catch(e){return o.NextResponse.json({error:e.message||"측정항목 수정 중 오류가 발생했습니다."},{status:500})}}async function d(e,{params:t}){try{let e=t.id;if(!await u._.item.findUnique({where:{key:e}}))return o.NextResponse.json({error:"존재하지 않는 측정항목입니다."},{status:404});if(await u._.measurement.count({where:{itemKey:e}})>0)return o.NextResponse.json({error:"측정 데이터가 존재하는 항목은 삭제할 수 없습니다."},{status:400});return await u._.item.delete({where:{key:e}}),o.NextResponse.json({success:!0})}catch(e){return o.NextResponse.json({error:e.message||"측정항목 삭제 중 오류가 발생했습니다."},{status:500})}}let m=new s.AppRouteRouteModule({definition:{kind:a.x.APP_ROUTE,page:"/api/items/[id]/route",pathname:"/api/items/[id]",filename:"route",bundlePath:"app/api/items/[id]/route"},resolvedPagePath:"C:\\Users\\User\\boaz\\frontend\\src\\app\\api\\items\\[id]\\route.ts",nextConfigOutput:"standalone",userland:i}),{requestAsyncStorage:c,staticGenerationAsyncStorage:l,serverHooks:h}=m,w="/api/items/[id]/route";function y(){return(0,n.patchFetch)({serverHooks:h,staticGenerationAsyncStorage:l})}},20728:(e,t,r)=>{r.d(t,{_:()=>s});let i=require("@prisma/client"),s=global.prisma||new i.PrismaClient({log:["warn","error"]})}};var t=require("../../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),i=t.X(0,[8948,5972],()=>r(53361));module.exports=i})();