(()=>{var e={};e.id=1955,e.ids=[1955],e.modules={72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},55315:e=>{"use strict";e.exports=require("path")},17360:e=>{"use strict";e.exports=require("url")},88729:(e,s,t)=>{"use strict";t.r(s),t.d(s,{GlobalError:()=>d.a,__next_app__:()=>m,originalPathname:()=>o,pages:()=>x,routeModule:()=>h,tree:()=>c}),t(25609),t(92553),t(35866);var r=t(23191),a=t(88716),l=t(37922),d=t.n(l),i=t(95231),n={};for(let e in i)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(n[e]=()=>i[e]);t.d(s,n);let c=["",{children:["measure",{children:["input",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,25609)),"C:\\Users\\User\\boaz\\frontend\\src\\app\\measure\\input\\page.tsx"]}]},{}]},{metadata:{icon:[async e=>(await Promise.resolve().then(t.bind(t,73881))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(t.bind(t,92553)),"C:\\Users\\User\\boaz\\frontend\\src\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(t.t.bind(t,35866,23)),"next/dist/client/components/not-found-error"],metadata:{icon:[async e=>(await Promise.resolve().then(t.bind(t,73881))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}],x=["C:\\Users\\User\\boaz\\frontend\\src\\app\\measure\\input\\page.tsx"],o="/measure/input/page",m={require:t,loadChunk:()=>Promise.resolve()},h=new r.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/measure/input/page",pathname:"/measure/input",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},58202:(e,s,t)=>{Promise.resolve().then(t.bind(t,3519))},3519:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>j});var r=t(10326),a=t(17577),l=t(21120),d=t(89175),i=t(2102),n=t(99837),c=t(93746),x=t(91245),o=t(20872),m=t(32743);function h({isOpen:e,onClose:s,title:t,message:a,type:l="info"}){return e?r.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50",onClick:s,children:(0,r.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl max-w-md w-full mx-4",onClick:e=>e.stopPropagation(),children:[r.jsx("div",{className:`rounded-t-lg border-b p-4 ${{success:"bg-green-50 dark:bg-green-900/20 border-green-200 dark:border-green-900/30 text-green-900 dark:text-green-200",error:"bg-red-50 dark:bg-red-900/20 border-red-200 dark:border-red-900/30 text-red-900 dark:text-red-200",warning:"bg-yellow-50 dark:bg-yellow-900/20 border-yellow-200 dark:border-yellow-900/30 text-yellow-900 dark:text-yellow-200",info:"bg-blue-50 dark:bg-blue-900/20 border-blue-200 dark:border-blue-900/30 text-blue-900 dark:text-blue-200"}[l]}`,children:(0,r.jsxs)("h2",{className:"text-lg font-semibold flex items-center gap-2",children:[r.jsx("span",{className:"text-2xl",children:{success:"✅",error:"❌",warning:"⚠️",info:"ℹ️"}[l]}),t]})}),r.jsx("div",{className:"p-6",children:r.jsx("p",{className:"text-gray-700 dark:text-gray-300 whitespace-pre-wrap",children:a})}),r.jsx("div",{className:"flex justify-end gap-2 p-4 border-t border-gray-200 dark:border-gray-700",children:r.jsx("button",{onClick:s,className:"px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-md font-medium transition-colors",children:"확인"})})]})}):null}var g=t(94585);function u(){let{user:e}=(0,l.a)(),[s,t]=(0,a.useState)(!1),[o,m]=(0,a.useState)([]),[h,u]=(0,a.useState)(0),[b,p]=(0,a.useState)(1),[j,y]=(0,a.useState)(50),N=()=>{let e=new Date,s=new Date;return s.setMonth(e.getMonth()-1),{start:s.toISOString().split("T")[0],end:e.toISOString().split("T")[0]}},f=(0,a.useMemo)(()=>N(),[]),[k,v]=(0,a.useState)(""),[w,D]=(0,a.useState)("전체"),[S,C]=(0,a.useState)("전체"),[T,A]=(0,a.useState)(f.start),[O,E]=(0,a.useState)(f.end),{list:_}=(0,c.n)(),$=(0,a.useMemo)(()=>"전체"===w?void 0:_.find(e=>e.name===w)?.id,[w,_]),{list:M}=(0,x.D)($),[I,Z]=(0,a.useState)(new Set),z=async()=>{t(!0);try{let e=new URLSearchParams;if(T&&e.append("startDate",T),O&&e.append("endDate",O),$&&e.append("customerId",$),"전체"!==S){let s=M.find(e=>e.name===S)?.id;s&&e.append("stackId",s)}e.append("page",b.toString()),e.append("limit",j.toString());let s=await fetch(`/api/measurements-temp?${e.toString()}`),t=await s.json();s.ok?(m(t.data||[]),u(t.total||0)):(m([]),u(0))}catch(e){m([]),u(0)}finally{t(!1)}},F=e=>{e?Z(new Set(o.map(e=>e.id))):Z(new Set)},P=(e,s)=>{let t=new Set(I);s?t.add(e):t.delete(e),Z(t)},U=async e=>{if(confirm("정말 삭제하시겠습니까?"))try{let s=await fetch(`/api/measurements-temp/${e}`,{method:"DELETE"});if(s.ok)alert("삭제되었습니다."),z();else{let e=await s.json();alert(e.error||"삭제 실패")}}catch(e){alert(e.message||"삭제 중 오류가 발생했습니다.")}},L=async()=>{if(0===I.size){alert("삭제할 항목을 선택해주세요.");return}if(confirm(`선택한 ${I.size}건을 삭제하시겠습니까?`))try{let e=await fetch("/api/measurements-temp/batch-delete",{method:"DELETE",headers:{"Content-Type":"application/json"},body:JSON.stringify({ids:Array.from(I)})}),s=await e.json();e.ok?(alert(s.message||"삭제되었습니다."),Z(new Set),z()):alert(s.error||"삭제 실패")}catch(e){alert(e.message||"삭제 중 오류가 발생했습니다.")}},R=async()=>{if(0===I.size){alert("확정할 항목을 선택해주세요.");return}if(confirm(`선택한 ${I.size}건을 확정하시겠습니까?

확정된 데이터는 측정 이력 및 대시보드에 반영됩니다.`)){t(!0);try{let e=await fetch("/api/measurements-temp/confirm",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({ids:Array.from(I)})}),s=await e.json();e.ok?(alert(s.message||"확정되었습니다."),Z(new Set),z()):alert(s.error||"확정 실패")}catch(e){alert(e.message||"확정 중 오류가 발생했습니다.")}finally{t(!1)}}},Y=async()=>{if(0!==I.size||confirm("전체 데이터를 다운로드하시겠습니까?"))try{let e=await fetch("/api/measurements-temp/download",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({ids:Array.from(I)})});if(e.ok){let s=await e.blob(),t=window.URL.createObjectURL(s),r=document.createElement("a");r.href=t;let a=new Date,l=`임시측정데이터_${a.getFullYear()}${String(a.getMonth()+1).padStart(2,"0")}${String(a.getDate()).padStart(2,"0")}_${String(a.getHours()).padStart(2,"0")}${String(a.getMinutes()).padStart(2,"0")}${String(a.getSeconds()).padStart(2,"0")}.csv`;r.download=l,document.body.appendChild(r),r.click(),window.URL.revokeObjectURL(t),document.body.removeChild(r)}else{let s=await e.json();alert(s.error||"다운로드 실패")}}catch(e){alert(e.message||"다운로드 중 오류가 발생했습니다.")}},B=Math.ceil(h/j);return(0,r.jsxs)("div",{className:"space-y-3",children:[r.jsx("div",{className:"rounded-lg border bg-white/50 dark:bg-white/5 p-2.5",children:(0,r.jsxs)("div",{className:"flex flex-wrap items-end gap-2",children:[(0,r.jsxs)("div",{className:"flex flex-col",style:{width:"176px",minWidth:"176px"},children:[r.jsx("label",{className:"text-xs text-gray-600 dark:text-gray-400 mb-0.5",children:"고객사"}),r.jsx(i.Z,{className:"text-sm h-8 w-full",value:w,onChange:e=>{D(e.target.value),C("전체"),p(1)},children:["전체",..._.map(e=>e.name)].map(e=>r.jsx("option",{children:e},e))})]}),(0,r.jsxs)("div",{className:"flex flex-col",style:{width:"176px",minWidth:"176px"},children:[r.jsx("label",{className:"text-xs text-gray-600 dark:text-gray-400 mb-0.5",children:"굴뚝명"}),r.jsx(i.Z,{className:"text-sm h-8 w-full",value:S,onChange:e=>{C(e.target.value),p(1)},children:["전체",...$?M.map(e=>e.name):[]].map(e=>r.jsx("option",{children:e},e))})]}),(0,r.jsxs)("div",{className:"flex flex-col",children:[r.jsx("label",{className:"text-xs text-gray-600 dark:text-gray-400 mb-0.5",children:"시작일"}),r.jsx(d.Z,{className:"text-sm h-8",style:{width:"144px",minWidth:"144px"},type:"date",value:T,onChange:e=>{A(e.target.value),p(1)}})]}),r.jsx("span",{className:"text-xs text-gray-500 mb-1.5",children:"~"}),(0,r.jsxs)("div",{className:"flex flex-col",children:[r.jsx("label",{className:"text-xs text-gray-600 dark:text-gray-400 mb-0.5",children:"종료일"}),r.jsx(d.Z,{className:"text-sm h-8",style:{width:"144px",minWidth:"144px"},type:"date",value:O,onChange:e=>{E(e.target.value),p(1)}})]}),(0,r.jsxs)("div",{className:"flex flex-col",style:{width:"158px",minWidth:"158px"},children:[r.jsx("label",{className:"text-xs text-gray-600 dark:text-gray-400 mb-0.5",children:"한페이지당"}),(0,r.jsxs)(i.Z,{className:"text-sm h-8 w-full",value:String(j),onChange:e=>{let s=e.target.value;y("ALL"===s?999999:Number(s)),p(1)},children:[r.jsx("option",{value:"50",children:"50"}),r.jsx("option",{value:"100",children:"100"}),r.jsx("option",{value:"200",children:"200"}),r.jsx("option",{value:"ALL",children:"전체"})]})]}),(0,r.jsxs)("div",{className:"flex gap-1.5 ml-auto mb-1.5",children:[r.jsx(n.Z,{size:"sm",variant:"secondary",onClick:()=>{v(""),D("전체"),C("전체"),A(f.start),E(f.end),p(1),z()},children:"초기화"}),r.jsx(n.Z,{size:"sm",onClick:R,className:"bg-blue-600 hover:bg-blue-700",disabled:s,children:s?"처리중...":"확정"}),r.jsx(n.Z,{size:"sm",onClick:Y,className:"bg-green-600 hover:bg-green-700",children:"Excel"}),r.jsx(n.Z,{size:"sm",variant:"secondary",onClick:L,className:"bg-red-600 hover:bg-red-700 text-white",children:"삭제"})]})]})}),(0,r.jsxs)("div",{className:"hidden md:block rounded-lg border overflow-x-auto max-h-[calc(100vh-180px)] overflow-y-auto",children:[0!==o.length||s?(0,r.jsxs)(g.iA,{className:"min-w-[1200px]",children:[r.jsx(g.hr,{className:"bg-gray-50 dark:bg-white/10 sticky top-0 z-10",children:(0,r.jsxs)(g.Tr,{children:[r.jsx(g.Th,{className:"bg-gray-50 dark:bg-gray-800",children:r.jsx("input",{type:"checkbox",checked:o.length>0&&I.size===o.length,onChange:e=>F(e.target.checked),className:"accent-blue-500"})}),r.jsx(g.Th,{className:"bg-gray-50 dark:bg-gray-800",children:"임시ID"}),r.jsx(g.Th,{className:"bg-gray-50 dark:bg-gray-800",children:"측정일자"}),r.jsx(g.Th,{className:"bg-gray-50 dark:bg-gray-800",children:"고객사"}),r.jsx(g.Th,{className:"bg-gray-50 dark:bg-gray-800",children:"배출구명"}),r.jsx(g.Th,{className:"bg-gray-50 dark:bg-gray-800",children:"기상"}),r.jsx(g.Th,{className:"bg-gray-50 dark:bg-gray-800",children:"기온℃"}),r.jsx(g.Th,{className:"bg-gray-50 dark:bg-gray-800",children:"습도％"}),r.jsx(g.Th,{className:"bg-gray-50 dark:bg-gray-800",children:"기압mmHg"}),r.jsx(g.Th,{className:"bg-gray-50 dark:bg-gray-800",children:"풍향"}),r.jsx(g.Th,{className:"bg-gray-50 dark:bg-gray-800",children:"풍속m／sec"}),r.jsx(g.Th,{className:"bg-gray-50 dark:bg-gray-800",children:"가스속도m／s"}),r.jsx(g.Th,{className:"bg-gray-50 dark:bg-gray-800",children:"가스온도℃"}),r.jsx(g.Th,{className:"bg-gray-50 dark:bg-gray-800",children:"수분함량％"}),r.jsx(g.Th,{className:"bg-gray-50 dark:bg-gray-800",children:"실측산소농도％"}),r.jsx(g.Th,{className:"bg-gray-50 dark:bg-gray-800",children:"표준산소농도％"}),r.jsx(g.Th,{className:"bg-gray-50 dark:bg-gray-800",children:"배출가스유량S㎥／min"}),r.jsx(g.Th,{className:"bg-gray-50 dark:bg-gray-800",children:"오염물질"}),r.jsx(g.Th,{className:"bg-gray-50 dark:bg-gray-800",children:"농도"}),r.jsx(g.Th,{className:"bg-gray-50 dark:bg-gray-800",children:"배출허용기준농도"}),r.jsx(g.Th,{className:"bg-gray-50 dark:bg-gray-800",children:"배출허용기준체크"}),r.jsx(g.Th,{className:"bg-gray-50 dark:bg-gray-800",children:"측정업체"}),r.jsx(g.Th,{className:"bg-gray-50 dark:bg-gray-800",children:"입력자"}),r.jsx(g.Th,{className:"bg-gray-50 dark:bg-gray-800",children:"액션"})]})}),r.jsx(g.p3,{children:s?r.jsx(g.Tr,{children:r.jsx(g.Td,{colSpan:24,className:"text-center py-8 text-gray-500",children:"로딩 중..."})}):o.map((e,s)=>(0,r.jsxs)(g.Tr,{children:[r.jsx(g.Td,{children:r.jsx("input",{type:"checkbox",checked:I.has(e.id),onChange:s=>P(e.id,s.target.checked),className:"accent-blue-500"})}),r.jsx(g.Td,{className:"font-mono text-xs",style:{maxWidth:"100px"},children:r.jsx("div",{className:"break-words",children:e.tempId})}),r.jsx(g.Td,{style:{maxWidth:"90px"},children:r.jsx("div",{className:"text-xs break-words",children:e.measuredAt})}),r.jsx(g.Td,{children:e.customer}),r.jsx(g.Td,{children:e.stack}),r.jsx(g.Td,{children:e.weather}),r.jsx(g.Td,{children:e.temp}),r.jsx(g.Td,{children:e.humidity}),r.jsx(g.Td,{children:e.pressure}),r.jsx(g.Td,{children:e.windDir}),r.jsx(g.Td,{children:e.windSpeed}),r.jsx(g.Td,{children:e.gasVel}),r.jsx(g.Td,{children:e.gasTemp}),r.jsx(g.Td,{children:e.moisture}),r.jsx(g.Td,{children:e.o2Measured}),r.jsx(g.Td,{children:e.o2Standard}),r.jsx(g.Td,{children:e.flowRate}),r.jsx(g.Td,{children:e.pollutant}),r.jsx(g.Td,{children:e.value}),r.jsx(g.Td,{children:e.limit??""}),r.jsx(g.Td,{children:e.limitCheck}),r.jsx(g.Td,{children:e.company}),r.jsx(g.Td,{children:e.createdBy}),r.jsx(g.Td,{children:r.jsx("button",{onClick:()=>U(e.id),className:"text-xs text-red-600 hover:underline",children:"삭제"})})]},`${e.tempId}_${e.pollutant}_${s}`))})]}):r.jsx("div",{className:"p-6 text-sm text-gray-500",children:"조건에 맞는 데이터가 없습니다."}),(0,r.jsxs)("div",{className:"p-3 flex items-center justify-between text-xs text-gray-500",children:[(0,r.jsxs)("div",{children:["총 ",h,"건 \xb7 ",b,"/",B," 페이지"]}),(0,r.jsxs)("div",{className:"flex gap-2 items-center",children:[r.jsx(n.Z,{variant:"secondary",size:"sm",onClick:()=>p(e=>Math.max(1,e-1)),disabled:1===b,children:"이전"}),r.jsx(n.Z,{variant:"secondary",size:"sm",onClick:()=>p(e=>Math.min(B,e+1)),disabled:b===B,children:"다음"})]})]})]}),r.jsx("div",{className:"md:hidden space-y-3",children:s?r.jsx("div",{className:"rounded-lg border bg-white/50 dark:bg-white/5 p-6 text-center text-gray-500",children:"로딩 중..."}):0===o.length?r.jsx("div",{className:"rounded-lg border bg-white/50 dark:bg-white/5 p-6 text-center text-gray-500",children:"조건에 맞는 데이터가 없습니다."}):(0,r.jsxs)(r.Fragment,{children:[o.map((e,s)=>(0,r.jsxs)("div",{className:"rounded-lg border bg-white/50 dark:bg-white/5 p-4 space-y-2",children:[(0,r.jsxs)("div",{className:"flex items-start justify-between mb-2",children:[r.jsx("input",{type:"checkbox",checked:I.has(e.id),onChange:s=>P(e.id,s.target.checked),className:"accent-blue-500 mt-1"}),r.jsx("button",{onClick:()=>U(e.id),className:"text-xs text-red-600 hover:underline",children:"삭제"})]}),(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-2 text-sm",children:[(0,r.jsxs)("div",{children:[r.jsx("span",{className:"text-gray-500",children:"\uD83D\uDCCD 고객사:"})," ",e.customer]}),(0,r.jsxs)("div",{children:[r.jsx("span",{className:"text-gray-500",children:"\uD83C\uDFED 굴뚝:"})," ",e.stack]}),(0,r.jsxs)("div",{className:"col-span-2",children:[r.jsx("span",{className:"text-gray-500",children:"\uD83D\uDCC5 측정일:"})," ",e.measuredAt]}),(0,r.jsxs)("div",{children:[r.jsx("span",{className:"text-gray-500",children:"\uD83E\uDDEA 오염물질:"})," ",e.pollutant]}),(0,r.jsxs)("div",{children:[r.jsx("span",{className:"text-gray-500",children:"\uD83D\uDCCA 농도:"})," ",e.value]}),(0,r.jsxs)("div",{children:[r.jsx("span",{className:"text-gray-500",children:"⚠️ 기준:"})," ",e.limit??"-"]}),(0,r.jsxs)("div",{children:[r.jsx("span",{className:"text-gray-500",children:"✅ 체크:"})," ",e.limitCheck]}),(0,r.jsxs)("div",{children:[r.jsx("span",{className:"text-gray-500",children:"\uD83C\uDF24️ 기상:"})," ",e.weather||"-"]}),(0,r.jsxs)("div",{children:[r.jsx("span",{className:"text-gray-500",children:"\uD83C\uDF21️ 기온:"})," ",e.temp||"-","℃"]}),(0,r.jsxs)("div",{children:[r.jsx("span",{className:"text-gray-500",children:"\uD83D\uDCA7 습도:"})," ",e.humidity||"-","%"]}),(0,r.jsxs)("div",{children:[r.jsx("span",{className:"text-gray-500",children:"\uD83C\uDF9A️ 기압:"})," ",e.pressure||"-","mmHg"]}),(0,r.jsxs)("div",{children:[r.jsx("span",{className:"text-gray-500",children:"\uD83E\uDDED 풍향:"})," ",e.windDir||"-"]}),(0,r.jsxs)("div",{children:[r.jsx("span",{className:"text-gray-500",children:"\uD83D\uDCA8 풍속:"})," ",e.windSpeed||"-","m/s"]}),(0,r.jsxs)("div",{children:[r.jsx("span",{className:"text-gray-500",children:"\uD83D\uDD25 가스온도:"})," ",e.gasTemp||"-","℃"]}),(0,r.jsxs)("div",{children:[r.jsx("span",{className:"text-gray-500",children:"\uD83D\uDCA8 가스속도:"})," ",e.gasVel||"-","m/s"]}),(0,r.jsxs)("div",{children:[r.jsx("span",{className:"text-gray-500",children:"\uD83D\uDCA7 수분:"})," ",e.moisture||"-","%"]}),(0,r.jsxs)("div",{children:[r.jsx("span",{className:"text-gray-500",children:"\uD83E\uDEE7 실측O₂:"})," ",e.o2Measured||"-","%"]}),(0,r.jsxs)("div",{children:[r.jsx("span",{className:"text-gray-500",children:"\uD83E\uDEE7 표준O₂:"})," ",e.o2Standard||"-","%"]}),(0,r.jsxs)("div",{children:[r.jsx("span",{className:"text-gray-500",children:"\uD83C\uDF0A 유량:"})," ",e.flowRate||"-","S㎥/min"]}),(0,r.jsxs)("div",{children:[r.jsx("span",{className:"text-gray-500",children:"\uD83C\uDFE2 업체:"})," ",e.company]}),(0,r.jsxs)("div",{children:[r.jsx("span",{className:"text-gray-500",children:"\uD83D\uDC64 입력자:"})," ",e.createdBy]}),(0,r.jsxs)("div",{className:"col-span-2 text-xs text-gray-400 font-mono break-all",children:["ID: ",e.tempId]})]})]},`${e.tempId}_${e.pollutant}_${s}`)),(0,r.jsxs)("div",{className:"rounded-lg border bg-white/50 dark:bg-white/5 p-3 flex items-center justify-between text-xs text-gray-500",children:[(0,r.jsxs)("div",{children:["총 ",h,"건 \xb7 ",b,"/",B," 페이지"]}),(0,r.jsxs)("div",{className:"flex gap-2 items-center",children:[r.jsx(n.Z,{variant:"secondary",size:"sm",onClick:()=>p(e=>Math.max(1,e-1)),disabled:1===b,children:"이전"}),r.jsx(n.Z,{variant:"secondary",size:"sm",onClick:()=>p(e=>Math.min(B,e+1)),disabled:b===B,children:"다음"})]})]})]})})]})}var b=t(43150);function p({isOpen:e,onClose:s,onConfirm:t,inputValue:a,lowerBound:l,upperBound:d,itemName:i}){return e?r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,r.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-6 w-full max-w-md shadow-xl",children:[(0,r.jsxs)("div",{className:"flex items-start gap-3 mb-4",children:[r.jsx("div",{className:"flex-shrink-0 w-10 h-10 rounded-full bg-yellow-100 dark:bg-yellow-900/30 flex items-center justify-center",children:r.jsx("svg",{className:"w-6 h-6 text-yellow-600 dark:text-yellow-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})})}),(0,r.jsxs)("div",{className:"flex-1",children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-2",children:"측정값 확인 필요"}),(0,r.jsxs)("p",{className:"text-sm text-gray-700 dark:text-gray-300 mb-4",children:["입력하신 ",r.jsx("span",{className:"font-semibold text-blue-600 dark:text-blue-400",children:i})," 값(",a.toFixed(2),")이 예상 범위(",(0,r.jsxs)("span",{className:"font-medium",children:[l.toFixed(2)," ~ ",d.toFixed(2)]}),")를 벗어났습니다."]}),(0,r.jsxs)("div",{className:"bg-gray-50 dark:bg-gray-700/50 rounded-lg p-3 mb-4",children:[r.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400 mb-2",children:"\uD83D\uDCA1 확인이 필요한 사항:"}),(0,r.jsxs)("ul",{className:"text-xs text-gray-700 dark:text-gray-300 space-y-1",children:[r.jsx("li",{children:"• 측정 장비의 상태를 확인해주세요"}),r.jsx("li",{children:"• 측정 조건을 재확인해주세요"}),r.jsx("li",{children:"• 실제 배출 상황을 점검해주세요"})]})]}),r.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"이대로 저장하시겠습니까?"})]})]}),(0,r.jsxs)("div",{className:"flex gap-3",children:[r.jsx("button",{onClick:s,className:"flex-1 px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors",children:"취소"}),r.jsx("button",{onClick:t,className:"flex-1 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"확인하고 저장"})]})]})}):null}function j(){let{user:e}=(0,l.a)(),s=e?.role,[t,g]=(0,a.useState)("field"),[j,y]=(0,a.useState)(!1),[N,f]=(0,a.useState)({}),[k,v]=(0,a.useState)(new Set),{dateStr:w,timeStr:D}=(()=>{let e=new Date;return{dateStr:e.toISOString().split("T")[0],timeStr:e.toTimeString().slice(0,5)}})(),[S,C]=(0,a.useState)(w),[T,A]=(0,a.useState)(D),{list:O}=(0,c.n)(),[E,_]=(0,a.useState)(""),$=(0,a.useMemo)(()=>O.find(e=>e.name===E)?.id,[O,E]),{list:M}=(0,x.D)($),[I,Z]=(0,a.useState)(""),z=(0,a.useMemo)(()=>M.find(e=>e.name===I)?.id,[M,I]),[F,P]=(0,a.useState)("보아스환경기술"),{items:U}=(0,o.F)(),[L,R]=(0,a.useState)([]),[Y,B]=(0,a.useState)(!1),[V,W]=(0,a.useState)(!1),[H,q]=(0,a.useState)(!1),[J,Q]=(0,a.useState)(null),[G,K]=(0,a.useState)({isOpen:!1,title:"",message:"",type:"info"}),X=(e,s,t)=>{K({isOpen:!0,title:e,message:s,type:t})},ee=async e=>{try{let s=await e.text(),{rows:t,error:r}=es(s);if(r||!t){let e=r||"CSV 파싱 실패";return X("업로드 실패",e,"error"),{success:!1,message:e}}let a=await er(t);return a.success?X("업로드 성공",a.message,"success"):X("업로드 실패",a.message,"error"),a}catch(s){let e=s.message||"업로드 중 오류가 발생했습니다.";return X("업로드 오류",e,"error"),{success:!1,message:e}}},es=e=>{let s=e.split(/\r?\n/).filter(e=>e.trim().length>0&&!e.startsWith("* "));if(0===s.length)return{rows:null,error:"빈 파일입니다."};let t=s.findIndex(e=>e.startsWith("배출구명,"));if(t<0)return{rows:null,error:"헤더 행을 찾을 수 없습니다."};let r=s[t].split(","),a=e=>r.findIndex(s=>s.trim()===e),l=a("배출구명"),d=a("측정일자"),i=a("기상"),n=a("기온℃"),c=a("습도％"),x=a("기압mmHg"),o=a("풍향"),m=a("풍속m／sec"),h=a("가스속도m／s"),g=a("가스온도℃"),u=a("수분함량％"),b=a("실측산소농도％"),p=a("표준산소농도％"),j=a("배출가스유량S㎥／min"),y=a("오염물질"),N=a("농도"),f=a("측정업체"),k=[];for(let e=t+1;e<s.length;e++){let t=s[e].split(",");if(t.length<16)continue;let r=t[l]?.trim(),a=t[d]?.trim(),v=t[y]?.trim(),w=t[N]?.trim();if(!r||!a||!v)continue;let D=Number(w);Number.isFinite(D)&&k.push({stack:r,measuredAt:a,weather:t[i]?.trim(),temp:t[n]?.trim(),humidity:t[c]?.trim(),pressure:t[x]?.trim(),windDir:t[o]?.trim(),wind:t[m]?.trim(),gasVel:t[h]?.trim(),gasTemp:t[g]?.trim(),flow:t[j]?.trim(),moisture:t[u]?.trim(),o2Measured:t[b]?.trim(),o2Standard:t[p]?.trim(),pollutant:v,value:D,company:t[f]?.trim()})}return{rows:k}},et=e=>{if(!e||""===e.trim())return new Date().toISOString();let s=e.match(/^(\d{4})(\d{2})(\d{2})(\d{2})(\d{2})$/);if(s){let[e,t,r,a,l,d]=s;return new Date(Number(t),Number(r)-1,Number(a),Number(l),Number(d)).toISOString()}if(s=e.match(/^(\d{4})-(\d{2})-(\d{2})\s+(\d{2}):(\d{2})$/)){let[e,t,r,a,l,d]=s;return new Date(Number(t),Number(r)-1,Number(a),Number(l),Number(d)).toISOString()}if(s=e.match(/^(\d{4})-(\d{2})-(\d{2})\s+(\d{2}):(\d{2}):(\d{2})$/)){let[e,t,r,a,l,d,i]=s;return new Date(Number(t),Number(r)-1,Number(a),Number(l),Number(d),Number(i)).toISOString()}if(s=e.match(/^(\d{4})\/(\d{2})\/(\d{2})\s+(\d{2}):(\d{2})$/)){let[e,t,r,a,l,d]=s;return new Date(Number(t),Number(r)-1,Number(a),Number(l),Number(d)).toISOString()}let t=new Date(e);return isNaN(t.getTime())?new Date().toISOString():t.toISOString()},er=async e=>{try{let s=new Map(U.map(e=>[e.name,e.key])),t=e=>{if(null==e||""===e)return;let s=Number(String(e).replace(/[^0-9.+-]/g,""));return Number.isFinite(s)?s:void 0},r=[];for(let a of e){let e=et(a.measuredAt);for(let[l,d]of(r.push({stack:a.stack,itemKey:String(s.get(a.pollutant)||a.pollutant),value:a.value,measuredAt:e}),[["temperature",t(a.temp)],["humidity",t(a.humidity)],["pressure",t(a.pressure)],["wind_speed",t(a.wind)],["gas_velocity",t(a.gasVel)],["gas_temp",t(a.gasTemp)],["moisture",t(a.moisture)],["oxygen_measured",t(a.o2Measured)],["oxygen_std",t(a.o2Standard)],["flow_rate",t(a.flow)]]))void 0!==d&&r.push({stack:a.stack,itemKey:l,value:d,measuredAt:e});a.weather&&a.weather.trim()&&r.push({stack:a.stack,itemKey:"weather",value:a.weather.trim(),measuredAt:e}),a.windDir&&a.windDir.trim()&&r.push({stack:a.stack,itemKey:"wind_direction",value:a.windDir.trim(),measuredAt:e})}let a=await fetch("/api/measurements/bulk",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({rows:r})}),l=await a.json();if(a.ok)return{success:!0,message:l.message||"업로드 성공",count:l.count};return{success:!1,message:l.error||"업로드 실패"}}catch(e){return{success:!1,message:e.message||"업로드 중 오류가 발생했습니다."}}},ea=(e,s)=>f(t=>({...t,[e]:s})),el=({v:e,limit:s})=>{let t=parseFloat(e);if(j||"nd"===e.toLowerCase()||""===e)return r.jsx("span",{className:"text-xs text-gray-500",children:"미입력"});if(isNaN(t))return r.jsx("span",{className:"text-xs text-gray-500",children:"-"});let a=t/s;return a>1?r.jsx("span",{className:"text-xs text-red-600",children:"초과"}):a>=.8?r.jsx("span",{className:"text-xs text-orange-500",children:"주의"}):r.jsx("span",{className:"text-xs text-green-600",children:"정상"})},ed=(0,a.useMemo)(()=>{let e={};return S||(e.__date="날짜는 필수입니다"),T||(e.__time="시간은 필수입니다"),Object.entries(N).forEach(([s,t])=>{if(!t)return;let r=L.find(e=>e.key===s);if(r?.inputType==="select"||r?.inputType==="text")return;let a=Number(t);Number.isFinite(a)?(a<0||a>999999)&&(e[s]="0~999999 범위"):e[s]="숫자를 입력하세요"}),e},[S,T,N,L]),ei=Object.keys(ed).length>0,en=async(e,t=!1)=>{if("customer"===s)return;if(!$||!z){X("임시저장 실패","고객사와 굴뚝을 선택해주세요.","error");return}let r=N[e]??"";if(""===r){X("임시저장 실패","값을 입력해주세요.","warning");return}let a=L.find(s=>s.key===e);if(a?.category==="채취환경"||a?.category==="보조항목"){try{let s=new Date(S+"T"+(T||"00:00")+":00"),t=await fetch("/api/measurements-temp/auxiliary",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({customerId:$,stackId:z,measurementDate:s.toISOString(),auxiliaryData:{[e]:r}})}),l=await t.json();t.ok?(v(s=>new Set(s).add(e)),X("채취환경 저장 완료",(a?.name||e)+" 항목이 저장되었습니다.\n동일 날짜/굴뚝의 "+l.updatedCount+"건 임시데이터에 적용되었습니다.","success")):X("저장 실패",l.error||"저장 중 오류가 발생했습니다.","error")}catch(e){X("저장 오류",e.message||"저장 중 오류가 발생했습니다.","error")}return}if(a?.inputType!=="select"&&a?.inputType!=="text"){let s=Number(r);if(!Number.isFinite(s)){X("임시저장 실패","올바른 숫자를 입력해주세요.","error");return}if(!t)try{let t=await fetch("http://localhost:8000/api/validate-measurement",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({customer_id:$,stack:I,item_key:e,value:s})}),r=await t.json();if(r.anomaly_detected){Q({isOpen:!0,itemKey:e,itemName:a?.name||e,inputValue:s,lowerBound:r.details.lower_bound,upperBound:r.details.upper_bound});return}}catch(e){}}try{let s=new Date(S+"T"+(T||"00:00")+":00"),t=a?.inputType==="select"||a?.inputType==="text"?r:Number(r),l=[{itemKey:e,value:t,unit:a?.unit||""}],d={};L.filter(e=>"채취환경"===e.category||"보조항목"===e.category).forEach(e=>{let s=N[e.key];s&&(d[e.key]=s)}),F&&(d.company=F);let i=await fetch("/api/measurements-temp",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({customerId:$,stackId:z,measurementDate:s.toISOString(),measurements:l,auxiliaryData:Object.keys(d).length>0?d:null})}),n=await i.json();i.ok?(v(s=>new Set(s).add(e)),X(k.has(e)?"재저장 완료":"임시저장 완료",(a?.name||e)+" 항목이 임시 저장되었습니다.\n임시 ID: "+n.tempId,"success")):X("저장 실패",n.error||"임시저장 중 오류가 발생했습니다.","error")}catch(e){X("저장 오류",e.message||"임시저장 중 오류가 발생했습니다.","error")}};return(0,r.jsxs)("section",{className:"space-y-3",children:[r.jsx("div",{className:"rounded-lg border bg-white/50 dark:bg-white/5 p-2.5",children:(0,r.jsxs)("div",{className:"flex flex-wrap items-end justify-between gap-2",children:[(0,r.jsxs)("div",{className:"flex flex-wrap items-end gap-2",children:[r.jsx("h1",{className:"text-lg font-semibold whitespace-nowrap mb-1.5",children:"측정 입력"}),r.jsx("span",{className:"text-gray-300 dark:text-gray-600 mb-1.5",children:"|"}),(0,r.jsxs)("div",{className:"flex gap-2 mb-1.5",children:[r.jsx("button",{onClick:()=>g("field"),className:`px-3 py-1 rounded text-sm font-medium transition-colors ${"field"===t?"bg-blue-600 text-white":"bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600"}`,children:"\uD83D\uDCDD 현장임시입력"}),r.jsx("button",{onClick:()=>g("temp"),className:`px-3 py-1 rounded text-sm font-medium transition-colors ${"temp"===t?"bg-blue-600 text-white":"bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600"}`,children:"\uD83D\uDCCA 임시데이터관리"}),r.jsx("button",{onClick:()=>g("bulk"),className:`px-3 py-1 rounded text-sm font-medium transition-colors ${"bulk"===t?"bg-blue-600 text-white":"bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600"}`,children:"\uD83D\uDCE4 확정일괄업로드"})]})]}),r.jsx("button",{onClick:()=>q(!0),className:"px-3 py-1.5 text-xs bg-blue-100 hover:bg-blue-200 dark:bg-blue-900 dark:hover:bg-blue-800 text-blue-700 dark:text-blue-300 rounded mb-1.5",children:"❓ 도움말"})]})}),"customer"===s&&"temp"!==t&&r.jsx("div",{className:"rounded-md border p-3 text-sm bg-yellow-50 border-yellow-200 text-yellow-900 dark:bg-yellow-900/20 dark:text-yellow-200",children:"고객사 사용자는 측정 데이터 입력 권한이 없습니다. 조회 기능을 이용해 주세요."}),"field"===t&&(0,r.jsxs)("div",{className:"grid grid-cols-12 gap-4",children:[(0,r.jsxs)("aside",{className:"col-span-12 md:col-span-2 rounded-lg border bg-white/50 dark:bg-white/5 p-4 space-y-4",children:[r.jsx("h2",{className:"text-base font-semibold",children:"측정 정보"}),(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{className:"space-y-2",children:[r.jsx("label",{className:"block text-xs sm:text-sm",children:"측정일"}),r.jsx(d.Z,{type:"date",value:S,onChange:e=>C(e.target.value),className:`w-full text-xs sm:text-sm bg-white dark:bg-gray-700 text-gray-900 dark:text-white border-gray-700 ${ed.__date?"border-red-500":""}`,disabled:"customer"===s}),ed.__date&&r.jsx("div",{className:"text-xs text-red-400 mt-1",children:ed.__date})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[r.jsx("label",{className:"block text-xs sm:text-sm",children:"고객사"}),(0,r.jsxs)(i.Z,{className:"w-full text-xs sm:text-sm bg-white dark:bg-gray-700 text-gray-900 dark:text-white border-gray-700",value:E,onChange:e=>_(e.target.value),disabled:"customer"===s,children:[r.jsx("option",{value:"",disabled:!0,children:"선택"}),O.map(e=>r.jsx("option",{value:e.name,children:e.name},e.id))]})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[r.jsx("label",{className:"block text-xs sm:text-sm",children:"굴뚝"}),(0,r.jsxs)(i.Z,{className:"w-full text-xs sm:text-sm bg-white dark:bg-gray-700 text-gray-900 dark:text-white border-gray-700",value:I,onChange:e=>Z(e.target.value),disabled:"customer"===s||!$,children:[r.jsx("option",{value:"",disabled:!0,children:$?"선택":"고객사 선택 필요"}),M.map(e=>r.jsx("option",{value:e.name,children:e.name},e.id))]})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[r.jsx("label",{className:"block text-xs sm:text-sm",children:"측정업체"}),r.jsx(i.Z,{className:"w-full text-xs sm:text-sm bg-white dark:bg-gray-700 text-gray-900 dark:text-white border-gray-700",value:F,onChange:e=>P(e.target.value),disabled:"customer"===s,children:r.jsx("option",{value:"보아스환경기술",children:"보아스환경기술"})})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsxs)("label",{className:"text-xs sm:text-sm flex items-center gap-2",children:[r.jsx("input",{type:"checkbox",checked:j,onChange:e=>y(e.target.checked),disabled:"customer"===s,className:"accent-blue-500"})," 불검출(전체)"]}),j&&r.jsx("div",{className:"text-xs rounded-md border border-blue-900/30 bg-blue-900/20 text-blue-200 p-2",children:"불검출(전체) 모드가 활성화되어 항목 값 입력이 비활성화됩니다."})]})]})]}),r.jsx("main",{className:"col-span-12 md:col-span-10",children:(0,r.jsxs)("div",{className:"rounded-lg border bg-white/50 dark:bg-white/5 p-6 space-y-6",children:[z?Y?r.jsx("div",{className:"text-center py-12 text-gray-500",children:"로딩 중..."}):0===L.length?(0,r.jsxs)("div",{className:"text-center py-12 text-gray-500",children:[r.jsx("p",{className:"mb-2",children:"측정 이력이 없습니다."}),r.jsx("p",{className:"text-sm",children:"측정 데이터를 입력하면 자동으로 항목이 표시됩니다."})]}):(0,r.jsxs)(r.Fragment,{children:[L.filter(e=>"채취환경"===e.category||"보조항목"===e.category).length>0&&(0,r.jsxs)("div",{className:"mb-6 bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg p-4",children:[r.jsx("h3",{className:"text-base font-semibold mb-3",children:"\uD83C\uDF21️ 채취환경"}),r.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4",children:L.filter(e=>"채취환경"===e.category||"보조항목"===e.category).map(e=>{let t=e.key,a=N[t]??"",l="select"===e.inputType,i=l&&e.options?JSON.parse(e.options):[];return(0,r.jsxs)("div",{className:"flex items-center gap-1.5",children:[r.jsx("div",{className:"w-20 text-xs font-medium leading-tight line-clamp-2",children:e.name}),l?(0,r.jsxs)("select",{className:`w-20 px-2 py-1 text-center text-sm border rounded ${ed[t]?"border-red-500":"border-gray-300"} bg-white dark:bg-gray-700`,value:a,onChange:e=>ea(t,e.target.value),disabled:"customer"===s,children:[r.jsx("option",{value:"",children:"선택"}),i.map(e=>r.jsx("option",{value:e,children:e},e))]}):r.jsx(d.Z,{type:"text",className:`w-20 px-2 py-1 text-center text-sm ${ed[t]?"border-red-500":""}`,placeholder:"값",value:a,onChange:e=>ea(t,e.target.value),disabled:"customer"===s}),ed[t]&&r.jsx("div",{className:"text-xs text-red-600",children:ed[t]}),r.jsx("div",{className:"text-xs text-gray-500 w-12",children:e.unit}),r.jsx("button",{className:"px-2 py-1 text-xs bg-orange-500 hover:bg-orange-600 text-white rounded disabled:opacity-50",disabled:"customer"===s,onClick:()=>en(t),children:k.has(t)?"재저장":"임시저장"})]},t)})})]}),L.filter(e=>"오염물질"===e.category).length>0&&(0,r.jsxs)("div",{children:[r.jsx("h3",{className:"text-base font-semibold mb-3",children:"\uD83C\uDFED 오염물질"}),r.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4",children:L.filter(e=>"오염물질"===e.category).map(e=>{let t=e.key,a=N[t]??"";return(0,r.jsxs)("div",{className:"flex items-center gap-1.5",children:[r.jsx("div",{className:"w-20 text-xs font-medium leading-tight line-clamp-2",children:e.name}),r.jsx(d.Z,{type:"text",className:`w-20 px-2 py-1 text-center text-sm ${ed[t]?"border-red-500":""}`,placeholder:j?"ND":"값",value:j?"":a,onChange:e=>ea(t,e.target.value),disabled:j||"customer"===s}),ed[t]&&r.jsx("div",{className:"text-xs text-red-600",children:ed[t]}),r.jsx("div",{className:"text-xs text-gray-500 w-12",children:e.unit}),(0,r.jsxs)("div",{className:"text-xs text-gray-500 w-16",children:["기준 ",e.limit]}),r.jsx("div",{className:"w-12",children:r.jsx(el,{v:a,limit:e.limit})}),r.jsx("button",{className:"px-2 py-1 text-xs bg-orange-500 hover:bg-orange-600 text-white rounded disabled:opacity-50",disabled:"customer"===s,onClick:()=>en(t),children:k.has(t)?"재저장":"임시저장"})]},t)})})]})]}):(0,r.jsxs)("div",{className:"text-center py-12 text-gray-500",children:[r.jsx("p",{className:"text-lg mb-2",children:"\uD83C\uDFED 굴뚝을 선택하세요"}),r.jsx("p",{className:"text-sm",children:"고객사와 굴뚝을 선택하면 측정 대상 항목이 표시됩니다."})]}),ei&&(0,r.jsxs)("div",{className:"mt-4 text-xs rounded-md border border-red-200 bg-red-50 text-red-700 dark:border-red-900/30 dark:bg-red-900/20 dark:text-red-200 p-2",children:["유효성 오류 ",Object.keys(ed).length,"개가 있습니다. 빨간 표시된 필드를 확인해 주세요."]})]})})]}),"temp"===t&&r.jsx(u,{}),"bulk"===t&&r.jsx("div",{className:"rounded-lg border bg-white/50 dark:bg-white/5 p-6",children:(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center",children:[(0,r.jsxs)("div",{children:[r.jsx("h2",{className:"text-lg font-semibold",children:"확정 일괄업로드"}),r.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:"검증이 완료된 측정 데이터를 일괄 업로드하여 확정 등록합니다."})]}),r.jsx(n.Z,{size:"sm",variant:"primary",onClick:()=>W(!0),children:"\uD83D\uDCE4 파일 업로드"})]}),(0,r.jsxs)("div",{className:"rounded-md border border-blue-200 bg-blue-50 dark:border-blue-900/30 dark:bg-blue-900/20 p-4",children:[r.jsx("h3",{className:"font-semibold text-blue-900 dark:text-blue-200 mb-2",children:"\uD83D\uDCA1 업로드 안내"}),(0,r.jsxs)("ul",{className:"text-sm text-blue-800 dark:text-blue-300 space-y-1",children:[r.jsx("li",{children:"• [임시데이터관리] 탭에서 다운로드한 Excel 파일을 그대로 사용할 수 있습니다"}),r.jsx("li",{children:"• 업로드된 데이터는 즉시 확정되어 측정 이력 및 대시보드에 반영됩니다"}),r.jsx("li",{children:"• 측정일자는 YYYYMMDDhhmm 형식(예: 202501131125) 또는 YYYY-MM-DD HH:mm 형식을 지원합니다"})]})]})]})}),r.jsx(m.Z,{isOpen:V,onClose:()=>W(!1),title:"측정 데이터 일괄업로드",templateHeaders:["배출구명","측정일자","기상","기온℃","습도％","기압mmHg","풍향","풍속m／sec","가스속도m／s","가스온도℃","수분함량％","실측산소농도％","표준산소농도％","배출가스유량S㎥／min","오염물질","농도","배출허용기준농도","배출허용기준체크","측정업체"],exampleRow:["C-ST01001","202501131125","맑음","4.0","33","769.9","북서","3.0","26.63","12","1.97","0","0","1713.8","먼지","0.7","30","","보아스환경기술"],templateFileName:"측정데이터_업로드_양식.csv",onUpload:ee,parseInstructions:"양식에 맞게 작성한 CSV 파일을 업로드하세요. 측정일자는 YYYYMMDDhhmm 형식(예: 202501131125) 또는 YYYY-MM-DD HH:mm 형식을 지원합니다."}),r.jsx(h,{isOpen:G.isOpen,onClose:()=>{K({...G,isOpen:!1})},title:G.title,message:G.message,type:G.type}),r.jsx(b.Z,{isOpen:H,title:"측정 입력 도움말",sections:[{title:"\uD83D\uDCCC 빠른 시작",content:(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{children:[r.jsx("h3",{className:"text-lg font-bold mb-3",children:"측정 데이터 입력 3단계"}),(0,r.jsxs)("ol",{className:"list-decimal list-inside space-y-2 ml-2",children:[(0,r.jsxs)("li",{className:"text-gray-700 dark:text-gray-300",children:[r.jsx("strong",{children:"날짜/고객사/굴뚝 선택"}),(0,r.jsxs)("ul",{className:"list-disc list-inside ml-6 mt-1 space-y-1",children:[r.jsx("li",{children:"측정일, 측정시간 입력"}),r.jsx("li",{children:"고객사와 굴뚝 선택"}),r.jsx("li",{children:"과거 측정이력 기반으로 항목 자동 표시"})]})]}),(0,r.jsxs)("li",{className:"text-gray-700 dark:text-gray-300",children:[r.jsx("strong",{children:"채취환경 입력 (상단 파란 박스)"}),(0,r.jsxs)("ul",{className:"list-disc list-inside ml-6 mt-1 space-y-1",children:[r.jsx("li",{children:"기상, 풍향, 기온 등 입력"}),r.jsx("li",{children:"각 항목별 [임시저장] 클릭"})]})]}),(0,r.jsxs)("li",{className:"text-gray-700 dark:text-gray-300",children:[r.jsx("strong",{children:"오염물질 입력"}),(0,r.jsxs)("ul",{className:"list-disc list-inside ml-6 mt-1 space-y-1",children:[r.jsx("li",{children:"먼지, SOx, NOx 등 측정값 입력"}),r.jsx("li",{children:"각 항목별 [임시저장] 클릭"})]})]})]})]}),(0,r.jsxs)("div",{className:"bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg p-4",children:[r.jsx("h4",{className:"font-bold text-blue-900 dark:text-blue-300 mb-2",children:"\uD83D\uDCA1 핵심 Tip"}),(0,r.jsxs)("ul",{className:"space-y-1 text-sm text-blue-800 dark:text-blue-200",children:[r.jsx("li",{children:"• 채취환경을 먼저 입력하세요 (모든 오염물질에 공통 적용)"}),r.jsx("li",{children:"• 임시저장 → 임시데이터관리 탭에서 체크박스 선택 → 확정 버튼 클릭"}),r.jsx("li",{children:"• 측정항목 변경은 [측정항목] 메뉴에서"})]})]})]})},{title:"\uD83D\uDCCB 측정할 항목 설정",content:(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{children:[r.jsx("h3",{className:"text-lg font-bold mb-3",children:"자동 표시 방식"}),(0,r.jsxs)("p",{className:"text-gray-700 dark:text-gray-300 mb-3",children:["굴뚝을 선택하면 ",r.jsx("strong",{children:"과거 측정이력을 기반"}),"으로 측정 항목이 자동으로 표시됩니다."]}),r.jsx("div",{className:"bg-gray-50 dark:bg-gray-900/20 border border-gray-200 dark:border-gray-700 rounded p-3",children:(0,r.jsxs)("p",{className:"text-sm text-gray-700 dark:text-gray-300",children:["예: A 굴뚝에서 과거에 먼지, SOx, NOx를 측정했다면",r.jsx("br",{}),"→ A 굴뚝 선택 시 자동으로 먼지, SOx, NOx 항목이 표시됨"]})})]}),(0,r.jsxs)("div",{children:[r.jsx("h3",{className:"text-lg font-bold mb-3",children:"측정항목 변경이 필요한 경우"}),(0,r.jsxs)("div",{className:"space-y-3",children:[(0,r.jsxs)("div",{className:"bg-yellow-50 dark:bg-yellow-900/20 border border-yellow-200 dark:border-yellow-800 rounded p-3",children:[r.jsx("p",{className:"text-sm font-medium text-yellow-900 dark:text-yellow-300 mb-2",children:"다음과 같은 경우 측정항목 설정이 필요합니다:"}),(0,r.jsxs)("ul",{className:"space-y-1 text-sm text-yellow-800 dark:text-yellow-200",children:[r.jsx("li",{children:"• 신규 항목 추가 (예: 암모니아 측정 시작)"}),r.jsx("li",{children:"• 기존 항목 제거 (예: 더 이상 측정하지 않는 항목)"}),r.jsx("li",{children:"• 처음 측정하는 굴뚝 (측정이력 없음)"})]})]}),(0,r.jsxs)("div",{children:[r.jsx("h4",{className:"font-bold text-gray-900 dark:text-gray-300 mb-2",children:"설정 방법"}),(0,r.jsxs)("ol",{className:"list-decimal list-inside space-y-2 text-sm text-gray-700 dark:text-gray-300",children:[(0,r.jsxs)("li",{children:[r.jsx("strong",{children:"[측정항목]"})," 메뉴로 이동"]}),(0,r.jsxs)("li",{children:[r.jsx("strong",{children:"[굴뚝별 측정 대상 설정]"})," 탭 선택"]}),r.jsx("li",{children:"고객사와 굴뚝 선택"}),r.jsx("li",{children:"측정할 항목 체크/해제"}),r.jsx("li",{children:"[저장] 버튼 클릭"})]})]})]})]}),(0,r.jsxs)("div",{className:"bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg p-4",children:[r.jsx("h4",{className:"font-bold text-blue-900 dark:text-blue-300 mb-2",children:"\uD83D\uDCA1 Tip"}),(0,r.jsxs)("p",{className:"text-sm text-blue-800 dark:text-blue-200",children:["측정항목 설정은 한 번만 하면 됩니다.",r.jsx("br",{}),"이후 해당 굴뚝 선택 시 설정한 항목이 자동으로 표시됩니다."]})]})]})},{title:"\uD83C\uDF21️ 채취환경 입력",content:(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{children:[r.jsx("h3",{className:"text-lg font-bold mb-3",children:"채취환경이란?"}),r.jsx("p",{className:"text-gray-700 dark:text-gray-300 mb-2",children:"측정 당시의 환경 조건으로, 모든 오염물질 측정에 공통으로 적용됩니다."}),(0,r.jsxs)("ul",{className:"space-y-1 text-sm text-gray-600 dark:text-gray-400",children:[r.jsx("li",{children:"• 기상, 기온, 습도, 기압"}),r.jsx("li",{children:"• 풍향, 풍속"}),r.jsx("li",{children:"• 가스속도, 가스온도, 수분함량"}),r.jsx("li",{children:"• 산소농도, 배출가스유량 등"})]})]}),(0,r.jsxs)("div",{children:[r.jsx("h3",{className:"text-lg font-bold mb-3",children:"입력 방법"}),(0,r.jsxs)("ol",{className:"list-decimal list-inside space-y-2 text-sm text-gray-700 dark:text-gray-300",children:[r.jsx("li",{children:"상단 파란색 박스의 채취환경 항목 확인"}),r.jsx("li",{children:"각 항목에 측정값 입력"}),r.jsx("li",{children:"항목별 [임시저장] 버튼 클릭"})]})]}),(0,r.jsxs)("div",{className:"bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800 rounded-lg p-4",children:[r.jsx("h4",{className:"font-bold text-green-900 dark:text-green-300 mb-2",children:"✨ 자동 적용 기능"}),(0,r.jsxs)("p",{className:"text-sm text-green-800 dark:text-green-200",children:["채취환경을 저장하면 ",r.jsx("strong",{children:"동일 날짜/동일 굴뚝"}),"의 모든 임시데이터에 자동으로 적용됩니다.",r.jsx("br",{}),'예: 기상을 "맑음"으로 저장 → 해당 날짜의 모든 오염물질 데이터에 "맑음" 적용']})]}),(0,r.jsxs)("div",{className:"bg-yellow-50 dark:bg-yellow-900/20 border border-yellow-200 dark:border-yellow-800 rounded-lg p-4",children:[r.jsx("h4",{className:"font-bold text-yellow-900 dark:text-yellow-300 mb-2",children:"⚠️ 주의사항"}),(0,r.jsxs)("ul",{className:"space-y-1 text-sm text-yellow-800 dark:text-yellow-200",children:[r.jsx("li",{children:"• 채취환경은 측정 시작 전에 먼저 입력하는 것을 권장"}),r.jsx("li",{children:"• 나중에 수정하면 기존 임시데이터도 함께 업데이트됨"}),r.jsx("li",{children:"• 확정 후에는 측정이력 메뉴에서 수정 가능"})]})]})]})},{title:"\uD83C\uDFED 오염물질 입력",content:(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{children:[r.jsx("h3",{className:"text-lg font-bold mb-3",children:"입력 방법"}),(0,r.jsxs)("ol",{className:"list-decimal list-inside space-y-2 text-sm text-gray-700 dark:text-gray-300",children:[r.jsx("li",{children:"오염물질 항목에 측정값 입력"}),r.jsx("li",{children:"각 항목별 [임시저장] 버튼 클릭"}),r.jsx("li",{children:"저장되면 버튼이 [재저장]으로 변경됨"})]})]}),(0,r.jsxs)("div",{children:[r.jsx("h3",{className:"text-lg font-bold mb-3",children:"채취환경 자동 적용"}),r.jsx("p",{className:"text-sm text-gray-700 dark:text-gray-300 mb-2",children:"오염물질을 임시저장하면 현재 입력된 채취환경 값이 자동으로 함께 저장됩니다."}),r.jsx("div",{className:"bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded p-3",children:(0,r.jsxs)("p",{className:"text-sm text-blue-800 dark:text-blue-200",children:["\uD83D\uDCA1 채취환경 없이 오염물질만 저장해도 됩니다.",r.jsx("br",{}),"나중에 채취환경을 입력하면 자동으로 업데이트됩니다."]})})]}),(0,r.jsxs)("div",{children:[r.jsx("h3",{className:"text-lg font-bold mb-3",children:"유효성 검사"}),(0,r.jsxs)("ul",{className:"space-y-2 text-sm",children:[(0,r.jsxs)("li",{className:"flex items-start gap-2",children:[r.jsx("span",{className:"text-green-600",children:"✅"}),r.jsx("span",{className:"text-gray-700 dark:text-gray-300",children:"숫자 항목: 올바른 숫자 형식 확인"})]}),(0,r.jsxs)("li",{className:"flex items-start gap-2",children:[r.jsx("span",{className:"text-green-600",children:"✅"}),r.jsx("span",{className:"text-gray-700 dark:text-gray-300",children:"선택 항목: 드롭다운에서 선택"})]}),(0,r.jsxs)("li",{className:"flex items-start gap-2",children:[r.jsx("span",{className:"text-green-600",children:"✅"}),r.jsx("span",{className:"text-gray-700 dark:text-gray-300",children:"배출허용기준 초과 시 경고 표시"})]}),(0,r.jsxs)("li",{className:"flex items-start gap-2",children:[r.jsx("span",{className:"text-yellow-600",children:"⚠️"}),r.jsx("span",{className:"text-gray-700 dark:text-gray-300",children:"AI 기반 이상치 검증 (예상 범위 벗어날 시 워닝)"})]})]})]}),(0,r.jsxs)("div",{className:"bg-purple-50 dark:bg-purple-900/20 border border-purple-200 dark:border-purple-800 rounded-lg p-4",children:[r.jsx("h4",{className:"font-bold text-purple-900 dark:text-purple-300 mb-2",children:"\uD83E\uDD16 AI 이상치 검증"}),r.jsx("p",{className:"text-sm text-purple-800 dark:text-purple-200 mb-3",children:"측정값 입력 시 AI가 과거 데이터를 분석하여 예상 범위를 벗어난 값을 자동으로 감지합니다."}),(0,r.jsxs)("ul",{className:"space-y-1 text-sm text-purple-800 dark:text-purple-200",children:[r.jsx("li",{children:"• 워닝 메시지가 표시되면 측정 장비와 조건을 재확인하세요"}),r.jsx("li",{children:'• 실제로 높은 값이 맞다면 "확인하고 저장" 클릭'}),r.jsx("li",{children:"• 데이터가 10개 미만인 경우 검증이 생략됩니다"})]})]}),(0,r.jsxs)("div",{className:"bg-gray-50 dark:bg-gray-900/20 border border-gray-200 dark:border-gray-700 rounded p-3",children:[r.jsx("h4",{className:"font-medium text-gray-900 dark:text-gray-300 mb-2",children:"불검출(ND) 처리"}),(0,r.jsxs)("p",{className:"text-sm text-gray-700 dark:text-gray-300",children:['측정값이 검출한계 미만인 경우 "불검출(전체)" 체크박스를 선택하면',r.jsx("br",{}),"모든 항목이 ND로 처리됩니다."]})]})]})},{title:"\uD83D\uDCCB 임시데이터 관리",content:(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{children:[r.jsx("h3",{className:"text-lg font-bold mb-3",children:"임시저장 후 확인"}),(0,r.jsxs)("ol",{className:"list-decimal list-inside space-y-2 text-sm text-gray-700 dark:text-gray-300",children:[r.jsx("li",{children:"[임시데이터관리] 탭 클릭"}),r.jsx("li",{children:"저장된 데이터 목록 확인"}),r.jsx("li",{children:"확정할 항목 체크박스 선택"}),r.jsx("li",{children:"[확정] 버튼 클릭 → 측정이력에 자동 반영"})]})]}),(0,r.jsxs)("div",{children:[r.jsx("h3",{className:"text-lg font-bold mb-3",children:"확정 방법 2가지"}),(0,r.jsxs)("div",{className:"space-y-3",children:[(0,r.jsxs)("div",{className:"bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded p-3",children:[r.jsx("h4",{className:"font-medium text-blue-900 dark:text-blue-300 mb-2",children:"방법 1: 직접 확정 (권장)"}),(0,r.jsxs)("ul",{className:"space-y-1 text-sm text-blue-800 dark:text-blue-200",children:[r.jsx("li",{children:"• 임시데이터관리 탭에서 체크박스 선택"}),r.jsx("li",{children:"• [확정] 버튼 클릭"}),r.jsx("li",{children:"• 즉시 측정이력에 반영"})]})]}),(0,r.jsxs)("div",{className:"bg-gray-50 dark:bg-gray-900/20 border border-gray-200 dark:border-gray-700 rounded p-3",children:[r.jsx("h4",{className:"font-medium text-gray-900 dark:text-gray-300 mb-2",children:"방법 2: Excel 다운로드 후 일괄업로드"}),(0,r.jsxs)("ul",{className:"space-y-1 text-sm text-gray-700 dark:text-gray-300",children:[r.jsx("li",{children:"• [Excel] 버튼으로 다운로드"}),r.jsx("li",{children:"• Excel에서 수정 필요 시 편집"}),r.jsx("li",{children:"• [확정일괄업로드] 탭에서 업로드"})]})]})]})]}),(0,r.jsxs)("div",{children:[r.jsx("h3",{className:"text-lg font-bold mb-3",children:"기타 기능"}),(0,r.jsxs)("ul",{className:"space-y-2 text-sm text-gray-700 dark:text-gray-300",children:[(0,r.jsxs)("li",{children:["• ",r.jsx("strong",{children:"[Excel]"}),": 선택한 항목 또는 전체 다운로드"]}),(0,r.jsxs)("li",{children:["• ",r.jsx("strong",{children:"[삭제]"}),": 선택한 임시데이터 삭제"]}),r.jsx("li",{children:"• 필터: 고객사, 굴뚝, 기간별 조회"})]})]}),(0,r.jsxs)("div",{className:"bg-yellow-50 dark:bg-yellow-900/20 border border-yellow-200 dark:border-yellow-800 rounded-lg p-4",children:[r.jsx("h4",{className:"font-bold text-yellow-900 dark:text-yellow-300 mb-2",children:"⚠️ 주의"}),(0,r.jsxs)("p",{className:"text-sm text-yellow-800 dark:text-yellow-200",children:["임시데이터는 아직 확정되지 않은 상태입니다.",r.jsx("br",{}),"확정 버튼을 클릭해야 측정이력 및 대시보드에 반영됩니다."]})]})]})},{title:"\uD83D\uDCE4 확정 일괄업로드",content:(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{children:[r.jsx("h3",{className:"text-lg font-bold mb-3",children:"업로드 절차"}),(0,r.jsxs)("ol",{className:"list-decimal list-inside space-y-2 text-sm text-gray-700 dark:text-gray-300",children:[r.jsx("li",{children:"[확정일괄업로드] 탭 클릭"}),r.jsx("li",{children:"[\uD83D\uDCE4 파일 업로드] 버튼 클릭"}),r.jsx("li",{children:"검토/수정한 Excel 파일 선택"}),r.jsx("li",{children:"업로드 완료 → 측정이력에 자동 반영"})]})]}),(0,r.jsxs)("div",{children:[r.jsx("h3",{className:"text-lg font-bold mb-3",children:"Excel 파일 형식"}),r.jsx("p",{className:"text-sm text-gray-700 dark:text-gray-300 mb-2",children:"임시데이터관리 탭에서 다운로드한 Excel 파일을 그대로 사용할 수 있습니다."}),(0,r.jsxs)("ul",{className:"space-y-1 text-sm text-gray-600 dark:text-gray-400",children:[r.jsx("li",{children:"• 컬럼 순서 및 이름 변경 금지"}),r.jsx("li",{children:"• 측정값만 수정 가능"}),r.jsx("li",{children:"• 행 추가/삭제 가능"})]})]}),(0,r.jsxs)("div",{className:"bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800 rounded-lg p-4",children:[r.jsx("h4",{className:"font-bold text-green-900 dark:text-green-300 mb-2",children:"✅ 확정 후"}),(0,r.jsxs)("ul",{className:"space-y-1 text-sm text-green-800 dark:text-green-200",children:[r.jsx("li",{children:"• 측정이력 메뉴에서 조회 가능"}),r.jsx("li",{children:"• 대시보드에 자동 반영"}),r.jsx("li",{children:"• 고객사도 조회 가능"})]})]})]})},{title:"❓ FAQ",content:(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{className:"border-b pb-4",children:[r.jsx("h4",{className:"font-bold mb-2",children:"Q1. 측정할 항목이 표시되지 않아요"}),(0,r.jsxs)("p",{className:"text-sm text-gray-700 dark:text-gray-300",children:["A: 과거 측정이력이 없거나 측정항목 설정이 필요합니다.",r.jsx("br",{}),"[측정항목] 메뉴 → [굴뚝별 측정 대상 설정]에서 항목을 설정하세요."]})]}),(0,r.jsxs)("div",{className:"border-b pb-4",children:[r.jsx("h4",{className:"font-bold mb-2",children:"Q2. 채취환경을 나중에 입력해도 되나요?"}),r.jsx("p",{className:"text-sm text-gray-700 dark:text-gray-300",children:"A: 네, 가능합니다. 나중에 입력하면 동일 날짜/굴뚝의 모든 임시데이터에 자동 적용됩니다."})]}),(0,r.jsxs)("div",{className:"border-b pb-4",children:[r.jsx("h4",{className:"font-bold mb-2",children:"Q3. 임시저장한 데이터를 수정하려면?"}),(0,r.jsxs)("p",{className:"text-sm text-gray-700 dark:text-gray-300",children:["A: 같은 날짜/굴뚝/항목으로 다시 임시저장하면 기존 값이 업데이트됩니다.",r.jsx("br",{}),"또는 [임시데이터관리] 탭에서 삭제 후 다시 입력하세요."]})]}),(0,r.jsxs)("div",{className:"border-b pb-4",children:[r.jsx("h4",{className:"font-bold mb-2",children:"Q4. 확정 후 수정이 가능한가요?"}),r.jsx("p",{className:"text-sm text-gray-700 dark:text-gray-300",children:"A: 네, [측정이력] 메뉴에서 수정 가능합니다."})]}),(0,r.jsxs)("div",{className:"border-b pb-4",children:[r.jsx("h4",{className:"font-bold mb-2",children:"Q5. 여러 굴뚝을 한 번에 입력할 수 있나요?"}),r.jsx("p",{className:"text-sm text-gray-700 dark:text-gray-300",children:"A: 현장임시입력은 굴뚝별로 입력합니다. 여러 굴뚝은 Excel 파일로 일괄 업로드하세요."})]}),(0,r.jsxs)("div",{className:"pb-4",children:[r.jsx("h4",{className:"font-bold mb-2",children:"Q6. AI 이상치 워닝이 뜨는데 값이 맞아요"}),(0,r.jsxs)("p",{className:"text-sm text-gray-700 dark:text-gray-300",children:['A: 실제로 높은 값이 측정된 경우 "확인하고 저장" 버튼을 클릭하면 됩니다.',r.jsx("br",{}),"AI는 과거 데이터 기반으로 예측하므로 실제 배출 상황이 변경된 경우 워닝이 표시될 수 있습니다."]})]})]})}],onClose:()=>q(!1)}),J&&r.jsx(p,{isOpen:J.isOpen,onClose:()=>Q(null),onConfirm:()=>{en(J.itemKey,!0),Q(null)},inputValue:J.inputValue,lowerBound:J.lowerBound,upperBound:J.upperBound,itemName:J.itemName})]})}},32743:(e,s,t)=>{"use strict";t.d(s,{Z:()=>d});var r=t(10326),a=t(17577),l=t(99837);function d({isOpen:e,onClose:s,title:t,templateHeaders:d,exampleRow:i,templateFileName:n,onUpload:c,parseInstructions:x="양식에 맞게 작성한 CSV 파일을 업로드하세요."}){let[o,m]=(0,a.useState)(null),[h,g]=(0,a.useState)(!1),[u,b]=(0,a.useState)(""),p=async()=>{if(!o){b("파일을 선택해주세요.");return}g(!0),b("");try{let e=await c(o);if(e.success){let s=e.message||"업로드 완료";b(`✅ ${s}`),m(null)}else b(`❌ ${e.message||"업로드 실패"}`)}catch(e){b(`❌ 오류: ${e.message||"업로드 중 문제가 발생했습니다."}`)}finally{g(!1)}},j=()=>{h||(m(null),b(""),s())};return e?r.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",onClick:j,children:(0,r.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-6 max-w-2xl w-full mx-4",onClick:e=>e.stopPropagation(),children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[r.jsx("h2",{className:"text-xl font-bold",children:t}),r.jsx("button",{onClick:j,disabled:h,className:"text-gray-500 hover:text-gray-700 disabled:opacity-50",children:"✕"})]}),(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{className:"text-sm text-gray-600 dark:text-gray-400 bg-blue-50 dark:bg-blue-900/20 p-3 rounded",children:[r.jsx("p",{className:"font-medium mb-1",children:"\uD83D\uDCCB 업로드 절차"}),(0,r.jsxs)("ol",{className:"list-decimal list-inside space-y-1 text-xs",children:[r.jsx("li",{children:'아래 "업로드 양식 다운로드" 버튼을 클릭하여 CSV 양식을 다운로드합니다.'}),r.jsx("li",{children:"다운로드한 양식에 데이터를 입력합니다. (예시 행 참고)"}),r.jsx("li",{children:'"파일 선택" 버튼을 클릭하여 작성한 CSV 파일을 선택합니다.'}),r.jsx("li",{children:'"업로드" 버튼을 클릭하여 데이터를 등록합니다.'})]})]}),r.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:x}),(0,r.jsxs)("div",{className:"flex flex-col gap-3",children:[r.jsx("div",{className:"flex gap-2",children:r.jsx(l.Z,{variant:"secondary",onClick:()=>{let e=new Blob(["\uFEFF"+d.map(e=>`"${e}"`).join(",")+"\n"+i.map(e=>`"${e}"`).join(",")+"\n"],{type:"text/csv;charset=utf-8;"}),s=URL.createObjectURL(e),t=document.createElement("a");t.href=s,t.download=n,t.click(),URL.revokeObjectURL(s)},disabled:h,className:"flex-1",children:"\uD83D\uDCE5 업로드 양식 다운로드"})}),r.jsx("div",{className:"flex gap-2",children:(0,r.jsxs)("label",{className:"flex-1",children:[r.jsx("div",{className:`px-4 py-2 border-2 border-dashed rounded cursor-pointer text-center transition-colors ${o?"border-blue-500 bg-blue-50 dark:bg-blue-900/20":"border-gray-300 dark:border-gray-600 hover:border-blue-400"} ${h?"opacity-50 cursor-not-allowed":""}`,children:o?(0,r.jsxs)("span",{className:"text-sm",children:["\uD83D\uDCC4 ",o.name]}):r.jsx("span",{className:"text-sm text-gray-500",children:"\uD83D\uDCC1 파일 선택 (CSV)"})}),r.jsx("input",{type:"file",accept:".csv",className:"hidden",onChange:e=>{let s=e.target.files?.[0];s&&(m(s),b(""))},disabled:h})]})}),r.jsx(l.Z,{onClick:p,disabled:!o||h,className:"w-full",children:h?"업로드 중...":"업로드"})]}),u&&r.jsx("div",{className:`text-sm p-4 rounded border-2 ${u.startsWith("✅")?"bg-green-50 dark:bg-green-900/20 text-green-700 dark:text-green-300 border-green-500":"bg-red-50 dark:bg-red-900/20 text-red-700 dark:text-red-300 border-red-500"}`,children:(0,r.jsxs)("div",{className:"flex flex-col gap-3",children:[r.jsx("pre",{className:"whitespace-pre-wrap font-sans",children:u}),r.jsx(l.Z,{size:"sm",onClick:()=>{b(""),j()},className:"self-end",children:"확인"})]})})]}),!u&&r.jsx("div",{className:"mt-6 flex justify-end gap-2",children:r.jsx(l.Z,{variant:"secondary",onClick:j,disabled:h,children:"닫기"})})]})}):null}},43150:(e,s,t)=>{"use strict";t.d(s,{Z:()=>l});var r=t(10326),a=t(17577);function l({isOpen:e,onClose:s,title:t,sections:l}){let[d,i]=(0,a.useState)(0);return e?r.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:(0,r.jsxs)("div",{className:"flex items-center justify-center min-h-screen px-4 pt-4 pb-20 text-center sm:block sm:p-0",children:[r.jsx("div",{className:"fixed inset-0 transition-opacity bg-gray-500 bg-opacity-75",onClick:s}),(0,r.jsxs)("div",{className:"inline-block align-bottom bg-white dark:bg-gray-800 rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-4xl sm:w-full",children:[r.jsx("div",{className:"bg-gradient-to-r from-blue-600 to-blue-700 px-6 py-4",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"w-10 h-10 bg-white/20 rounded-lg flex items-center justify-center text-2xl",children:"\uD83D\uDCDA"}),r.jsx("h3",{className:"text-xl font-bold text-white",children:t})]}),r.jsx("button",{onClick:s,className:"text-white hover:text-gray-200 transition-colors",children:r.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})}),l.length>1&&r.jsx("div",{className:"border-b border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-900",children:r.jsx("nav",{className:"flex -mb-px overflow-x-auto",children:l.map((e,s)=>r.jsx("button",{onClick:()=>i(s),className:`px-6 py-3 text-sm font-medium whitespace-nowrap border-b-2 transition-colors ${d===s?"border-blue-600 text-blue-600 dark:text-blue-400":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300 dark:text-gray-400 dark:hover:text-gray-300"}`,children:e.title},s))})}),r.jsx("div",{className:"px-6 py-6 max-h-[70vh] overflow-y-auto",children:r.jsx("div",{className:"prose dark:prose-invert max-w-none",children:"string"==typeof l[d].content?r.jsx("div",{dangerouslySetInnerHTML:{__html:l[d].content}}):l[d].content})}),(0,r.jsxs)("div",{className:"bg-gray-50 dark:bg-gray-900 px-6 py-4 flex justify-between items-center",children:[r.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:"\uD83D\uDCA1 추가 도움이 필요하시면 시스템 관리자에게 문의하세요."}),r.jsx("button",{onClick:s,className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors",children:"닫기"})]})]})]})}):null}},99837:(e,s,t)=>{"use strict";t.d(s,{Z:()=>d});var r=t(10326);t(17577);let a={primary:"bg-black text-white hover:bg-black/90 dark:bg-white dark:text-black dark:hover:bg-white/90",secondary:"border border-gray-300 text-gray-900 hover:bg-gray-50 dark:border-white/20 dark:text-white dark:hover:bg-white/10",ghost:"text-gray-700 hover:bg-gray-100 dark:text-gray-200 dark:hover:bg-white/10"},l={sm:"h-8 px-3 text-sm",md:"h-10 px-4 text-sm",lg:"h-11 px-5 text-base"};function d({variant:e="primary",size:s="md",className:t="",...d}){return r.jsx("button",{className:`inline-flex items-center justify-center rounded-md font-medium transition-colors focus:outline-none focus:ring-2 focus:ring-offset-2 disabled:opacity-50 disabled:pointer-events-none ${a[e]} ${l[s]} ${t}`,...d})}},89175:(e,s,t)=>{"use strict";t.d(s,{Z:()=>a});var r=t(10326);function a({className:e="",...s}){return r.jsx("input",{className:`rounded-md border bg-transparent px-3 py-2 text-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:border-white/20 ${e}`,...s})}t(17577)},2102:(e,s,t)=>{"use strict";t.d(s,{Z:()=>a});var r=t(10326);function a({className:e="",children:s,...t}){return r.jsx("select",{className:`w-full rounded-md border bg-transparent px-3 py-2 text-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:border-white/20 ${e}`,...t,children:s})}t(17577)},94585:(e,s,t)=>{"use strict";t.d(s,{Td:()=>c,Th:()=>n,Tr:()=>i,hr:()=>l,iA:()=>a,p3:()=>d});var r=t(10326);function a({className:e="",...s}){return r.jsx("table",{className:`w-full text-sm border-collapse ${e}`,...s})}function l(e){return r.jsx("thead",{...e})}function d(e){return r.jsx("tbody",{...e})}function i(e){return r.jsx("tr",{className:"border-b last:border-0 border-gray-200 dark:border-white/10",...e})}function n({className:e="",...s}){return r.jsx("th",{className:`text-left py-2 px-3 font-medium text-gray-600 dark:text-gray-300 ${e}`,...s})}function c({className:e="",...s}){return r.jsx("td",{className:`py-2 px-3 ${e}`,...s})}t(17577)},93746:(e,s,t)=>{"use strict";t.d(s,{n:()=>d});var r=t(17577),a=t(33326),l=t(77109);function d(){let[e,s]=(0,r.useState)([]),{selectedOrg:t}=(0,a.o)(),{data:d}=(0,l.useSession)(),i=d?.user?.role,n=d?.user?.customerId,c="CUSTOMER_ADMIN"===i||"CUSTOMER_USER"===i;return{list:e,refetch:(0,r.useCallback)(()=>{if(c&&n){fetch(`/api/customers/${n}`).then(e=>e.json()).then(e=>{let t=e.customer||e.data;s(t?[t]:[])}).catch(e=>{s([])});return}if(!t?.id){s([]);return}let e=new URLSearchParams;e.append("organizationId",t.id),e.append("tab","all"),fetch(`/api/customers?${e.toString()}`).then(e=>e.json()).then(e=>{s(e.customers||e.data||[])}).catch(e=>{s([])})},[t,c,n])}}},20872:(e,s,t)=>{"use strict";t.d(s,{F:()=>d,r:()=>i});var r=t(17577),a=t(33326),l=t(77109);function d(){let[e,s]=(0,r.useState)([]);return{items:e}}function i(e={}){let{customerId:s,stack:t,stacks:d,itemKey:i,page:n=1,pageSize:c=50,sort:x,start:o,end:m}=e,[h,g]=(0,r.useState)([]),[u,b]=(0,r.useState)(0),{selectedOrg:p}=(0,a.o)(),{data:j}=(0,l.useSession)(),y=j?.user?.role,N="CUSTOMER_ADMIN"===y||"CUSTOMER_USER"===y;(0,r.useEffect)(()=>{let e=!0,r=new AbortController;if(!N&&!p?.id){g([]);return}let a=new URLSearchParams;return s&&a.set("customerId",s),d&&d.length?d.forEach(e=>a.append("stack",e)):t&&a.set("stack",t),i&&a.set("itemKey",i),o&&a.set("start",o),m&&a.set("end",m),p?.id&&a.set("organizationId",p.id),fetch(`/api/measurements?${a.toString()}`,{signal:r.signal}).then(e=>e.json()).then(s=>{e&&g(Array.isArray(s.measurements)?s.measurements:Array.isArray(s.data)?s.data:[])}).catch(s=>{s.name,e&&g([])}),()=>{e=!1,r.abort()}},[s,t,(d||[]).join("|"),i,o,m,u,p,N]);let f=(0,r.useMemo)(()=>{if(!x)return h;let{key:e,dir:s}=x,t=[...h];return t.sort((t,r)=>{let a=t[e],l=r[e];return a<l?"asc"===s?-1:1:a>l?"asc"===s?1:-1:0}),t},[h,x]),k=f.length,v=(n-1)*c;return{data:c>=999999?f:f.slice(v,v+c),total:k,page:n,pageSize:c,mutate:()=>b(e=>e+1)}}},91245:(e,s,t)=>{"use strict";t.d(s,{D:()=>l});var r=t(17577),a=t(33326);function l(e){let[s,t]=(0,r.useState)([]),{selectedOrg:l}=(0,a.o)();return{list:s}}},25609:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>r});let r=(0,t(68570).createProxy)(String.raw`C:\Users\User\boaz\frontend\src\app\measure\input\page.tsx#default`)},73881:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>a});var r=t(66621);let a=e=>[{type:"image/x-icon",sizes:"16x16",url:(0,r.fillMetadataSegment)(".",e.params,"favicon.ico")+""}]}};var s=require("../../../webpack-runtime.js");s.C(e);var t=e=>s(s.s=e),r=s.X(0,[8948,9975,6621,5736],()=>t(88729));module.exports=r})();