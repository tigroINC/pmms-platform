(()=>{var e={};e.id=4027,e.ids=[4027],e.modules={72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},55315:e=>{"use strict";e.exports=require("path")},17360:e=>{"use strict";e.exports=require("url")},38367:(e,s,a)=>{"use strict";a.r(s),a.d(s,{GlobalError:()=>i.a,__next_app__:()=>m,originalPathname:()=>x,pages:()=>o,routeModule:()=>u,tree:()=>c}),a(25718),a(92553),a(35866);var t=a(23191),r=a(88716),n=a(37922),i=a.n(n),l=a(95231),d={};for(let e in l)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(d[e]=()=>l[e]);a.d(s,d);let c=["",{children:["measure",{children:["history",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(a.bind(a,25718)),"C:\\Users\\User\\boaz\\frontend\\src\\app\\measure\\history\\page.tsx"]}]},{}]},{metadata:{icon:[async e=>(await Promise.resolve().then(a.bind(a,73881))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(a.bind(a,92553)),"C:\\Users\\User\\boaz\\frontend\\src\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(a.t.bind(a,35866,23)),"next/dist/client/components/not-found-error"],metadata:{icon:[async e=>(await Promise.resolve().then(a.bind(a,73881))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}],o=["C:\\Users\\User\\boaz\\frontend\\src\\app\\measure\\history\\page.tsx"],x="/measure/history/page",m={require:a,loadChunk:()=>Promise.resolve()},u=new t.AppPageRouteModule({definition:{kind:r.x.APP_PAGE,page:"/measure/history/page",pathname:"/measure/history",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},99718:(e,s,a)=>{Promise.resolve().then(a.bind(a,45074))},45074:(e,s,a)=>{"use strict";a.r(s),a.d(s,{default:()=>g});var t=a(10326),r=a(17577),n=a(99837),i=a(89175),l=a(2102),d=a(94585),c=a(20872),o=a(93746),x=a(91245),m=a(33326);function u({isOpen:e,onClose:s,onSuccess:a,measurement:n}){let[l,d]=(0,r.useState)({value:"",measuredAt:"",note:"",editReason:""}),[c,o]=(0,r.useState)(!1),[x,m]=(0,r.useState)(""),u=async e=>{if(e.preventDefault(),m(""),!l.value){m("측정값은 필수입니다.");return}if(!l.editReason){m("수정 사유를 입력해주세요.");return}o(!0);try{let e=await fetch(`/api/measurements/${n.id}`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({value:parseFloat(l.value),measuredAt:l.measuredAt,note:l.note,editReason:l.editReason,editedBy:"admin"})});if(!e.ok){let s=await e.json();throw Error(s.error||"수정 실패")}a(),s()}catch(e){m(e.message)}finally{o(!1)}};return e&&n?t.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50",onClick:s,children:(0,t.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl w-full max-w-lg",onClick:e=>e.stopPropagation(),children:[(0,t.jsxs)("div",{className:"sticky top-0 bg-white dark:bg-gray-800 border-b px-6 py-4 flex items-center justify-between",children:[t.jsx("h2",{className:"text-xl font-semibold",children:"측정 기록 수정"}),t.jsx("button",{onClick:s,className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300",children:"✕"})]}),(0,t.jsxs)("form",{onSubmit:u,className:"p-6 space-y-4",children:[x&&t.jsx("div",{className:"bg-red-50 dark:bg-red-900/20 text-red-600 dark:text-red-400 px-4 py-3 rounded",children:x}),(0,t.jsxs)("div",{className:"bg-gray-50 dark:bg-gray-900/50 p-4 rounded space-y-2 text-sm",children:[(0,t.jsxs)("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"고객사:"}),t.jsx("span",{className:"font-medium",children:n.customer?.name})]}),(0,t.jsxs)("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"굴뚝:"}),t.jsx("span",{className:"font-medium",children:n.stack?.name})]}),(0,t.jsxs)("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"측정항목:"}),t.jsx("span",{className:"font-medium",children:n.item?.name})]}),(0,t.jsxs)("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"원본 측정값:"}),(0,t.jsxs)("span",{className:"font-medium text-blue-600",children:[n.value," ",n.item?.unit]})]})]}),(0,t.jsxs)("div",{className:"space-y-1",children:[(0,t.jsxs)("label",{className:"text-sm font-medium",children:["측정값 ",t.jsx("span",{className:"text-red-500",children:"*"})]}),t.jsx(i.Z,{type:"number",step:"0.01",value:l.value,onChange:e=>d(s=>({...s,value:e.target.value})),placeholder:"측정값 입력",required:!0})]}),(0,t.jsxs)("div",{className:"space-y-1",children:[(0,t.jsxs)("label",{className:"text-sm font-medium",children:["측정 일시 ",t.jsx("span",{className:"text-red-500",children:"*"})]}),t.jsx(i.Z,{type:"datetime-local",value:l.measuredAt,onChange:e=>d(s=>({...s,measuredAt:e.target.value})),required:!0})]}),(0,t.jsxs)("div",{className:"space-y-1",children:[t.jsx("label",{className:"text-sm font-medium",children:"비고"}),t.jsx(i.Z,{value:l.note,onChange:e=>d(s=>({...s,note:e.target.value})),placeholder:"비고 입력"})]}),(0,t.jsxs)("div",{className:"space-y-1",children:[(0,t.jsxs)("label",{className:"text-sm font-medium",children:["수정 사유 ",t.jsx("span",{className:"text-red-500",children:"*"})]}),t.jsx(i.Z,{value:l.editReason,onChange:e=>d(s=>({...s,editReason:e.target.value})),placeholder:"예: 측정값 오입력 정정",required:!0}),t.jsx("p",{className:"text-xs text-gray-500",children:"수정 사유는 이력 추적을 위해 필수로 입력해야 합니다."})]}),(0,t.jsxs)("div",{className:"flex gap-3 pt-4",children:[t.jsx("button",{type:"button",onClick:s,className:"flex-1 px-4 py-2 bg-gray-200 dark:bg-gray-700 text-gray-900 dark:text-gray-100 rounded hover:bg-gray-300 dark:hover:bg-gray-600 transition-colors",children:"취소"}),t.jsx("button",{type:"submit",disabled:c,className:"flex-1 px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:c?"수정 중...":"수정"})]})]})]})}):null}var h=a(77109);function g(){let{selectedOrg:e,loading:s}=(0,m.o)(),{list:a}=(0,o.n)(),{items:g}=(0,c.F)(),{data:p}=(0,h.useSession)(),y=p?.user?.role,j="CUSTOMER_ADMIN"===y||"CUSTOMER_USER"===y,b=()=>{let e=new Date,s=new Date;return s.setMonth(e.getMonth()-6),{start:s.toISOString().split("T")[0],end:e.toISOString().split("T")[0]}},v=(0,r.useMemo)(()=>b(),[]),[f,N]=(0,r.useState)(""),[k,w]=(0,r.useState)("전체"),[C,S]=(0,r.useState)("전체"),[D,T]=(0,r.useState)("전체"),[A,M]=(0,r.useState)(v.start),[E,P]=(0,r.useState)(v.end),[$,R]=(0,r.useState)(1),[_,U]=(0,r.useState)(50),[Z,z]=(0,r.useState)("measuredAt"),[I,O]=(0,r.useState)("desc"),[L,F]=(0,r.useState)(!1),[q,H]=(0,r.useState)(null),[W,V]=(0,r.useState)(!1),[G,K]=(0,r.useState)([]),[B,J]=(0,r.useState)("전체"),X=(0,r.useMemo)(()=>"전체"===k?void 0:a.find(e=>e.name===k)?.id,[k,a]),{list:Y}=(0,x.D)(X),Q=(0,r.useMemo)(()=>"전체"===C?void 0:C,[C]),ee=(0,r.useMemo)(()=>"전체"===D?void 0:g.find(e=>e.name===D)?.key||D,[D,g]),{data:es,mutate:ea}=(0,c.r)({customerId:X,stack:Q,itemKey:ee,start:A||void 0,end:E||void 0,sort:{key:"measuredAt",dir:"asc"},page:1,pageSize:999999}),et=(0,r.useMemo)(()=>{if(!Array.isArray(es))return[];let e=new Map;return es.forEach(s=>{let a=s.measuredAt?new Date(s.measuredAt):null,t=a?Math.floor(a.getTime()/6e4):s.measuredAt,r=s.stack?.id||s.stackId||s.stack?.name||"",n=`${r}|${t}`;(s.weather||null!==s.temperatureC||null!==s.humidityPct)&&!e.has(n)&&e.set(n,{weather:s.weather,temperatureC:s.temperatureC,humidityPct:s.humidityPct,pressureMmHg:s.pressureMmHg,windDirection:s.windDirection,windSpeedMs:s.windSpeedMs,gasVelocityMs:s.gasVelocityMs,gasTempC:s.gasTempC,moisturePct:s.moisturePct,oxygenMeasuredPct:s.oxygenMeasuredPct,oxygenStdPct:s.oxygenStdPct,flowSm3Min:s.flowSm3Min})}),es.map(s=>{let a=s.measuredAt?new Date(s.measuredAt):null,t=a?Math.floor(a.getTime()/6e4):s.measuredAt,r=s.stack?.id||s.stackId||s.stack?.name||"",n=`${r}|${t}`,i=s.item?.name||s.itemName||s.itemKey,l=s.item?.limit,d=e.get(n)||{},c=e=>{let a=s[e];if(null!=a)return a;let t=d[e];return null!=t?t:""};return{id:s.id,customerId:s.customerId,stackId:s.stackId,itemKey:s.itemKey,isActive:s.isActive,originalData:s,measuredAt:a?`${a.getFullYear()}-${String(a.getMonth()+1).padStart(2,"0")}-${String(a.getDate()).padStart(2,"0")} ${String(a.getHours()).padStart(2,"0")}:${String(a.getMinutes()).padStart(2,"0")}`:"",customer:s.customer?.name??"",stack:s.stack?.name??s.stack??"",weather:c("weather"),temp:c("temperatureC"),humidity:c("humidityPct"),pressure:c("pressureMmHg"),windDir:c("windDirection"),windSpeed:c("windSpeedMs"),gasVel:c("gasVelocityMs"),gasTemp:c("gasTempC"),moisture:c("moisturePct"),o2Measured:c("oxygenMeasuredPct"),o2Standard:c("oxygenStdPct"),flowRate:c("flowSm3Min"),pollutant:i,value:s.value,limit:l,limitCheck:l&&s.value>l?"초과":"적합",company:s.customer?.organizations?.[0]?.organization?.name||s.organization?.name||s.company||""}})},[es]),er=(0,r.useMemo)(()=>et.filter(e=>{if(!(W||!1!==e.isActive))return!1;if(j&&"전체"!==B){let s=G.find(e=>e.id===B)?.name;if(s&&e.company!==s)return!1}if("전체"!==k&&e.customer!==k||"전체"!==C&&e.stack!==C||"전체"!==D&&e.pollutant!==D||A&&e.measuredAt<A||E&&e.measuredAt>E)return!1;if(f){let s=f.toLowerCase();return e.customer?.toLowerCase().includes(s)||e.stack?.toLowerCase().includes(s)||e.pollutant?.toLowerCase().includes(s)}return!0}),[et,f,k,C,D,A,E,W,j,B,G]),en=(0,r.useMemo)(()=>(function(e,s,a="asc"){let t=[...e];return t.sort((e,t)=>{var r,n;let i=(r=e[s])===(n=t[s])?0:r<n?-1:1;return"asc"===a?i:-i}),t})(er,Z,I),[er,Z,I]),ei=en.length,el=Math.ceil(ei/_),ed=Math.min($,el||1),ec=en.slice((ed-1)*_,ed*_),eo=e=>{H(e.originalData||e),F(!0)},ex=async e=>{try{let s=await fetch(`/api/measurements/${e.id}`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({isActive:!e.isActive})});if(!s.ok){let e=await s.json();throw Error(e.error||"상태 변경 실패")}ea()}catch(e){alert(e.message||"상태 변경 중 오류가 발생했습니다.")}},em=async e=>{if(confirm("정말 삭제하시겠습니까?"))try{let s=await fetch(`/api/measurements/${e.id}`,{method:"DELETE"});if(s.ok)alert("삭제되었습니다."),ea();else{let e=await s.json();alert(e.error||"삭제 실패")}}catch(e){alert("오류 발생")}};return s?t.jsx("div",{className:"flex items-center justify-center h-screen",children:t.jsx("div",{className:"text-lg",children:"로딩 중..."})}):j||e?(0,t.jsxs)("section",{className:"space-y-3",children:[t.jsx("div",{className:"rounded-lg border bg-white/50 dark:bg-white/5 p-2.5",children:(0,t.jsxs)("div",{className:"flex flex-wrap items-end gap-2",children:[t.jsx("h1",{className:"text-lg font-semibold whitespace-nowrap mb-1.5",children:"측정 이력"}),t.jsx("span",{className:"text-gray-300 dark:text-gray-600 mb-1.5",children:"|"}),j&&(0,t.jsxs)("div",{className:"flex flex-col",style:{width:"176px",minWidth:"176px"},children:[t.jsx("label",{className:"text-xs text-gray-600 dark:text-gray-400 mb-0.5",children:"환경측정기업"}),(0,t.jsxs)(l.Z,{className:"text-sm h-8 w-full",value:B,onChange:e=>{J(e.target.value),R(1)},children:[t.jsx("option",{value:"전체",children:"통합 데이터 (전체)"}),G.map(e=>t.jsx("option",{value:e.id,children:e.nickname||e.name},e.id))]})]}),!j&&(0,t.jsxs)("div",{className:"flex flex-col",children:[t.jsx("label",{className:"text-xs text-gray-600 dark:text-gray-400 mb-0.5",children:"검색"}),t.jsx(i.Z,{className:"text-sm h-8",style:{width:"176px",minWidth:"176px"},value:f,onChange:e=>{N(e.target.value),R(1)},placeholder:"굴뚝/오염물질"})]}),!j&&(0,t.jsxs)("div",{className:"flex flex-col",style:{width:"176px",minWidth:"176px"},children:[t.jsx("label",{className:"text-xs text-gray-600 dark:text-gray-400 mb-0.5",children:"고객사"}),t.jsx(l.Z,{className:"text-sm h-8 w-full",value:k,onChange:e=>{w(e.target.value),S("전체"),R(1)},children:["전체",...a.map(e=>e.name)].map(e=>t.jsx("option",{children:e},e))})]}),(0,t.jsxs)("div",{className:"flex flex-col",style:{width:"176px",minWidth:"176px"},children:[t.jsx("label",{className:"text-xs text-gray-600 dark:text-gray-400 mb-0.5",children:"굴뚝명"}),t.jsx(l.Z,{className:"text-sm h-8 w-full",value:C,onChange:e=>{S(e.target.value),R(1)},children:["전체",...X?Y.map(e=>e.name):Array.from(new Set(et.map(e=>e.stack)))].map(e=>t.jsx("option",{children:e},e))})]}),(0,t.jsxs)("div",{className:"flex flex-col",style:{width:"176px",minWidth:"176px"},children:[t.jsx("label",{className:"text-xs text-gray-600 dark:text-gray-400 mb-0.5",children:"오염물질"}),t.jsx(l.Z,{className:"text-sm h-8 w-full",value:D,onChange:e=>{T(e.target.value),R(1)},children:["전체",...g.map(e=>e.name)].map(e=>t.jsx("option",{children:e},e))})]}),(0,t.jsxs)("div",{className:"flex flex-col",children:[t.jsx("label",{className:"text-xs text-gray-600 dark:text-gray-400 mb-0.5",children:"시작일"}),t.jsx(i.Z,{className:"text-sm h-8",style:{width:"144px",minWidth:"144px"},type:"date",value:A,onChange:e=>{M(e.target.value),R(1)}})]}),t.jsx("span",{className:"text-xs text-gray-500 mb-1.5",children:"~"}),(0,t.jsxs)("div",{className:"flex flex-col",children:[t.jsx("label",{className:"text-xs text-gray-600 dark:text-gray-400 mb-0.5",children:"종료일"}),t.jsx(i.Z,{className:"text-sm h-8",style:{width:"144px",minWidth:"144px"},type:"date",value:E,onChange:e=>{P(e.target.value),R(1)}})]}),(0,t.jsxs)("div",{className:"flex flex-col",style:{width:"158px",minWidth:"158px"},children:[t.jsx("label",{className:"text-xs text-gray-600 dark:text-gray-400 mb-0.5",children:"한페이지당"}),(0,t.jsxs)(l.Z,{className:"text-sm h-8 w-full",value:String(_),onChange:e=>{let s=e.target.value;U("ALL"===s?999999:Number(s)),R(1)},children:[t.jsx("option",{value:"50",children:"50"}),t.jsx("option",{value:"100",children:"100"}),t.jsx("option",{value:"200",children:"200"}),t.jsx("option",{value:"ALL",children:"전체"})]})]}),(0,t.jsxs)("label",{className:"flex items-center gap-1.5 text-xs cursor-pointer mb-1.5 whitespace-nowrap ml-auto",children:[t.jsx("input",{type:"checkbox",checked:W,onChange:e=>V(e.target.checked),className:"rounded"}),"비활성 표시"]}),(0,t.jsxs)("div",{className:"flex gap-1.5 mb-1.5",children:[t.jsx(n.Z,{size:"sm",variant:"secondary",onClick:()=>{N(""),w("전체"),S("전체"),T("전체"),M(v.start),P(v.end),R(1)},children:"초기화"}),t.jsx(n.Z,{size:"sm",onClick:()=>{let e=new Blob(["\uFEFF"+[["측정일자","고객사","배출구명","기상","기온℃","습도％","기압mmHg","풍향","풍속m/sec","가스속도m/s","가스온도℃","수분함량％","실측산소농도％","표준산소농도％","배출가스유량S㎥/min","오염물질","농도","배출허용기준농도","배출허용기준체크","측정업체"],...en.map(e=>[e.measuredAt,e.customer,e.stack,e.weather,e.temp,e.humidity,e.pressure,e.windDir,e.windSpeed,e.gasVel,e.gasTemp,e.moisture,e.o2Measured,e.o2Standard,e.flowRate,e.pollutant,e.value,e.limit??"",e.limitCheck,e.company])].map(e=>e.map(e=>`"${String(e??"").replace(/"/g,'""')}"`).join(",")).join("\n")],{type:"text/csv;charset=utf-8;"}),s=URL.createObjectURL(e),a=document.createElement("a");a.href=s,a.download=`측정이력_${new Date().toISOString().slice(0,10)}.csv`,document.body.appendChild(a),a.click(),document.body.removeChild(a),URL.revokeObjectURL(s)},children:"Excel"})]})]})}),(0,t.jsxs)("div",{className:"hidden md:block rounded-lg border overflow-x-auto max-h-[calc(100vh-180px)] overflow-y-auto",children:[0===ec.length?t.jsx("div",{className:"p-6 text-sm text-gray-500",children:"조건에 맞는 데이터가 없습니다."}):(0,t.jsxs)(d.iA,{className:"min-w-[1200px]",children:[t.jsx(d.hr,{className:"bg-gray-50 dark:bg-white/10 sticky top-0 z-10",children:(0,t.jsxs)(d.Tr,{children:[t.jsx(d.Th,{className:"bg-gray-50 dark:bg-gray-800",children:"상태"}),(0,t.jsxs)(d.Th,{onClick:()=>{z("measuredAt"),O(e=>"measuredAt"===Z?"asc"===e?"desc":"asc":"desc")},className:"cursor-pointer bg-gray-50 dark:bg-gray-800",children:["측정일자 ","measuredAt"===Z?"asc"===I?"▲":"▼":""]}),!j&&t.jsx(d.Th,{className:"bg-gray-50 dark:bg-gray-800",children:"고객사"}),t.jsx(d.Th,{className:"bg-gray-50 dark:bg-gray-800",children:"배출구명"}),t.jsx(d.Th,{className:"bg-gray-50 dark:bg-gray-800",children:"기상"}),t.jsx(d.Th,{className:"bg-gray-50 dark:bg-gray-800",children:"기온℃"}),t.jsx(d.Th,{className:"bg-gray-50 dark:bg-gray-800",children:"습도％"}),t.jsx(d.Th,{className:"bg-gray-50 dark:bg-gray-800",children:"기압mmHg"}),t.jsx(d.Th,{className:"bg-gray-50 dark:bg-gray-800",children:"풍향"}),t.jsx(d.Th,{className:"bg-gray-50 dark:bg-gray-800",children:"풍속m／sec"}),t.jsx(d.Th,{className:"bg-gray-50 dark:bg-gray-800",children:"가스속도m／s"}),t.jsx(d.Th,{className:"bg-gray-50 dark:bg-gray-800",children:"가스온도℃"}),t.jsx(d.Th,{className:"bg-gray-50 dark:bg-gray-800",children:"수분함량％"}),t.jsx(d.Th,{className:"bg-gray-50 dark:bg-gray-800",children:"실측산소농도％"}),t.jsx(d.Th,{className:"bg-gray-50 dark:bg-gray-800",children:"표준산소농도％"}),t.jsx(d.Th,{className:"bg-gray-50 dark:bg-gray-800",children:"배출가스유량S㎥／min"}),t.jsx(d.Th,{className:"bg-gray-50 dark:bg-gray-800",children:"오염물질"}),(0,t.jsxs)(d.Th,{onClick:()=>{z("value"),O(e=>"value"===Z?"asc"===e?"desc":"asc":"desc")},className:"cursor-pointer bg-gray-50 dark:bg-gray-800",children:["농도 ","value"===Z?"asc"===I?"▲":"▼":""]}),t.jsx(d.Th,{className:"bg-gray-50 dark:bg-gray-800",children:"배출허용기준농도"}),t.jsx(d.Th,{className:"bg-gray-50 dark:bg-gray-800",children:"배출허용기준체크"}),t.jsx(d.Th,{className:"bg-gray-50 dark:bg-gray-800",children:"측정업체"}),!j&&t.jsx(d.Th,{className:"bg-gray-50 dark:bg-gray-800",children:"액션"})]})}),t.jsx(d.p3,{children:ec.map((e,s)=>{let a=!1!==e.isActive;return(0,t.jsxs)(d.Tr,{className:a?"":"opacity-50 bg-gray-50 dark:bg-gray-900/20",children:[t.jsx(d.Td,{children:a?t.jsx("span",{className:"inline-block px-2 py-0.5 rounded bg-green-100 text-green-700 dark:bg-green-900/30 dark:text-green-300 text-xs",children:"활성"}):t.jsx("span",{className:"inline-block px-2 py-0.5 rounded bg-gray-100 text-gray-600 dark:bg-gray-700 dark:text-gray-400 text-xs",children:"비활성"})}),t.jsx(d.Td,{className:"whitespace-nowrap",children:e.measuredAt}),!j&&t.jsx(d.Td,{children:e.customer}),t.jsx(d.Td,{children:e.stack}),t.jsx(d.Td,{children:e.weather}),t.jsx(d.Td,{children:e.temp}),t.jsx(d.Td,{children:e.humidity}),t.jsx(d.Td,{children:e.pressure}),t.jsx(d.Td,{children:e.windDir}),t.jsx(d.Td,{children:e.windSpeed}),t.jsx(d.Td,{children:e.gasVel}),t.jsx(d.Td,{children:e.gasTemp}),t.jsx(d.Td,{children:e.moisture}),t.jsx(d.Td,{children:e.o2Measured}),t.jsx(d.Td,{children:e.o2Standard}),t.jsx(d.Td,{children:e.flowRate}),t.jsx(d.Td,{children:e.pollutant}),t.jsx(d.Td,{children:e.value}),t.jsx(d.Td,{children:e.limit??""}),t.jsx(d.Td,{children:e.limitCheck}),t.jsx(d.Td,{children:e.company}),!j&&t.jsx(d.Td,{children:(0,t.jsxs)("div",{className:"flex gap-2 whitespace-nowrap",children:[t.jsx("button",{onClick:()=>eo(e),className:"text-xs text-green-600 hover:underline",children:"수정"}),t.jsx("button",{onClick:()=>ex(e),className:"text-xs text-blue-600 hover:underline",children:a?"비활성화":"활성화"}),!a&&t.jsx("button",{onClick:()=>em(e),className:"text-xs text-red-600 hover:underline",children:"삭제"})]})})]},`${e.stack}_${e.measuredAt}_${s}`)})})]}),(0,t.jsxs)("div",{className:"p-3 flex items-center justify-between text-xs text-gray-500",children:[(0,t.jsxs)("div",{children:["총 ",ei,"건 \xb7 ",ed,"/",el," 페이지"]}),(0,t.jsxs)("div",{className:"flex gap-2 items-center",children:[t.jsx(n.Z,{variant:"secondary",size:"sm",onClick:()=>R(e=>Math.max(1,e-1)),disabled:1===ed,children:"이전"}),t.jsx(n.Z,{variant:"secondary",size:"sm",onClick:()=>R(e=>Math.min(el,e+1)),disabled:ed===el,children:"다음"})]})]})]}),t.jsx("div",{className:"md:hidden space-y-3",children:0===ec.length?t.jsx("div",{className:"rounded-lg border bg-white/50 dark:bg-white/5 p-6 text-center text-gray-500",children:"조건에 맞는 데이터가 없습니다."}):(0,t.jsxs)(t.Fragment,{children:[ec.map((e,s)=>{let a=!1!==e.isActive;return(0,t.jsxs)("div",{className:`rounded-lg border bg-white/50 dark:bg-white/5 p-4 space-y-2 ${a?"":"opacity-50"}`,children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[t.jsx("span",{className:`inline-block px-2 py-0.5 rounded text-xs ${a?"bg-green-100 text-green-700 dark:bg-green-900/30 dark:text-green-300":"bg-gray-100 text-gray-600 dark:bg-gray-700 dark:text-gray-400"}`,children:a?"활성":"비활성"}),!j&&(0,t.jsxs)("div",{className:"flex gap-2",children:[t.jsx("button",{onClick:()=>eo(e),className:"text-xs text-green-600 hover:underline",children:"수정"}),t.jsx("button",{onClick:()=>ex(e),className:"text-xs text-blue-600 hover:underline",children:a?"비활성화":"활성화"}),!a&&t.jsx("button",{onClick:()=>em(e),className:"text-xs text-red-600 hover:underline",children:"삭제"})]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-2 text-sm",children:[(0,t.jsxs)("div",{className:"col-span-2",children:[t.jsx("span",{className:"text-gray-500",children:"\uD83D\uDCC5 측정일:"})," ",e.measuredAt]}),!j&&(0,t.jsxs)("div",{children:[t.jsx("span",{className:"text-gray-500",children:"\uD83D\uDCCD 고객사:"})," ",e.customer]}),(0,t.jsxs)("div",{children:[t.jsx("span",{className:"text-gray-500",children:"\uD83C\uDFED 굴뚝:"})," ",e.stack]}),(0,t.jsxs)("div",{children:[t.jsx("span",{className:"text-gray-500",children:"\uD83E\uDDEA 오염물질:"})," ",e.pollutant]}),(0,t.jsxs)("div",{children:[t.jsx("span",{className:"text-gray-500",children:"\uD83D\uDCCA 농도:"})," ",e.value]}),(0,t.jsxs)("div",{children:[t.jsx("span",{className:"text-gray-500",children:"⚠️ 기준:"})," ",e.limit??"-"]}),(0,t.jsxs)("div",{children:[t.jsx("span",{className:"text-gray-500",children:"✅ 체크:"})," ",e.limitCheck]}),(0,t.jsxs)("div",{children:[t.jsx("span",{className:"text-gray-500",children:"\uD83C\uDF24️ 기상:"})," ",e.weather||"-"]}),(0,t.jsxs)("div",{children:[t.jsx("span",{className:"text-gray-500",children:"\uD83C\uDF21️ 기온:"})," ",e.temp||"-","℃"]}),(0,t.jsxs)("div",{children:[t.jsx("span",{className:"text-gray-500",children:"\uD83D\uDCA7 습도:"})," ",e.humidity||"-","%"]}),(0,t.jsxs)("div",{children:[t.jsx("span",{className:"text-gray-500",children:"\uD83C\uDF9A️ 기압:"})," ",e.pressure||"-","mmHg"]}),(0,t.jsxs)("div",{children:[t.jsx("span",{className:"text-gray-500",children:"\uD83E\uDDED 풍향:"})," ",e.windDir||"-"]}),(0,t.jsxs)("div",{children:[t.jsx("span",{className:"text-gray-500",children:"\uD83D\uDCA8 풍속:"})," ",e.windSpeed||"-","m/s"]}),(0,t.jsxs)("div",{children:[t.jsx("span",{className:"text-gray-500",children:"\uD83D\uDD25 가스온도:"})," ",e.gasTemp||"-","℃"]}),(0,t.jsxs)("div",{children:[t.jsx("span",{className:"text-gray-500",children:"\uD83D\uDCA8 가스속도:"})," ",e.gasVel||"-","m/s"]}),(0,t.jsxs)("div",{children:[t.jsx("span",{className:"text-gray-500",children:"\uD83D\uDCA7 수분:"})," ",e.moisture||"-","%"]}),(0,t.jsxs)("div",{children:[t.jsx("span",{className:"text-gray-500",children:"\uD83E\uDEE7 실측O₂:"})," ",e.o2Measured||"-","%"]}),(0,t.jsxs)("div",{children:[t.jsx("span",{className:"text-gray-500",children:"\uD83E\uDEE7 표준O₂:"})," ",e.o2Standard||"-","%"]}),(0,t.jsxs)("div",{children:[t.jsx("span",{className:"text-gray-500",children:"\uD83C\uDF0A 유량:"})," ",e.flowRate||"-","S㎥/min"]}),(0,t.jsxs)("div",{children:[t.jsx("span",{className:"text-gray-500",children:"\uD83C\uDFE2 업체:"})," ",e.company]})]})]},`${e.stack}_${e.measuredAt}_${s}`)}),(0,t.jsxs)("div",{className:"rounded-lg border bg-white/50 dark:bg-white/5 p-3 flex items-center justify-between text-xs text-gray-500",children:[(0,t.jsxs)("div",{children:["총 ",ei,"건 \xb7 ",ed,"/",el," 페이지"]}),(0,t.jsxs)("div",{className:"flex gap-2 items-center",children:[t.jsx(n.Z,{variant:"secondary",size:"sm",onClick:()=>R(e=>Math.max(1,e-1)),disabled:1===ed,children:"이전"}),t.jsx(n.Z,{variant:"secondary",size:"sm",onClick:()=>R(e=>Math.min(el,e+1)),disabled:ed===el,children:"다음"})]})]})]})}),t.jsx(u,{isOpen:L,onClose:()=>{F(!1),H(null),ea()},measurement:q,onSuccess:ea})]}):t.jsx("div",{className:"flex items-center justify-center h-screen",children:t.jsx("div",{className:"text-lg text-red-600",children:"조직 정보를 불러올 수 없습니다."})})}},99837:(e,s,a)=>{"use strict";a.d(s,{Z:()=>i});var t=a(10326);a(17577);let r={primary:"bg-black text-white hover:bg-black/90 dark:bg-white dark:text-black dark:hover:bg-white/90",secondary:"border border-gray-300 text-gray-900 hover:bg-gray-50 dark:border-white/20 dark:text-white dark:hover:bg-white/10",ghost:"text-gray-700 hover:bg-gray-100 dark:text-gray-200 dark:hover:bg-white/10"},n={sm:"h-8 px-3 text-sm",md:"h-10 px-4 text-sm",lg:"h-11 px-5 text-base"};function i({variant:e="primary",size:s="md",className:a="",...i}){return t.jsx("button",{className:`inline-flex items-center justify-center rounded-md font-medium transition-colors focus:outline-none focus:ring-2 focus:ring-offset-2 disabled:opacity-50 disabled:pointer-events-none ${r[e]} ${n[s]} ${a}`,...i})}},89175:(e,s,a)=>{"use strict";a.d(s,{Z:()=>r});var t=a(10326);function r({className:e="",...s}){return t.jsx("input",{className:`rounded-md border bg-transparent px-3 py-2 text-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:border-white/20 ${e}`,...s})}a(17577)},2102:(e,s,a)=>{"use strict";a.d(s,{Z:()=>r});var t=a(10326);function r({className:e="",children:s,...a}){return t.jsx("select",{className:`w-full rounded-md border bg-transparent px-3 py-2 text-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:border-white/20 ${e}`,...a,children:s})}a(17577)},94585:(e,s,a)=>{"use strict";a.d(s,{Td:()=>c,Th:()=>d,Tr:()=>l,hr:()=>n,iA:()=>r,p3:()=>i});var t=a(10326);function r({className:e="",...s}){return t.jsx("table",{className:`w-full text-sm border-collapse ${e}`,...s})}function n(e){return t.jsx("thead",{...e})}function i(e){return t.jsx("tbody",{...e})}function l(e){return t.jsx("tr",{className:"border-b last:border-0 border-gray-200 dark:border-white/10",...e})}function d({className:e="",...s}){return t.jsx("th",{className:`text-left py-2 px-3 font-medium text-gray-600 dark:text-gray-300 ${e}`,...s})}function c({className:e="",...s}){return t.jsx("td",{className:`py-2 px-3 ${e}`,...s})}a(17577)},93746:(e,s,a)=>{"use strict";a.d(s,{n:()=>i});var t=a(17577),r=a(33326),n=a(77109);function i(){let[e,s]=(0,t.useState)([]),{selectedOrg:a}=(0,r.o)(),{data:i}=(0,n.useSession)(),l=i?.user?.role,d=i?.user?.customerId,c="CUSTOMER_ADMIN"===l||"CUSTOMER_USER"===l;return{list:e,refetch:(0,t.useCallback)(()=>{if(c&&d){fetch(`/api/customers/${d}`).then(e=>e.json()).then(e=>{let a=e.customer||e.data;s(a?[a]:[])}).catch(e=>{s([])});return}if(!a?.id){s([]);return}let e=new URLSearchParams;e.append("organizationId",a.id),e.append("tab","all"),fetch(`/api/customers?${e.toString()}`).then(e=>e.json()).then(e=>{s(e.customers||e.data||[])}).catch(e=>{s([])})},[a,c,d])}}},20872:(e,s,a)=>{"use strict";a.d(s,{F:()=>i,r:()=>l});var t=a(17577),r=a(33326),n=a(77109);function i(){let[e,s]=(0,t.useState)([]);return{items:e}}function l(e={}){let{customerId:s,stack:a,stacks:i,itemKey:l,page:d=1,pageSize:c=50,sort:o,start:x,end:m}=e,[u,h]=(0,t.useState)([]),[g,p]=(0,t.useState)(0),{selectedOrg:y}=(0,r.o)(),{data:j}=(0,n.useSession)(),b=j?.user?.role,v="CUSTOMER_ADMIN"===b||"CUSTOMER_USER"===b;(0,t.useEffect)(()=>{let e=!0,t=new AbortController;if(!v&&!y?.id){h([]);return}let r=new URLSearchParams;return s&&r.set("customerId",s),i&&i.length?i.forEach(e=>r.append("stack",e)):a&&r.set("stack",a),l&&r.set("itemKey",l),x&&r.set("start",x),m&&r.set("end",m),y?.id&&r.set("organizationId",y.id),fetch(`/api/measurements?${r.toString()}`,{signal:t.signal}).then(e=>e.json()).then(s=>{e&&h(Array.isArray(s.measurements)?s.measurements:Array.isArray(s.data)?s.data:[])}).catch(s=>{s.name,e&&h([])}),()=>{e=!1,t.abort()}},[s,a,(i||[]).join("|"),l,x,m,g,y,v]);let f=(0,t.useMemo)(()=>{if(!o)return u;let{key:e,dir:s}=o,a=[...u];return a.sort((a,t)=>{let r=a[e],n=t[e];return r<n?"asc"===s?-1:1:r>n?"asc"===s?1:-1:0}),a},[u,o]),N=f.length,k=(d-1)*c;return{data:c>=999999?f:f.slice(k,k+c),total:N,page:d,pageSize:c,mutate:()=>p(e=>e+1)}}},91245:(e,s,a)=>{"use strict";a.d(s,{D:()=>n});var t=a(17577),r=a(33326);function n(e){let[s,a]=(0,t.useState)([]),{selectedOrg:n}=(0,r.o)();return{list:s}}},25718:(e,s,a)=>{"use strict";a.r(s),a.d(s,{default:()=>t});let t=(0,a(68570).createProxy)(String.raw`C:\Users\User\boaz\frontend\src\app\measure\history\page.tsx#default`)},73881:(e,s,a)=>{"use strict";a.r(s),a.d(s,{default:()=>r});var t=a(66621);let r=e=>[{type:"image/x-icon",sizes:"16x16",url:(0,t.fillMetadataSegment)(".",e.params,"favicon.ico")+""}]}};var s=require("../../../webpack-runtime.js");s.C(e);var a=e=>s(s.s=e),t=s.X(0,[8948,9975,6621,5736],()=>a(38367));module.exports=t})();