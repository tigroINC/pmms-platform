(()=>{var e={};e.id=4178,e.ids=[4178],e.modules={72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},55315:e=>{"use strict";e.exports=require("path")},17360:e=>{"use strict";e.exports=require("url")},97646:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>n.a,__next_app__:()=>m,originalPathname:()=>x,pages:()=>c,routeModule:()=>p,tree:()=>o}),s(85282),s(92553),s(35866);var a=s(23191),r=s(88716),d=s(37922),n=s.n(d),l=s(95231),i={};for(let e in l)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(i[e]=()=>l[e]);s.d(t,i);let o=["",{children:["profile",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,85282)),"C:\\Users\\User\\boaz\\frontend\\src\\app\\profile\\page.tsx"]}]},{metadata:{icon:[async e=>(await Promise.resolve().then(s.bind(s,73881))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(s.bind(s,92553)),"C:\\Users\\User\\boaz\\frontend\\src\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,35866,23)),"next/dist/client/components/not-found-error"],metadata:{icon:[async e=>(await Promise.resolve().then(s.bind(s,73881))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}],c=["C:\\Users\\User\\boaz\\frontend\\src\\app\\profile\\page.tsx"],x="/profile/page",m={require:s,loadChunk:()=>Promise.resolve()},p=new a.AppPageRouteModule({definition:{kind:r.x.APP_PAGE,page:"/profile/page",pathname:"/profile",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:o}})},35998:(e,t,s)=>{Promise.resolve().then(s.bind(s,21144))},21144:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>o});var a=s(10326),r=s(17577),d=s(77109),n=s(35047),l=s(89175),i=s(99837);function o(){let{data:e,status:t}=(0,d.useSession)();(0,n.useRouter)();let[s,o]=(0,r.useState)(null),[c,x]=(0,r.useState)(!0),[m,p]=(0,r.useState)(!1),[h,g]=(0,r.useState)({name:"",phone:"",department:"",position:""}),[u,y]=(0,r.useState)(""),[b,w]=(0,r.useState)(""),[j,f]=(0,r.useState)(!1),[N,v]=(0,r.useState)({currentPassword:"",newPassword:"",confirmPassword:""}),[k,P]=(0,r.useState)(""),[C,D]=(0,r.useState)(""),S=async()=>{try{x(!0);let t=e?.user?.id,s=await fetch(`/api/users/${t}`),a=await s.json();s.ok?(o(a.user),g({name:a.user.name,phone:a.user.phone||"",department:a.user.department||"",position:a.user.position||""})):y(a.error||"프로필을 불러오는데 실패했습니다.")}catch(e){y("프로필을 불러오는데 실패했습니다.")}finally{x(!1)}},Z=e=>{let{name:t,value:s}=e.target;g(e=>({...e,[t]:s}))},_=async t=>{t.preventDefault(),y(""),w("");try{let t=e?.user?.id,s=await fetch(`/api/users/${t}`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify(h)}),a=await s.json();s.ok?(w("프로필이 수정되었습니다."),p(!1),S()):y(a.error||"프로필 수정에 실패했습니다.")}catch(e){y("프로필 수정 중 오류가 발생했습니다.")}},A=e=>({SUPER_ADMIN:"시스템 관리자 (티그로)",ORG_ADMIN:"환경측정기업 관리자",OPERATOR:"환경측정기업 임직원",CUSTOMER_ADMIN:"고객사 관리자",CUSTOMER_USER:"고객사 사용자"})[e]||e,E=e=>({PENDING:"승인 대기",APPROVED:"승인됨",REJECTED:"거부됨",SUSPENDED:"정지됨",WITHDRAWN:"탈퇴"})[e]||e,q=e=>{let{name:t,value:s}=e.target;v(e=>({...e,[t]:s}))},U=async e=>{if(e.preventDefault(),P(""),D(""),N.newPassword!==N.confirmPassword){P("새 비밀번호가 일치하지 않습니다.");return}if(N.newPassword.length<8){P("비밀번호는 최소 8자 이상이어야 합니다.");return}try{let e=await fetch("/api/auth/change-password",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({currentPassword:N.currentPassword,newPassword:N.newPassword})}),t=await e.json();e.ok?(D("비밀번호가 변경되었습니다."),f(!1),v({currentPassword:"",newPassword:"",confirmPassword:""})):P(t.error||"비밀번호 변경에 실패했습니다.")}catch(e){P("비밀번호 변경 중 오류가 발생했습니다.")}};return"loading"===t||c?a.jsx("div",{className:"flex items-center justify-center min-h-screen",children:a.jsx("div",{className:"text-lg",children:"로딩 중..."})}):s?a.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900",children:(0,a.jsxs)("div",{className:"max-w-7xl mx-auto p-8",children:[(0,a.jsxs)("div",{className:"mb-8",children:[a.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:"내 정보"}),a.jsx("p",{className:"mt-2 text-sm text-gray-600 dark:text-gray-400",children:"개인 정보를 확인하고 수정할 수 있습니다."})]}),u&&a.jsx("div",{className:"mb-4 rounded-md bg-red-50 dark:bg-red-900/20 p-4",children:a.jsx("div",{className:"text-sm font-medium text-red-800 dark:text-red-200",children:u})}),b&&a.jsx("div",{className:"mb-4 rounded-md bg-green-50 dark:bg-green-900/20 p-4",children:a.jsx("div",{className:"text-sm font-medium text-green-800 dark:text-green-200",children:b})}),(0,a.jsxs)("div",{className:"hidden md:block bg-white dark:bg-gray-800 rounded-lg shadow overflow-hidden mb-6",children:[a.jsx("div",{className:"px-6 py-4 border-b border-gray-200 dark:border-gray-700",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[a.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"계정 정보"}),!m&&a.jsx(i.Z,{onClick:()=>p(!0),className:"px-4 py-2 text-sm bg-blue-600 hover:bg-blue-700 text-white rounded-md",children:"정보 수정"})]})}),a.jsx("div",{className:"overflow-x-auto",children:(0,a.jsxs)("table",{className:"min-w-full divide-y divide-gray-200 dark:divide-gray-700",children:[a.jsx("thead",{className:"bg-gray-50 dark:bg-gray-700",children:(0,a.jsxs)("tr",{children:[a.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"이메일"}),a.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"이름"}),a.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"전화번호"}),a.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"역할"}),a.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"부서/직책"}),a.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"상태"}),a.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"가입일"}),a.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"마지막 로그인"})]})}),a.jsx("tbody",{className:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700",children:(0,a.jsxs)("tr",{children:[a.jsx("td",{className:"px-4 py-3 whitespace-nowrap text-sm text-gray-900 dark:text-gray-100",children:s.email}),a.jsx("td",{className:"px-4 py-3 whitespace-nowrap text-sm text-gray-900 dark:text-gray-100",children:m?a.jsx(l.Z,{name:"name",type:"text",value:h.name,onChange:Z,className:"w-full min-w-[100px]"}):s.name}),a.jsx("td",{className:"px-4 py-3 whitespace-nowrap text-sm text-gray-900 dark:text-gray-100",children:m?a.jsx(l.Z,{name:"phone",type:"tel",value:h.phone,onChange:Z,className:"w-full min-w-[120px]"}):s.phone||"-"}),a.jsx("td",{className:"px-4 py-3 whitespace-nowrap",children:a.jsx("span",{className:"px-2 py-1 text-xs font-semibold rounded-full bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200",children:A(s.role)})}),a.jsx("td",{className:"px-4 py-3 text-sm text-gray-900 dark:text-gray-100",children:m?(0,a.jsxs)("div",{className:"space-y-1",children:[a.jsx(l.Z,{name:"department",type:"text",value:h.department,onChange:Z,placeholder:"부서",className:"w-full min-w-[100px]"}),a.jsx(l.Z,{name:"position",type:"text",value:h.position,onChange:Z,placeholder:"직책",className:"w-full min-w-[100px]"})]}):(0,a.jsxs)("div",{children:[s.department||"-",s.position&&` / ${s.position}`]})}),a.jsx("td",{className:"px-4 py-3 whitespace-nowrap",children:a.jsx("span",{className:"px-2 py-1 text-xs font-semibold rounded-full bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200",children:E(s.status)})}),a.jsx("td",{className:"px-4 py-3 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400",children:new Date(s.createdAt).toLocaleDateString()}),a.jsx("td",{className:"px-4 py-3 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400",children:s.lastLoginAt?new Date(s.lastLoginAt).toLocaleString():"없음"})]})})]})}),m&&a.jsx("div",{className:"px-6 py-4 bg-gray-50 dark:bg-gray-700 border-t border-gray-200 dark:border-gray-600",children:(0,a.jsxs)("div",{className:"flex gap-2",children:[a.jsx(i.Z,{onClick:_,className:"px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-md",children:"저장"}),a.jsx(i.Z,{onClick:()=>{p(!1),g({name:s.name,phone:s.phone||"",department:s.department||"",position:s.position||""})},className:"px-4 py-2 bg-gray-300 hover:bg-gray-400 text-gray-800 rounded-md",children:"취소"})]})})]}),a.jsx("div",{className:"md:hidden space-y-3 mb-6",children:(0,a.jsxs)("div",{className:"rounded-lg border bg-white/50 dark:bg-white/5 p-4 space-y-3",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[a.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"계정 정보"}),!m&&a.jsx(i.Z,{onClick:()=>p(!0),className:"px-3 py-1 text-sm bg-blue-600 hover:bg-blue-700 text-white rounded-md",children:"수정"})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 gap-2 text-sm",children:[(0,a.jsxs)("div",{children:[a.jsx("span",{className:"text-gray-500",children:"\uD83D\uDCE7 이메일:"})," ",s.email]}),(0,a.jsxs)("div",{children:[a.jsx("span",{className:"text-gray-500",children:"\uD83D\uDC64 이름:"}),m?a.jsx(l.Z,{name:"name",type:"text",value:h.name,onChange:Z,className:"w-full mt-1"}):` ${s.name}`]}),(0,a.jsxs)("div",{children:[a.jsx("span",{className:"text-gray-500",children:"\uD83D\uDCF1 전화번호:"}),m?a.jsx(l.Z,{name:"phone",type:"tel",value:h.phone,onChange:Z,className:"w-full mt-1"}):` ${s.phone||"-"}`]}),(0,a.jsxs)("div",{children:[a.jsx("span",{className:"text-gray-500",children:"\uD83C\uDFAD 역할:"}),a.jsx("span",{className:"ml-2 px-2 py-1 text-xs font-semibold rounded-full bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200",children:A(s.role)})]}),(0,a.jsxs)("div",{children:[a.jsx("span",{className:"text-gray-500",children:"\uD83C\uDFE2 부서:"}),m?a.jsx(l.Z,{name:"department",type:"text",value:h.department,onChange:Z,className:"w-full mt-1"}):` ${s.department||"-"}`]}),(0,a.jsxs)("div",{children:[a.jsx("span",{className:"text-gray-500",children:"\uD83D\uDCBC 직책:"}),m?a.jsx(l.Z,{name:"position",type:"text",value:h.position,onChange:Z,className:"w-full mt-1"}):` ${s.position||"-"}`]}),(0,a.jsxs)("div",{children:[a.jsx("span",{className:"text-gray-500",children:"✅ 상태:"}),a.jsx("span",{className:"ml-2 px-2 py-1 text-xs font-semibold rounded-full bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200",children:E(s.status)})]}),(0,a.jsxs)("div",{children:[a.jsx("span",{className:"text-gray-500",children:"\uD83D\uDCC5 가입일:"})," ",new Date(s.createdAt).toLocaleDateString()]}),(0,a.jsxs)("div",{children:[a.jsx("span",{className:"text-gray-500",children:"\uD83D\uDD50 마지막 로그인:"})," ",s.lastLoginAt?new Date(s.lastLoginAt).toLocaleString():"없음"]})]}),m&&(0,a.jsxs)("div",{className:"flex flex-col gap-2 pt-2",children:[a.jsx("button",{onClick:_,className:"w-full px-3 py-2 bg-blue-500 text-white hover:bg-blue-600 rounded text-sm",children:"저장"}),a.jsx("button",{onClick:()=>{p(!1),g({name:s.name,phone:s.phone||"",department:s.department||"",position:s.position||""})},className:"w-full px-3 py-2 bg-gray-500 text-white hover:bg-gray-600 rounded text-sm",children:"취소"})]})]})}),a.jsx("div",{className:"hidden md:block bg-white dark:bg-gray-800 rounded-lg shadow overflow-hidden",children:(0,a.jsxs)("div",{className:"p-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[a.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"비밀번호 변경"}),!j&&a.jsx(i.Z,{onClick:()=>f(!0),className:"px-4 py-2 text-sm bg-yellow-600 hover:bg-yellow-700 text-white rounded-md",children:"비밀번호 변경"})]}),C&&a.jsx("div",{className:"mb-4 rounded-md bg-green-50 dark:bg-green-900/20 p-4",children:a.jsx("div",{className:"text-sm font-medium text-green-800 dark:text-green-200",children:C})}),j&&a.jsx("form",{onSubmit:U,children:(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{children:[a.jsx("label",{htmlFor:"currentPassword",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"현재 비밀번호"}),a.jsx(l.Z,{id:"currentPassword",name:"currentPassword",type:"password",required:!0,value:N.currentPassword,onChange:q,placeholder:"현재 비밀번호",className:"w-full"})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{htmlFor:"newPassword",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"새 비밀번호"}),a.jsx(l.Z,{id:"newPassword",name:"newPassword",type:"password",required:!0,value:N.newPassword,onChange:q,placeholder:"새 비밀번호 (최소 8자)",className:"w-full"})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{htmlFor:"confirmPassword",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"새 비밀번호 확인"}),a.jsx(l.Z,{id:"confirmPassword",name:"confirmPassword",type:"password",required:!0,value:N.confirmPassword,onChange:q,placeholder:"새 비밀번호 확인",className:"w-full"})]}),k&&a.jsx("div",{className:"rounded-md bg-red-50 dark:bg-red-900/20 p-4",children:a.jsx("div",{className:"text-sm font-medium text-red-800 dark:text-red-200",children:k})}),(0,a.jsxs)("div",{className:"flex gap-2",children:[a.jsx(i.Z,{type:"submit",className:"px-4 py-2 bg-yellow-600 hover:bg-yellow-700 text-white rounded-md",children:"변경"}),a.jsx(i.Z,{type:"button",onClick:()=>{f(!1),v({currentPassword:"",newPassword:"",confirmPassword:""}),P("")},className:"px-4 py-2 bg-gray-300 hover:bg-gray-400 text-gray-800 rounded-md",children:"취소"})]})]})})]})}),(0,a.jsxs)("div",{className:"md:hidden rounded-lg border bg-white/50 dark:bg-white/5 p-4 space-y-3",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[a.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"비밀번호 변경"}),!j&&a.jsx(i.Z,{onClick:()=>f(!0),className:"px-3 py-1 text-sm bg-yellow-600 hover:bg-yellow-700 text-white rounded-md",children:"변경"})]}),C&&a.jsx("div",{className:"rounded-md bg-green-50 dark:bg-green-900/20 p-3",children:a.jsx("div",{className:"text-sm font-medium text-green-800 dark:text-green-200",children:C})}),j&&(0,a.jsxs)("form",{onSubmit:U,className:"space-y-3",children:[(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"현재 비밀번호"}),a.jsx(l.Z,{name:"currentPassword",type:"password",required:!0,value:N.currentPassword,onChange:q,placeholder:"현재 비밀번호",className:"w-full"})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"새 비밀번호"}),a.jsx(l.Z,{name:"newPassword",type:"password",required:!0,value:N.newPassword,onChange:q,placeholder:"새 비밀번호 (최소 8자)",className:"w-full"})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"새 비밀번호 확인"}),a.jsx(l.Z,{name:"confirmPassword",type:"password",required:!0,value:N.confirmPassword,onChange:q,placeholder:"새 비밀번호 확인",className:"w-full"})]}),k&&a.jsx("div",{className:"rounded-md bg-red-50 dark:bg-red-900/20 p-3",children:a.jsx("div",{className:"text-sm font-medium text-red-800 dark:text-red-200",children:k})}),(0,a.jsxs)("div",{className:"flex flex-col gap-2",children:[a.jsx("button",{type:"submit",className:"w-full px-3 py-2 bg-yellow-500 text-white hover:bg-yellow-600 rounded text-sm",children:"변경"}),a.jsx("button",{type:"button",onClick:()=>{f(!1),v({currentPassword:"",newPassword:"",confirmPassword:""}),P("")},className:"w-full px-3 py-2 bg-gray-500 text-white hover:bg-gray-600 rounded text-sm",children:"취소"})]})]})]})]})}):a.jsx("div",{className:"flex items-center justify-center min-h-screen",children:a.jsx("div",{className:"text-lg text-red-600",children:"프로필을 불러올 수 없습니다."})})}},99837:(e,t,s)=>{"use strict";s.d(t,{Z:()=>n});var a=s(10326);s(17577);let r={primary:"bg-black text-white hover:bg-black/90 dark:bg-white dark:text-black dark:hover:bg-white/90",secondary:"border border-gray-300 text-gray-900 hover:bg-gray-50 dark:border-white/20 dark:text-white dark:hover:bg-white/10",ghost:"text-gray-700 hover:bg-gray-100 dark:text-gray-200 dark:hover:bg-white/10"},d={sm:"h-8 px-3 text-sm",md:"h-10 px-4 text-sm",lg:"h-11 px-5 text-base"};function n({variant:e="primary",size:t="md",className:s="",...n}){return a.jsx("button",{className:`inline-flex items-center justify-center rounded-md font-medium transition-colors focus:outline-none focus:ring-2 focus:ring-offset-2 disabled:opacity-50 disabled:pointer-events-none ${r[e]} ${d[t]} ${s}`,...n})}},89175:(e,t,s)=>{"use strict";s.d(t,{Z:()=>r});var a=s(10326);function r({className:e="",...t}){return a.jsx("input",{className:`rounded-md border bg-transparent px-3 py-2 text-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:border-white/20 ${e}`,...t})}s(17577)},85282:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});let a=(0,s(68570).createProxy)(String.raw`C:\Users\User\boaz\frontend\src\app\profile\page.tsx#default`)},73881:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>r});var a=s(66621);let r=e=>[{type:"image/x-icon",sizes:"16x16",url:(0,a.fillMetadataSegment)(".",e.params,"favicon.ico")+""}]}};var t=require("../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),a=t.X(0,[8948,9975,6621,5736],()=>s(97646));module.exports=a})();