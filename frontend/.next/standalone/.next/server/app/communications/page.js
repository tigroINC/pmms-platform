(()=>{var e={};e.id=773,e.ids=[773],e.modules={72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},55315:e=>{"use strict";e.exports=require("path")},17360:e=>{"use strict";e.exports=require("url")},56632:(e,t,a)=>{"use strict";a.r(t),a.d(t,{GlobalError:()=>l.a,__next_app__:()=>m,originalPathname:()=>o,pages:()=>x,routeModule:()=>g,tree:()=>c}),a(92030),a(92553),a(35866);var r=a(23191),s=a(88716),d=a(37922),l=a.n(d),n=a(95231),i={};for(let e in n)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(i[e]=()=>n[e]);a.d(t,i);let c=["",{children:["communications",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(a.bind(a,92030)),"C:\\Users\\User\\boaz\\frontend\\src\\app\\communications\\page.tsx"]}]},{metadata:{icon:[async e=>(await Promise.resolve().then(a.bind(a,73881))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(a.bind(a,92553)),"C:\\Users\\User\\boaz\\frontend\\src\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(a.t.bind(a,35866,23)),"next/dist/client/components/not-found-error"],metadata:{icon:[async e=>(await Promise.resolve().then(a.bind(a,73881))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}],x=["C:\\Users\\User\\boaz\\frontend\\src\\app\\communications\\page.tsx"],o="/communications/page",m={require:a,loadChunk:()=>Promise.resolve()},g=new r.AppPageRouteModule({definition:{kind:s.x.APP_PAGE,page:"/communications/page",pathname:"/communications",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},38407:(e,t,a)=>{Promise.resolve().then(a.bind(a,20191))},83855:(e,t,a)=>{"use strict";a.d(t,{Z:()=>r});let r=(0,a(62881).Z)("plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},20191:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>b});var r=a(10326),s=a(17577),d=a(77109),l=a(35047),n=a(99837),i=a(36728),c=a(83855),x=a(89175),o=a(2102);function m({isOpen:e,onClose:t,onSuccess:a,initialShareType:l=!0}){let{data:i}=(0,d.useSession)(),c=i?.user,m=c?.role==="CUSTOMER_ADMIN"||c?.role==="CUSTOMER_USER",[g,h]=(0,s.useState)({customerId:"",contactAt:new Date().toISOString().slice(0,16),channel:"PHONE",subject:"",content:"",priority:"NORMAL",assignedToId:"",contactPerson:"",contactOrg:"",isShared:!0}),[u,p]=(0,s.useState)([]),[y,b]=(0,s.useState)([]),[j,k]=(0,s.useState)(!1),[N,v]=(0,s.useState)(""),f=(e,t)=>{h(a=>({...a,[e]:t}))},w=async e=>{if(e.preventDefault(),v(""),!m&&!g.customerId){v("ê³ ê°ì‚¬ë¥¼ ì„ íƒí•´ì£¼ì„¸ìš”");return}if(!g.content.trim()){v("ë‚´ìš©ì„ ìž…ë ¥í•´ì£¼ì„¸ìš”");return}k(!0);try{let e=await fetch("/api/communications",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(g)}),t=await e.json();e.ok?a():v(t.error||"ë“±ë¡ ì‹¤íŒ¨")}catch(e){v("ë“±ë¡ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤")}finally{k(!1)}};return e?r.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50",children:(0,r.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl w-full max-w-2xl max-h-[90vh] overflow-y-auto m-4",children:[r.jsx("div",{className:"sticky top-0 bg-white dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700 px-6 py-4",children:r.jsx("h2",{className:"text-xl font-bold text-gray-900 dark:text-white",children:m?"ìš”ì²­ì‚¬í•­ ë“±ë¡":"ì»¤ë®¤ë‹ˆì¼€ì´ì…˜ ë“±ë¡"})}),(0,r.jsxs)("form",{onSubmit:w,className:"p-6 space-y-4",children:[N&&r.jsx("div",{className:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 text-red-700 dark:text-red-400 px-4 py-3 rounded",children:N}),!m&&(0,r.jsxs)("div",{className:"bg-gray-50 dark:bg-gray-900/20 border border-gray-200 dark:border-gray-700 rounded-lg p-4",children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-3",children:"ê³µìœ  ë²”ìœ„"}),(0,r.jsxs)("div",{className:"flex gap-4",children:[(0,r.jsxs)("label",{className:"flex items-center cursor-pointer",children:[r.jsx("input",{type:"radio",checked:!0===g.isShared,onChange:()=>f("isShared",!0),className:"mr-2"}),r.jsx("span",{className:"text-sm text-gray-900 dark:text-white",children:"ê³ ê°ì‚¬ ê³µìœ "})]}),(0,r.jsxs)("label",{className:"flex items-center cursor-pointer",children:[r.jsx("input",{type:"radio",checked:!1===g.isShared,onChange:()=>f("isShared",!1),disabled:!1===l,className:"mr-2"}),r.jsx("span",{className:"text-sm text-gray-900 dark:text-white",children:"ë‚´ë¶€ ì „ìš©"})]})]}),!1===l&&!1===g.isShared&&r.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-2",children:"* ë‚´ë¶€ ì „ìš©ì€ ê³ ê°ì‚¬ ê³µìœ ë¡œë§Œ ë³€ê²½ ê°€ëŠ¥í•©ë‹ˆë‹¤"})]}),!m&&(0,r.jsxs)("div",{children:[(0,r.jsxs)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:["ê³ ê°ì‚¬ ",r.jsx("span",{className:"text-red-500",children:"*"})]}),(0,r.jsxs)(o.Z,{value:g.customerId,onChange:e=>f("customerId",e.target.value),required:!0,children:[r.jsx("option",{value:"",children:"ì„ íƒí•˜ì„¸ìš”"}),u.map(e=>r.jsx("option",{value:e.id,children:e.name},e.id))]})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsxs)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:["ì†Œí†µ ì¼ì‹œ ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsx(x.Z,{type:"datetime-local",value:g.contactAt,onChange:e=>f("contactAt",e.target.value),required:!0})]}),(0,r.jsxs)("div",{children:[(0,r.jsxs)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:["ì±„ë„ ",r.jsx("span",{className:"text-red-500",children:"*"})]}),(0,r.jsxs)(o.Z,{value:g.channel,onChange:e=>f("channel",e.target.value),required:!0,children:[r.jsx("option",{value:"PHONE",children:"\uD83D\uDCDE ì „í™”"}),r.jsx("option",{value:"EMAIL",children:"\uD83D\uDCE7 ì´ë©”ì¼"}),r.jsx("option",{value:"VISIT",children:"\uD83D\uDC64 ë°©ë¬¸"}),r.jsx("option",{value:"KAKAO",children:"\uD83D\uDCAC ì¹´í†¡"}),r.jsx("option",{value:"SMS",children:"\uD83D\uDCF1 SMS"}),r.jsx("option",{value:"FAX",children:"\uD83D\uDCE0 íŒ©ìŠ¤"}),r.jsx("option",{value:"OTHER",children:"ê¸°íƒ€"})]})]})]}),!m&&(0,r.jsxs)("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"ìš°ì„ ìˆœìœ„"}),(0,r.jsxs)(o.Z,{value:g.priority,onChange:e=>f("priority",e.target.value),children:[r.jsx("option",{value:"URGENT",children:"\uD83D\uDD34 ê¸´ê¸‰"}),r.jsx("option",{value:"HIGH",children:"\uD83D\uDFE0 ë†’ìŒ"}),r.jsx("option",{value:"NORMAL",children:"âšª ë³´í†µ"}),r.jsx("option",{value:"LOW",children:"\uD83D\uDD35 ë‚®ìŒ"})]})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsxs)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:["ìƒëŒ€ë°© ì¡°ì§ëª… ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsx(x.Z,{value:g.contactOrg,onChange:e=>f("contactOrg",e.target.value),placeholder:m?"ì¸¡ì •ê¸°ì—…ëª…":"ê³ ê°ì‚¬ëª…",required:!0})]}),(0,r.jsxs)("div",{children:[(0,r.jsxs)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:["ìƒëŒ€ë°© ë‹´ë‹¹ìžëª… ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsx(x.Z,{value:g.contactPerson,onChange:e=>f("contactPerson",e.target.value),placeholder:"ë‹´ë‹¹ìž ì´ë¦„",required:!0})]})]}),(0,r.jsxs)("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"ì œëª©"}),r.jsx(x.Z,{value:g.subject,onChange:e=>f("subject",e.target.value),placeholder:"ì œëª©ì„ ìž…ë ¥í•˜ì„¸ìš” (ì„ íƒì‚¬í•­)"})]}),(0,r.jsxs)("div",{children:[(0,r.jsxs)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:["ë‚´ìš© ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsx("textarea",{value:g.content,onChange:e=>f("content",e.target.value),placeholder:"ì†Œí†µ ë‚´ìš©ì„ ìž…ë ¥í•˜ì„¸ìš”",rows:6,required:!0,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),!m&&(0,r.jsxs)("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"ë‹´ë‹¹ìž ì§€ì •"}),(0,r.jsxs)(o.Z,{value:g.assignedToId,onChange:e=>f("assignedToId",e.target.value),children:[r.jsx("option",{value:"",children:"ì„ íƒ ì•ˆ í•¨"}),y.map(e=>(0,r.jsxs)("option",{value:e.id,children:[e.name," (",e.email,")"]},e.id))]})]}),(0,r.jsxs)("div",{className:"flex gap-3 pt-4",children:[r.jsx(n.Z,{type:"submit",disabled:j,className:"flex-1",children:j?"ë“±ë¡ ì¤‘...":"ë“±ë¡"}),r.jsx(n.Z,{type:"button",variant:"secondary",onClick:t,disabled:j,className:"flex-1",children:"ì·¨ì†Œ"})]})]})]})}):null}var g=a(68894);let h={PHONE:"\uD83D\uDCDE ì „í™”",EMAIL:"\uD83D\uDCE7 ì´ë©”ì¼",VISIT:"\uD83D\uDC64 ë°©ë¬¸",KAKAO:"\uD83D\uDCAC ì¹´í†¡",SMS:"\uD83D\uDCF1 SMS",FAX:"\uD83D\uDCE0 íŒ©ìŠ¤",OTHER:"ê¸°íƒ€"},u={PENDING:{label:"ë‹µë³€ëŒ€ê¸°",color:"bg-yellow-100 text-yellow-700 dark:bg-yellow-900/30 dark:text-yellow-300"},IN_PROGRESS:{label:"ëŒ€í™”ì¤‘",color:"bg-blue-100 text-blue-700 dark:bg-blue-900/30 dark:text-blue-300"},COMPLETED:{label:"ì™„ë£Œ",color:"bg-green-100 text-green-700 dark:bg-green-900/30 dark:text-green-300"},REFERENCE:{label:"ì°¸ê³ ",color:"bg-gray-100 text-gray-700 dark:bg-gray-900/30 dark:text-gray-300"}},p={URGENT:{label:"ê¸´ê¸‰",icon:"\uD83D\uDD34"},HIGH:{label:"ë†’ìŒ",icon:"\uD83D\uDFE0"},NORMAL:{label:"ë³´í†µ",icon:"âšª"},LOW:{label:"ë‚®ìŒ",icon:"\uD83D\uDD35"}},y=(e,t)=>"PENDING"!==e||t?u[e]:{label:"ì™„ë£Œì „",color:"bg-yellow-100 text-yellow-700 dark:bg-yellow-900/30 dark:text-yellow-300"};function b(){let{data:e,status:t}=(0,d.useSession)(),a=(0,l.useRouter)(),[x,o]=(0,s.useState)([]),[b,j]=(0,s.useState)(!0),[k,N]=(0,s.useState)(!1),[v,f]=(0,s.useState)(!1),[w,D]=(0,s.useState)(!0),[S,C]=(0,s.useState)(!1),[E,P]=(0,s.useState)(""),[O,_]=(0,s.useState)(""),[R,A]=(0,s.useState)(""),[T,I]=(0,s.useState)(""),[M,Z]=(0,s.useState)(""),[G,U]=(0,s.useState)(new Set),$=e?.user,z=$?.role==="CUSTOMER_ADMIN"||$?.role==="CUSTOMER_USER",L=async()=>{try{j(!0);let e=new URLSearchParams;O&&e.append("status",O),R&&e.append("channel",R),E&&e.append("search",E),T&&e.append("startDate",T),M&&e.append("endDate",M);let t=await fetch(`/api/communications?${e.toString()}`),a=await t.json();t.ok&&o(a.data||[])}catch(e){}finally{j(!1)}},q=async e=>{if(0===G.size){alert("ë³€ê²½í•  í•­ëª©ì„ ì„ íƒí•´ì£¼ì„¸ìš”");return}if(confirm(`ì„ íƒí•œ ${G.size}ê±´ì„ ${u[e].label} ìƒíƒœë¡œ ë³€ê²½í•˜ì‹œê² ìŠµë‹ˆê¹Œ?`))try{let t=await fetch("/api/communications/bulk-status",{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({ids:Array.from(G),status:e})}),a=await t.json();t.ok?(alert(`${a.updated}ê±´ì´ ë³€ê²½ë˜ì—ˆìŠµë‹ˆë‹¤`),U(new Set),L()):alert(`ë³€ê²½ ì‹¤íŒ¨: ${a.error}`)}catch(e){alert("ìƒíƒœ ë³€ê²½ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤")}},H=e=>{let t=new Set(G);t.has(e)?t.delete(e):t.add(e),U(t)};return"loading"===t||b?r.jsx("div",{className:"flex items-center justify-center min-h-screen",children:r.jsx("div",{className:"text-gray-500",children:"ë¡œë”© ì¤‘..."})}):(0,r.jsxs)("section",{className:"space-y-3",children:[r.jsx("div",{className:"rounded-lg border bg-white/50 dark:bg-white/5 p-2.5",children:(0,r.jsxs)("div",{className:"flex flex-wrap items-end gap-2",children:[r.jsx("h1",{className:"text-lg font-semibold whitespace-nowrap mb-1.5",children:z?"ì†Œí†µ ë‚´ì—­":"ê³ ê° ì†Œí†µ"}),r.jsx("span",{className:"text-gray-300 dark:text-gray-600 mb-1.5",children:"|"}),(0,r.jsxs)("div",{className:"flex flex-col",style:{width:"140px",minWidth:"140px"},children:[r.jsx("label",{className:"text-xs text-gray-600 dark:text-gray-400 mb-0.5",children:"ê²€ìƒ‰"}),r.jsx("input",{type:"text",value:E,onChange:e=>P(e.target.value),placeholder:"ì œëª©, ë‚´ìš©...",className:"text-sm h-8 px-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 text-gray-900 dark:text-white"})]}),(0,r.jsxs)("div",{className:"flex flex-col",style:{width:"120px",minWidth:"120px"},children:[r.jsx("label",{className:"text-xs text-gray-600 dark:text-gray-400 mb-0.5",children:"ìƒíƒœ"}),(0,r.jsxs)("select",{value:O,onChange:e=>_(e.target.value),className:"text-sm h-8 px-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 text-gray-900 dark:text-white",children:[r.jsx("option",{value:"",children:"ìƒíƒœ:ì „ì²´"}),r.jsx("option",{value:"PENDING",children:"ë‹µë³€ëŒ€ê¸°"}),r.jsx("option",{value:"IN_PROGRESS",children:"ëŒ€í™”ì¤‘"}),r.jsx("option",{value:"COMPLETED",children:"ì™„ë£Œ"}),r.jsx("option",{value:"REFERENCE",children:"ì°¸ê³ "})]})]}),(0,r.jsxs)("div",{className:"flex flex-col",style:{width:"120px",minWidth:"120px"},children:[r.jsx("label",{className:"text-xs text-gray-600 dark:text-gray-400 mb-0.5",children:"ì±„ë„"}),(0,r.jsxs)("select",{value:R,onChange:e=>A(e.target.value),className:"text-sm h-8 px-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 text-gray-900 dark:text-white",children:[r.jsx("option",{value:"",children:"ì „ì²´"}),r.jsx("option",{value:"PHONE",children:"ì „í™”"}),r.jsx("option",{value:"EMAIL",children:"ì´ë©”ì¼"}),r.jsx("option",{value:"VISIT",children:"ë°©ë¬¸"}),r.jsx("option",{value:"KAKAO",children:"ì¹´í†¡"}),r.jsx("option",{value:"SMS",children:"SMS"})]})]}),(0,r.jsxs)("div",{className:"flex flex-col",style:{width:"140px",minWidth:"140px"},children:[r.jsx("label",{className:"text-xs text-gray-600 dark:text-gray-400 mb-0.5",children:"ì‹œìž‘ì¼"}),r.jsx("input",{type:"date",value:T,onChange:e=>I(e.target.value),className:"text-sm h-8 px-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 text-gray-900 dark:text-white"})]}),(0,r.jsxs)("div",{className:"flex flex-col",style:{width:"140px",minWidth:"140px"},children:[r.jsx("label",{className:"text-xs text-gray-600 dark:text-gray-400 mb-0.5",children:"ì¢…ë£Œì¼"}),r.jsx("input",{type:"date",value:M,onChange:e=>Z(e.target.value),className:"text-sm h-8 px-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 text-gray-900 dark:text-white"})]}),(0,r.jsxs)("div",{className:"flex flex-wrap items-center gap-2 ml-auto",children:[(0,r.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded border border-gray-200 dark:border-gray-700 px-3 py-1 flex items-center gap-1.5",children:[r.jsx("span",{className:"text-xs text-gray-600 dark:text-gray-400",children:"ì „ì²´"}),r.jsx("span",{className:"text-sm font-bold text-gray-900 dark:text-white",children:x.length})]}),(0,r.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded border border-gray-200 dark:border-gray-700 px-3 py-1 flex items-center gap-1.5",children:[r.jsx("span",{className:"text-xs text-gray-600 dark:text-gray-400",children:"ë‹µë³€ëŒ€ê¸°"}),r.jsx("span",{className:"text-sm font-bold text-yellow-600 dark:text-yellow-400",children:x.filter(e=>"PENDING"===e.status).length})]}),(0,r.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded border border-gray-200 dark:border-gray-700 px-3 py-1 flex items-center gap-1.5",children:[r.jsx("span",{className:"text-xs text-gray-600 dark:text-gray-400",children:"ì™„ë£Œ"}),r.jsx("span",{className:"text-sm font-bold text-green-600 dark:text-green-400",children:x.filter(e=>"COMPLETED"===e.status).length})]}),(0,r.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded border border-gray-200 dark:border-gray-700 px-3 py-1 flex items-center gap-1.5",children:[r.jsx("span",{className:"text-xs text-gray-600 dark:text-gray-400",children:"ê¸´ê¸‰"}),r.jsx("span",{className:"text-sm font-bold text-red-600 dark:text-red-400",children:x.filter(e=>"URGENT"===e.priority).length})]}),(0,r.jsxs)("button",{onClick:()=>C(!0),className:"px-3 py-1.5 text-sm text-gray-600 dark:text-gray-400 hover:text-blue-600 dark:hover:text-blue-400 hover:bg-blue-50 dark:hover:bg-blue-900/20 rounded-md transition-colors flex items-center gap-1",children:[r.jsx(i.Z,{className:"w-4 h-4"}),"ë„ì›€ë§"]}),(0,r.jsxs)(n.Z,{onClick:()=>{z?N(!0):f(!0)},size:"sm",children:[r.jsx(c.Z,{className:"w-4 h-4 mr-1"}),z?"ìš”ì²­ ë“±ë¡":"ë“±ë¡"]})]})]})}),!z&&G.size>0&&r.jsx("div",{className:"bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg p-4 mb-4",children:(0,r.jsxs)("div",{className:"flex flex-wrap items-center gap-2",children:[(0,r.jsxs)("span",{className:"text-sm font-medium text-blue-900 dark:text-blue-300",children:[G.size,"ê±´ ì„ íƒë¨"]}),r.jsx(n.Z,{size:"sm",variant:"secondary",onClick:()=>q("COMPLETED"),children:"ì™„ë£Œ ì²˜ë¦¬"}),r.jsx(n.Z,{size:"sm",variant:"secondary",onClick:()=>q("REFERENCE"),children:"ì°¸ê³  ì²˜ë¦¬"}),r.jsx(n.Z,{size:"sm",variant:"secondary",onClick:()=>U(new Set),children:"ì„ íƒ í•´ì œ"})]})}),(0,r.jsxs)("div",{className:"hidden md:block bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 overflow-hidden",children:[r.jsx("div",{className:"overflow-x-auto",children:(0,r.jsxs)("table",{className:"w-full",children:[r.jsx("thead",{className:"bg-gray-50 dark:bg-gray-900",children:(0,r.jsxs)("tr",{children:[!z&&r.jsx("th",{className:"px-4 py-3 text-left",children:r.jsx("input",{type:"checkbox",checked:G.size===x.length&&x.length>0,onChange:()=>{G.size===x.length?U(new Set):U(new Set(x.map(e=>e.id)))},className:"rounded"})}),r.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase",children:"ì¼ì‹œ"}),r.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase",children:z?"í™˜ê²½ì¸¡ì •ê¸°ì—…":"ê³ ê°ì‚¬"}),r.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase",children:"ì±„ë„"}),r.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase",children:"ë‚´ìš©"}),!z&&r.jsx("th",{className:"px-4 py-3 text-center text-xs font-medium text-gray-500 dark:text-gray-400 uppercase",children:"ê³µìœ ë²”ìœ„"}),r.jsx("th",{className:"px-4 py-3 text-center text-xs font-medium text-gray-500 dark:text-gray-400 uppercase",children:"ìš°ì„ ìˆœìœ„"}),r.jsx("th",{className:"px-4 py-3 text-center text-xs font-medium text-gray-500 dark:text-gray-400 uppercase",children:"ìƒíƒœ"})]})}),r.jsx("tbody",{className:"divide-y divide-gray-200 dark:divide-gray-700",children:x.map(e=>(0,r.jsxs)("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-700/50 cursor-pointer",onClick:()=>a.push(`/communications/${e.id}`),children:[!z&&r.jsx("td",{className:"px-4 py-3",onClick:e=>e.stopPropagation(),children:r.jsx("input",{type:"checkbox",checked:G.has(e.id),onChange:()=>H(e.id),className:"rounded"})}),r.jsx("td",{className:"px-4 py-3 text-sm text-gray-900 dark:text-white whitespace-nowrap",children:new Date(e.contactAt).toLocaleDateString("ko-KR",{month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"})}),r.jsx("td",{className:"px-4 py-3 text-sm text-gray-900 dark:text-white",children:z?e.contactOrg||"-":e.customer.name}),r.jsx("td",{className:"px-4 py-3 text-sm text-gray-900 dark:text-white",children:h[e.channel]}),(0,r.jsxs)("td",{className:"px-4 py-3 text-sm text-gray-900 dark:text-white max-w-md",children:[r.jsx("div",{className:"font-medium",children:e.subject||"(ì œëª© ì—†ìŒ)"}),(0,r.jsxs)("div",{className:"text-gray-500 dark:text-gray-400 truncate",children:[e.content.substring(0,50),e.content.length>50&&"..."]}),(e._count.notes>0||e._count.attachments>0)&&(0,r.jsxs)("div",{className:"text-xs text-gray-400 mt-1",children:[e._count.notes>0&&`ðŸ’¬ ${e._count.notes}`,e._count.attachments>0&&` ðŸ“Ž ${e._count.attachments}`]})]}),!z&&r.jsx("td",{className:"px-4 py-3 text-center",children:r.jsx("span",{className:`px-2 py-1 text-xs rounded font-medium ${e.isShared?"bg-blue-100 text-blue-700 dark:bg-blue-900/30 dark:text-blue-300":"bg-gray-100 text-gray-700 dark:bg-gray-900/30 dark:text-gray-300"}`,children:e.isShared?"ê³ ê°ì‚¬ ê³µìœ ":"ë‚´ë¶€ì „ìš©"})}),r.jsx("td",{className:"px-4 py-3 text-center",children:r.jsx("span",{className:`px-2 py-1 text-xs rounded font-medium ${"URGENT"===e.priority?"bg-red-100 text-red-700 dark:bg-red-900/30 dark:text-red-300":"HIGH"===e.priority?"bg-orange-100 text-orange-700 dark:bg-orange-900/30 dark:text-orange-300":"NORMAL"===e.priority?"bg-gray-100 text-gray-700 dark:bg-gray-900/30 dark:text-gray-300":"bg-blue-100 text-blue-700 dark:bg-blue-900/30 dark:text-blue-300"}`,children:p[e.priority].label})}),r.jsx("td",{className:"px-4 py-3 text-center",children:r.jsx("span",{className:`px-2 py-1 text-xs rounded ${y(e.status,e.isShared).color}`,children:y(e.status,e.isShared).label})})]},e.id))})]})}),0===x.length&&r.jsx("div",{className:"text-center py-12 text-gray-500 dark:text-gray-400",children:"ë“±ë¡ëœ ì»¤ë®¤ë‹ˆì¼€ì´ì…˜ì´ ì—†ìŠµë‹ˆë‹¤"})]}),(0,r.jsxs)("div",{className:"md:hidden space-y-3",children:[x.map(e=>(0,r.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 p-4 space-y-3",onClick:()=>a.push(`/communications/${e.id}`),children:[(0,r.jsxs)("div",{className:"flex items-start justify-between",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[r.jsx("span",{className:`px-2 py-1 text-xs rounded ${y(e.status,e.isShared).color}`,children:y(e.status,e.isShared).label}),r.jsx("span",{className:"text-lg",children:p[e.priority].icon})]}),r.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:new Date(e.contactAt).toLocaleDateString("ko-KR",{month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"})})]}),(0,r.jsxs)("div",{children:[r.jsx("div",{className:"font-medium text-gray-900 dark:text-white mb-1",children:e.subject||"(ì œëª© ì—†ìŒ)"}),r.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400 line-clamp-2",children:e.content})]}),(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-2 text-sm text-gray-600 dark:text-gray-400",children:[(0,r.jsxs)("div",{children:["\uD83C\uDFE2 ",e.customer.name]}),r.jsx("div",{children:h[e.channel]}),!z&&r.jsx("div",{children:r.jsx("span",{className:`px-2 py-1 text-xs rounded font-medium ${e.isShared?"bg-blue-100 text-blue-700 dark:bg-blue-900/30 dark:text-blue-300":"bg-gray-100 text-gray-700 dark:bg-gray-900/30 dark:text-gray-300"}`,children:e.isShared?"ê³ ê°ì‚¬ ê³µìœ ":"ë‚´ë¶€ì „ìš©"})}),e.assignedTo&&(0,r.jsxs)("div",{children:["\uD83D\uDC64 ",e.assignedTo.name]}),(e._count.notes>0||e._count.attachments>0)&&(0,r.jsxs)("div",{children:[e._count.notes>0&&`ðŸ’¬ ${e._count.notes} `,e._count.attachments>0&&`ðŸ“Ž ${e._count.attachments}`]})]})]},e.id)),0===x.length&&r.jsx("div",{className:"text-center py-12 text-gray-500 dark:text-gray-400",children:"ë“±ë¡ëœ ì»¤ë®¤ë‹ˆì¼€ì´ì…˜ì´ ì—†ìŠµë‹ˆë‹¤"})]}),v&&r.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:(0,r.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-6 max-w-md w-full mx-4",children:[r.jsx("h3",{className:"text-lg font-semibold mb-4 text-gray-900 dark:text-white",children:"ì†Œí†µ ë‚´ì—­ ìœ í˜• ì„ íƒ"}),r.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-6",children:"ë“±ë¡í•  ì†Œí†µ ë‚´ì—­ì˜ ê³µìœ  ë²”ìœ„ë¥¼ ì„ íƒí•´ì£¼ì„¸ìš”"}),(0,r.jsxs)("div",{className:"space-y-3 mb-6",children:[(0,r.jsxs)("label",{className:"flex items-center p-4 border-2 rounded-lg cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-700/50 border-blue-500 bg-blue-50 dark:bg-blue-900/20",children:[r.jsx("input",{type:"radio",name:"shareType",checked:!0===w,onChange:()=>D(!0),className:"mr-3"}),(0,r.jsxs)("div",{children:[r.jsx("div",{className:"font-medium text-gray-900 dark:text-white",children:"ê³ ê°ì‚¬ ê³µìœ "}),r.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"ê³ ê°ì‚¬ê°€ í™•ì¸í•  ìˆ˜ ìžˆëŠ” ì†Œí†µ ë‚´ì—­"})]})]}),(0,r.jsxs)("label",{className:"flex items-center p-4 border-2 rounded-lg cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-700/50 border-gray-300 dark:border-gray-600",children:[r.jsx("input",{type:"radio",name:"shareType",checked:!1===w,onChange:()=>D(!1),className:"mr-3"}),(0,r.jsxs)("div",{children:[r.jsx("div",{className:"font-medium text-gray-900 dark:text-white",children:"ë‚´ë¶€ ì „ìš©"}),r.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"í™˜ê²½ì¸¡ì •ê¸°ì—… ë‚´ë¶€ì—ì„œë§Œ í™•ì¸ ê°€ëŠ¥"})]})]})]}),(0,r.jsxs)("div",{className:"flex gap-2",children:[r.jsx(n.Z,{variant:"secondary",onClick:()=>f(!1),className:"flex-1",children:"ì·¨ì†Œ"}),r.jsx(n.Z,{onClick:()=>{f(!1),N(!0)},className:"flex-1",children:"í™•ì¸"})]})]})}),r.jsx(m,{isOpen:k,onClose:()=>N(!1),onSuccess:()=>{N(!1),L()},initialShareType:w}),r.jsx(g.Z,{isOpen:S,onClose:()=>C(!1)})]})}},89175:(e,t,a)=>{"use strict";a.d(t,{Z:()=>s});var r=a(10326);function s({className:e="",...t}){return r.jsx("input",{className:`rounded-md border bg-transparent px-3 py-2 text-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:border-white/20 ${e}`,...t})}a(17577)},2102:(e,t,a)=>{"use strict";a.d(t,{Z:()=>s});var r=a(10326);function s({className:e="",children:t,...a}){return r.jsx("select",{className:`w-full rounded-md border bg-transparent px-3 py-2 text-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:border-white/20 ${e}`,...a,children:t})}a(17577)},92030:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>r});let r=(0,a(68570).createProxy)(String.raw`C:\Users\User\boaz\frontend\src\app\communications\page.tsx#default`)}};var t=require("../../webpack-runtime.js");t.C(e);var a=e=>t(t.s=e),r=t.X(0,[8948,9975,6621,5736,1330],()=>a(56632));module.exports=r})();