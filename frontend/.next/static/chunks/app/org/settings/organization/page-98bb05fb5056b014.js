(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1783],{9981:function(e,t,a){Promise.resolve().then(a.bind(a,5654))},5654:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return g}});var s=a(7437),r=a(2265),l=a(605),d=a(9376),n=a(2891),x=a(2827),i=a(6334),c=a(6475);function g(){let{data:e,status:t}=(0,l.useSession)(),a=(0,d.useRouter)(),{selectedOrg:g}=(0,n.o)(),[m,o]=(0,r.useState)(null),[u,h]=(0,r.useState)(!0),[p,y]=(0,r.useState)(!1),[b,j]=(0,r.useState)({}),[f,N]=(0,r.useState)(""),[k,v]=(0,r.useState)("");(0,r.useEffect)(()=>{if("unauthenticated"===t){a.push("/login");return}if(null==e?void 0:e.user){let t=e.user.role;if("ORG_ADMIN"!==t&&"SUPER_ADMIN"!==t){a.push("/dashboard");return}w()}},[e,t,a,g]);let w=async()=>{if(g)try{h(!0);let e=await fetch("/api/organizations/".concat(g.id)),t=await e.json();e.ok?(o(t.organization),j(t.organization)):N(t.error||"조직 정보를 불러오는데 실패했습니다.")}catch(e){N("조직 정보를 불러오는데 실패했습니다.")}finally{h(!1)}},D=e=>{let{name:t,value:a}=e.target;j(e=>({...e,[t]:a}))},C=async e=>{if(e.preventDefault(),N(""),v(""),!g)return;let t={representative:b.representative||null,businessType:b.businessType||null,address:b.address||null,phone:b.phone||null,email:b.email||null,website:b.website||null,fax:b.fax||null,establishedDate:b.establishedDate||null};try{let e=await fetch("/api/organizations/".concat(g.id),{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}),a=await e.json();e.ok?(v("조직 정보가 수정되었습니다."),y(!1),w()):N(a.error||"조직 정보 수정에 실패했습니다.")}catch(e){N("조직 정보 수정 중 오류가 발생했습니다.")}};return u?(0,s.jsx)("div",{className:"flex items-center justify-center min-h-screen",children:(0,s.jsx)("div",{className:"text-lg",children:"로딩 중..."})}):m?(0,s.jsxs)("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900",children:[(0,s.jsx)(c.Z,{}),(0,s.jsxs)("div",{className:"max-w-7xl mx-auto p-8",children:[(0,s.jsxs)("div",{className:"mb-8",children:[(0,s.jsx)("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:"조직 정보"}),(0,s.jsx)("p",{className:"mt-2 text-sm text-gray-600 dark:text-gray-400",children:"조직의 기본 정보를 확인하고 수정할 수 있습니다."})]}),f&&(0,s.jsx)("div",{className:"mb-4 rounded-md bg-red-50 dark:bg-red-900/20 p-4",children:(0,s.jsx)("div",{className:"text-sm font-medium text-red-800 dark:text-red-200",children:f})}),k&&(0,s.jsx)("div",{className:"mb-4 rounded-md bg-green-50 dark:bg-green-900/20 p-4",children:(0,s.jsx)("div",{className:"text-sm font-medium text-green-800 dark:text-green-200",children:k})}),(0,s.jsxs)("div",{className:"hidden md:block bg-white dark:bg-gray-800 rounded-lg shadow overflow-hidden mb-6",children:[(0,s.jsx)("div",{className:"px-6 py-4 border-b border-gray-200 dark:border-gray-700",children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsx)("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"조직 정보"}),!p&&(0,s.jsx)(i.Z,{onClick:()=>y(!0),className:"px-4 py-2 text-sm bg-blue-600 hover:bg-blue-700 text-white rounded-md",children:"정보 수정"})]})}),(0,s.jsx)("div",{children:(0,s.jsxs)("table",{className:"w-full table-fixed divide-y divide-gray-200 dark:divide-gray-700",children:[(0,s.jsx)("thead",{className:"bg-gray-50 dark:bg-gray-700",children:(0,s.jsxs)("tr",{children:[(0,s.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"기업명"}),(0,s.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"사업자번호"}),(0,s.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"법인번호"}),(0,s.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"대표자"}),(0,s.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"업종"}),(0,s.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"설립일"}),(0,s.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"전화"}),(0,s.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"이메일"}),(0,s.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"팩스"}),(0,s.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"웹사이트"}),(0,s.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"주소"}),!m.hideSubscriptionInfo&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"구독플랜"}),(0,s.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"구독상태"}),(0,s.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"활성상태"})]}),(0,s.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"가입일"})]})}),(0,s.jsx)("tbody",{className:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700",children:(0,s.jsxs)("tr",{children:[(0,s.jsx)("td",{className:"px-2 py-3 text-xs text-gray-900 dark:text-gray-100",children:(0,s.jsx)("div",{className:"break-words",children:m.name})}),(0,s.jsx)("td",{className:"px-2 py-3 text-xs text-gray-900 dark:text-gray-100",children:(0,s.jsx)("div",{className:"break-words",children:m.businessNumber||"-"})}),(0,s.jsx)("td",{className:"px-2 py-3 text-xs text-gray-900 dark:text-gray-100",children:(0,s.jsx)("div",{className:"break-words",children:m.corporateNumber||"-"})}),(0,s.jsx)("td",{className:"px-2 py-3 text-xs text-gray-900 dark:text-gray-100",children:p?(0,s.jsx)(x.Z,{name:"representative",type:"text",value:b.representative||"",onChange:D,className:"w-full text-xs"}):(0,s.jsx)("div",{className:"break-words",children:m.representative||"-"})}),(0,s.jsx)("td",{className:"px-2 py-3 text-xs text-gray-900 dark:text-gray-100",children:p?(0,s.jsx)(x.Z,{name:"businessType",type:"text",value:b.businessType||"",onChange:D,className:"w-full text-xs"}):(0,s.jsx)("div",{className:"break-words",children:m.businessType||"-"})}),(0,s.jsx)("td",{className:"px-2 py-3 text-xs text-gray-900 dark:text-gray-100",children:p?(0,s.jsx)(x.Z,{name:"establishedDate",type:"date",value:b.establishedDate?b.establishedDate.split("T")[0]:"",onChange:D,className:"w-full text-xs"}):(0,s.jsx)("div",{className:"break-words",children:m.establishedDate?new Date(m.establishedDate).toLocaleDateString():"-"})}),(0,s.jsx)("td",{className:"px-2 py-3 text-xs text-gray-900 dark:text-gray-100",children:p?(0,s.jsx)(x.Z,{name:"phone",type:"tel",value:b.phone||"",onChange:D,className:"w-full text-xs"}):(0,s.jsx)("div",{className:"break-words",children:m.phone||"-"})}),(0,s.jsx)("td",{className:"px-2 py-3 text-xs text-gray-900 dark:text-gray-100",children:p?(0,s.jsx)(x.Z,{name:"email",type:"email",value:b.email||"",onChange:D,className:"w-full text-xs"}):(0,s.jsx)("div",{className:"break-all",children:m.email||"-"})}),(0,s.jsx)("td",{className:"px-2 py-3 text-xs text-gray-900 dark:text-gray-100",children:p?(0,s.jsx)(x.Z,{name:"fax",type:"tel",value:b.fax||"",onChange:D,className:"w-full text-xs"}):(0,s.jsx)("div",{className:"break-words",children:m.fax||"-"})}),(0,s.jsx)("td",{className:"px-2 py-3 text-xs text-gray-900 dark:text-gray-100",children:p?(0,s.jsx)(x.Z,{name:"website",type:"url",value:b.website||"",onChange:D,className:"w-full text-xs"}):(0,s.jsx)("div",{className:"break-all",children:m.website||"-"})}),(0,s.jsx)("td",{className:"px-2 py-3 text-xs text-gray-900 dark:text-gray-100",children:p?(0,s.jsx)(x.Z,{name:"address",type:"text",value:b.address||"",onChange:D,className:"w-full text-xs"}):(0,s.jsx)("div",{className:"break-words",children:m.address||"-"})}),!m.hideSubscriptionInfo&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("td",{className:"px-2 py-3",children:(0,s.jsx)("span",{className:"px-2 py-1 text-xs font-semibold rounded-full bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200 inline-block",children:m.subscriptionPlan})}),(0,s.jsx)("td",{className:"px-2 py-3",children:(0,s.jsx)("span",{className:"px-2 py-1 text-xs font-semibold rounded-full inline-block ".concat("ACTIVE"===m.subscriptionStatus?"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200":"TRIAL"===m.subscriptionStatus?"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-200":"bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-200"),children:m.subscriptionStatus})}),(0,s.jsx)("td",{className:"px-2 py-3",children:(0,s.jsx)("span",{className:"px-2 py-1 text-xs font-semibold rounded-full inline-block ".concat(m.isActive?"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200":"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200"),children:m.isActive?"활성":"비활성"})})]}),(0,s.jsx)("td",{className:"px-2 py-3 text-xs text-gray-500 dark:text-gray-400",children:(0,s.jsx)("div",{className:"break-words",children:new Date(m.createdAt).toLocaleDateString()})})]})})]})}),p&&(0,s.jsx)("div",{className:"px-6 py-4 bg-gray-50 dark:bg-gray-700 border-t border-gray-200 dark:border-gray-600",children:(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsx)(i.Z,{onClick:C,className:"px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-md",children:"저장"}),(0,s.jsx)(i.Z,{onClick:()=>{y(!1),j(m)},className:"px-4 py-2 bg-gray-300 hover:bg-gray-400 text-gray-800 rounded-md",children:"취소"})]})})]}),(0,s.jsx)("div",{className:"md:hidden space-y-3",children:(0,s.jsxs)("div",{className:"rounded-lg border bg-white/50 dark:bg-white/5 p-4 space-y-3",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,s.jsx)("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"조직 정보"}),!p&&(0,s.jsx)(i.Z,{onClick:()=>y(!0),className:"px-3 py-1 text-sm bg-blue-600 hover:bg-blue-700 text-white rounded-md",children:"수정"})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 gap-2 text-sm",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{className:"text-gray-500",children:"\uD83C\uDFE2 기업명:"})," ",m.name]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{className:"text-gray-500",children:"\uD83D\uDCCB 사업자번호:"})," ",m.businessNumber||"-"]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{className:"text-gray-500",children:"\uD83C\uDD94 법인번호:"})," ",m.corporateNumber||"-"]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{className:"text-gray-500",children:"\uD83D\uDC64 대표자:"}),p?(0,s.jsx)(x.Z,{name:"representative",type:"text",value:b.representative||"",onChange:D,className:"w-full mt-1"}):" ".concat(m.representative||"-")]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{className:"text-gray-500",children:"\uD83D\uDCBC 업종:"}),p?(0,s.jsx)(x.Z,{name:"businessType",type:"text",value:b.businessType||"",onChange:D,className:"w-full mt-1"}):" ".concat(m.businessType||"-")]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{className:"text-gray-500",children:"\uD83C\uDFD7️ 설립일:"}),p?(0,s.jsx)(x.Z,{name:"establishedDate",type:"date",value:b.establishedDate?b.establishedDate.split("T")[0]:"",onChange:D,className:"w-full mt-1"}):" ".concat(m.establishedDate?new Date(m.establishedDate).toLocaleDateString():"-")]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{className:"text-gray-500",children:"\uD83D\uDCDE 전화:"}),p?(0,s.jsx)(x.Z,{name:"phone",type:"tel",value:b.phone||"",onChange:D,className:"w-full mt-1"}):" ".concat(m.phone||"-")]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{className:"text-gray-500",children:"\uD83D\uDCE7 이메일:"}),p?(0,s.jsx)(x.Z,{name:"email",type:"email",value:b.email||"",onChange:D,className:"w-full mt-1"}):" ".concat(m.email||"-")]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{className:"text-gray-500",children:"\uD83D\uDCE0 팩스:"}),p?(0,s.jsx)(x.Z,{name:"fax",type:"tel",value:b.fax||"",onChange:D,className:"w-full mt-1"}):" ".concat(m.fax||"-")]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{className:"text-gray-500",children:"\uD83C\uDF10 웹사이트:"}),p?(0,s.jsx)(x.Z,{name:"website",type:"url",value:b.website||"",onChange:D,className:"w-full mt-1"}):" ".concat(m.website||"-")]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{className:"text-gray-500",children:"\uD83D\uDCCD 주소:"}),p?(0,s.jsx)(x.Z,{name:"address",type:"text",value:b.address||"",onChange:D,className:"w-full mt-1"}):" ".concat(m.address||"-")]}),!m.hideSubscriptionInfo&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{className:"text-gray-500",children:"\uD83D\uDCB3 구독플랜:"}),(0,s.jsx)("span",{className:"ml-2 px-2 py-1 text-xs font-semibold rounded-full bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200",children:m.subscriptionPlan})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{className:"text-gray-500",children:"\uD83D\uDCCA 구독상태:"}),(0,s.jsx)("span",{className:"ml-2 px-2 py-1 text-xs font-semibold rounded-full ".concat("ACTIVE"===m.subscriptionStatus?"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200":"TRIAL"===m.subscriptionStatus?"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-200":"bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-200"),children:m.subscriptionStatus})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{className:"text-gray-500",children:"✅ 활성상태:"}),(0,s.jsx)("span",{className:"ml-2 px-2 py-1 text-xs font-semibold rounded-full ".concat(m.isActive?"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200":"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200"),children:m.isActive?"활성":"비활성"})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{className:"text-gray-500",children:"\uD83D\uDCC5 가입일:"})," ",new Date(m.createdAt).toLocaleDateString()]})]}),p&&(0,s.jsxs)("div",{className:"flex flex-col gap-2 pt-2",children:[(0,s.jsx)("button",{onClick:C,className:"w-full px-3 py-2 bg-blue-500 text-white hover:bg-blue-600 rounded text-sm",children:"저장"}),(0,s.jsx)("button",{onClick:()=>{y(!1),j(m)},className:"w-full px-3 py-2 bg-gray-500 text-white hover:bg-gray-600 rounded text-sm",children:"취소"})]})]})})]})]}):(0,s.jsx)("div",{className:"p-6",children:(0,s.jsx)("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:(0,s.jsx)("p",{className:"text-red-800",children:"조직 정보를 찾을 수 없습니다."})})})}},6334:function(e,t,a){"use strict";a.d(t,{Z:function(){return d}});var s=a(7437);a(2265);let r={primary:"bg-black text-white hover:bg-black/90 dark:bg-white dark:text-black dark:hover:bg-white/90",secondary:"border border-gray-300 text-gray-900 hover:bg-gray-50 dark:border-white/20 dark:text-white dark:hover:bg-white/10",ghost:"text-gray-700 hover:bg-gray-100 dark:text-gray-200 dark:hover:bg-white/10"},l={sm:"h-8 px-3 text-sm",md:"h-10 px-4 text-sm",lg:"h-11 px-5 text-base"};function d(e){let{variant:t="primary",size:a="md",className:d="",...n}=e;return(0,s.jsx)("button",{className:"".concat("inline-flex items-center justify-center rounded-md font-medium transition-colors focus:outline-none focus:ring-2 focus:ring-offset-2 disabled:opacity-50 disabled:pointer-events-none"," ").concat(r[t]," ").concat(l[a]," ").concat(d),...n})}},2827:function(e,t,a){"use strict";a.d(t,{Z:function(){return r}});var s=a(7437);function r(e){let{className:t="",...a}=e;return(0,s.jsx)("input",{className:"".concat("rounded-md border bg-transparent px-3 py-2 text-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:border-white/20"," ").concat(t),...a})}a(2265)}},function(e){e.O(0,[605,3448,3577,6475,2971,2117,1744],function(){return e(e.s=9981)}),_N_E=e.O()}]);