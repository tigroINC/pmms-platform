(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8427],{5420:function(e,s,t){Promise.resolve().then(t.bind(t,6764))},6764:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return c}});var a=t(7437),r=t(2265),l=t(605),n=t(9376),i=t(7648),d=t(4358);function c(){let{data:e,status:s}=(0,l.useSession)(),t=(0,n.useRouter)(),[c,x]=(0,r.useState)(null),[o,m]=(0,r.useState)(!0);(0,r.useEffect)(()=>{if("unauthenticated"===s)t.push("/login");else if("authenticated"===s){var a;"SUPER_ADMIN"!==(null==e?void 0:null===(a=e.user)||void 0===a?void 0:a.role)?t.push("/dashboard"):h()}},[s,e,t]);let h=async()=>{try{m(!0);let e=await fetch("/api/admin/dashboard/stats"),s=await e.json();e.ok&&x(s)}catch(e){}finally{m(!1)}};if(o||!c)return(0,a.jsx)("div",{className:"flex items-center justify-center min-h-screen",children:(0,a.jsx)("div",{className:"text-gray-500",children:"로딩 중..."})});let g=c.organizations.pending+c.customers.pending+c.users.pending;return(0,a.jsxs)("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900",children:[(0,a.jsx)(d.Z,{}),(0,a.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[(0,a.jsx)("div",{className:"mb-8",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:"대시보드"}),(0,a.jsx)("p",{className:"mt-2 text-sm text-gray-600 dark:text-gray-400",children:"전체 시스템 현황 및 관리 기능"})]}),g>0&&(0,a.jsxs)("div",{className:"flex items-center gap-2 px-4 py-2 bg-yellow-50 dark:bg-yellow-900/20 border-2 border-yellow-400 dark:border-yellow-600 rounded-lg",children:[(0,a.jsx)("div",{className:"w-2 h-2 bg-yellow-500 rounded-full animate-pulse"}),(0,a.jsxs)("span",{className:"text-sm font-semibold text-yellow-800 dark:text-yellow-200",children:["승인 대기 ",g,"건"]})]})]})}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-5 gap-6 mb-8",children:[(0,a.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-6",children:[(0,a.jsx)("div",{className:"mb-4",children:(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"환경측정기업"})}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsx)("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"전체"}),(0,a.jsx)("span",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:c.organizations.total})]}),(0,a.jsxs)("div",{className:"flex justify-between items-center text-sm",children:[(0,a.jsx)("span",{className:"text-yellow-600 dark:text-yellow-400",children:"승인 대기"}),(0,a.jsx)("span",{className:"font-semibold ".concat(c.organizations.pending>0?"text-yellow-600 dark:text-yellow-400 animate-pulse":"text-yellow-600 dark:text-yellow-400"),children:c.organizations.pending})]}),(0,a.jsxs)("div",{className:"flex justify-between items-center text-sm",children:[(0,a.jsx)("span",{className:"text-green-600 dark:text-green-400",children:"활성"}),(0,a.jsx)("span",{className:"font-semibold text-green-600 dark:text-green-400",children:c.organizations.active})]})]}),(0,a.jsx)(i.default,{href:"/admin/organizations",className:"mt-4 block w-full text-center px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-md transition-colors",children:"환경측정기업 관리"})]}),(0,a.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-6",children:[(0,a.jsx)("div",{className:"mb-4",children:(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"고객회사"})}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsx)("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"전체"}),(0,a.jsx)("span",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:c.customers.total})]}),(0,a.jsxs)("div",{className:"flex justify-between items-center text-sm",children:[(0,a.jsx)("span",{className:"text-yellow-600 dark:text-yellow-400",children:"승인 대기"}),(0,a.jsx)("span",{className:"font-semibold ".concat(c.customers.pending>0?"text-yellow-600 dark:text-yellow-400 animate-pulse":"text-yellow-600 dark:text-yellow-400"),children:c.customers.pending})]}),(0,a.jsxs)("div",{className:"flex justify-between items-center text-sm",children:[(0,a.jsx)("span",{className:"text-green-600 dark:text-green-400",children:"활성"}),(0,a.jsx)("span",{className:"font-semibold text-green-600 dark:text-green-400",children:c.customers.active})]})]}),(0,a.jsx)(i.default,{href:"/admin/customers",className:"mt-4 block w-full text-center px-4 py-2 bg-green-600 hover:bg-green-700 text-white rounded-md transition-colors",children:"고객회사 관리"})]}),(0,a.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-6",children:[(0,a.jsx)("div",{className:"mb-4",children:(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"사용자"})}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsx)("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"전체"}),(0,a.jsx)("span",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:c.users.total})]}),(0,a.jsxs)("div",{className:"flex justify-between items-center text-sm",children:[(0,a.jsx)("span",{className:"text-yellow-600 dark:text-yellow-400",children:"승인 대기"}),(0,a.jsx)("span",{className:"font-semibold ".concat(c.users.pending>0?"text-yellow-600 dark:text-yellow-400 animate-pulse":"text-yellow-600 dark:text-yellow-400"),children:c.users.pending})]}),(0,a.jsxs)("div",{className:"flex justify-between items-center text-sm",children:[(0,a.jsx)("span",{className:"text-green-600 dark:text-green-400",children:"활성"}),(0,a.jsx)("span",{className:"font-semibold text-green-600 dark:text-green-400",children:c.users.active})]})]}),(0,a.jsx)(i.default,{href:"/admin/users",className:"mt-4 block w-full text-center px-4 py-2 bg-purple-600 hover:bg-purple-700 text-white rounded-md transition-colors",children:"사용자 관리"})]}),(0,a.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-6",children:[(0,a.jsx)("div",{className:"mb-4",children:(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"역할 관리"})}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsx)("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"전체"}),(0,a.jsx)("span",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:c.roles.total})]}),(0,a.jsxs)("div",{className:"flex justify-between items-center text-sm",children:[(0,a.jsx)("span",{className:"text-green-600 dark:text-green-400",children:"활성"}),(0,a.jsx)("span",{className:"font-semibold text-green-600 dark:text-green-400",children:c.roles.active})]}),(0,a.jsxs)("div",{className:"flex justify-between items-center text-sm",children:[(0,a.jsx)("span",{className:"text-gray-600 dark:text-gray-400",children:"비활성"}),(0,a.jsx)("span",{className:"font-semibold text-gray-600 dark:text-gray-400",children:c.roles.inactive})]})]}),(0,a.jsx)(i.default,{href:"/admin/roles",className:"mt-4 block w-full text-center px-4 py-2 bg-indigo-600 hover:bg-indigo-700 text-white rounded-md transition-colors",children:"역할 관리"})]}),(0,a.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-6",children:[(0,a.jsx)("div",{className:"mb-4",children:(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"권한 관리"})}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsx)("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"커스텀 역할"}),(0,a.jsx)("span",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:c.permissions.usersWithCustomRoles})]}),(0,a.jsxs)("div",{className:"flex justify-between items-center text-sm",children:[(0,a.jsx)("span",{className:"text-blue-600 dark:text-blue-400",children:"기본 역할"}),(0,a.jsx)("span",{className:"font-semibold text-blue-600 dark:text-blue-400",children:c.permissions.usersWithDefaultRoles})]}),(0,a.jsxs)("div",{className:"flex justify-between items-center text-sm",children:[(0,a.jsx)("span",{className:"text-purple-600 dark:text-purple-400",children:"개별 권한"}),(0,a.jsx)("span",{className:"font-semibold text-purple-600 dark:text-purple-400",children:c.permissions.totalPermissions})]})]}),(0,a.jsx)(i.default,{href:"/admin/permissions",className:"mt-4 block w-full text-center px-4 py-2 bg-orange-600 hover:bg-orange-700 text-white rounded-md transition-colors",children:"권한 관리"})]})]}),(0,a.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-6",children:[(0,a.jsx)("h2",{className:"text-xl font-bold text-gray-900 dark:text-white mb-4",children:"최근 활동"}),c.recentActivities.length>0?(0,a.jsx)("div",{className:"space-y-3",children:c.recentActivities.map(e=>(0,a.jsx)("div",{className:"p-3 bg-gray-50 dark:bg-gray-700 rounded-lg",children:(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm font-medium text-gray-900 dark:text-white",children:e.action}),(0,a.jsx)("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:e.details}),(0,a.jsx)("p",{className:"text-xs text-gray-400 dark:text-gray-500 mt-1",children:new Date(e.createdAt).toLocaleString("ko-KR")})]})},e.id))}):(0,a.jsx)("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"최근 활동이 없습니다."})]})]})]})}},4358:function(e,s,t){"use strict";t.d(s,{Z:function(){return i}});var a=t(7437),r=t(605),l=t(9376),n=t(2265);function i(){var e,s;let{data:t}=(0,r.useSession)();(0,l.useRouter)();let[i,d]=(0,n.useState)(!1),c=(null==t?void 0:null===(e=t.user)||void 0===e?void 0:e.name)||"",x=(null==t?void 0:null===(s=t.user)||void 0===s?void 0:s.email)||"";return(0,a.jsx)("header",{className:"h-16 border-b border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-800 sticky top-0 z-40",children:(0,a.jsxs)("div",{className:"mx-auto h-full px-6 flex items-center justify-between",children:[(0,a.jsx)("div",{children:(0,a.jsx)("h1",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"시스템 관리자"})}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsxs)("button",{onClick:()=>d(!i),className:"flex items-center gap-2 px-3 py-2 rounded-md hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors",children:[(0,a.jsx)("div",{className:"w-8 h-8 rounded-full bg-purple-600 flex items-center justify-center text-white font-semibold",children:c.charAt(0).toUpperCase()}),(0,a.jsx)("span",{className:"text-sm font-medium text-gray-900 dark:text-white",children:c}),(0,a.jsx)("svg",{className:"w-4 h-4 text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),i&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"fixed inset-0 z-10",onClick:()=>d(!1)}),(0,a.jsxs)("div",{className:"absolute right-0 mt-2 w-56 bg-white dark:bg-gray-800 rounded-md shadow-lg border border-gray-200 dark:border-gray-700 z-20",children:[(0,a.jsxs)("div",{className:"px-4 py-3 border-b border-gray-200 dark:border-gray-700",children:[(0,a.jsx)("p",{className:"text-sm font-medium text-gray-900 dark:text-white",children:c}),(0,a.jsx)("p",{className:"text-xs text-gray-500 dark:text-gray-400 truncate",children:x})]}),(0,a.jsx)("div",{className:"py-1",children:(0,a.jsx)("button",{onClick:()=>{sessionStorage.removeItem("viewAsOrganization"),sessionStorage.removeItem("viewAsCustomer"),(0,r.signOut)({callbackUrl:"/login"})},className:"w-full text-left px-4 py-2 text-sm text-red-600 dark:text-red-400 hover:bg-gray-100 dark:hover:bg-gray-700",children:"로그아웃"})})]})]})]})]})})}}},function(e){e.O(0,[605,3448,2971,2117,1744],function(){return e(e.s=5420)}),_N_E=e.O()}]);