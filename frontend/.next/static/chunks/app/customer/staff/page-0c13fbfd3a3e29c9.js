(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[374],{3823:function(e,t,a){Promise.resolve().then(a.bind(a,7537))},7537:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return g}});var s=a(7437),r=a(2265),d=a(605),l=a(9376),i=a(7648),n=a(6334),x=a(2827),c=a(682);function g(){let{data:e,status:t}=(0,d.useSession)(),a=(0,l.useRouter)(),[g,o]=(0,r.useState)([]),[h,m]=(0,r.useState)(!0),[p,u]=(0,r.useState)(!1),[y,b]=(0,r.useState)(""),[j,f]=(0,r.useState)("ALL"),[N,k]=(0,r.useState)("ALL");(0,r.useEffect)(()=>{if("unauthenticated"===t){a.push("/login");return}if(null==e?void 0:e.user){let t=e.user.role;if("CUSTOMER_ADMIN"!==t&&"SUPER_ADMIN"!==t){a.push("/dashboard");return}v()}},[e,t,a]);let v=async()=>{try{m(!0);let e=new URLSearchParams({search:y,status:j,role:N}),t=await fetch("/api/customer/staff?".concat(e)),a=await t.json();t.ok?o(a.staff||[]):alert(a.error||"직원 목록을 불러오는데 실패했습니다.")}catch(e){alert("직원 목록을 불러오는데 실패했습니다.")}finally{m(!1)}};(0,r.useEffect)(()=>{(null==e?void 0:e.user)&&v()},[y,j,N]);let w=e=>(0,s.jsx)("span",{className:"px-2 py-1 rounded text-xs font-medium ".concat({CUSTOMER_ADMIN:"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200",CUSTOMER_USER:"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200"}[e]||"bg-gray-100 text-gray-800"),children:{CUSTOMER_ADMIN:"고객사 관리자",CUSTOMER_USER:"고객사 사용자"}[e]||e});return h?(0,s.jsx)("div",{className:"flex items-center justify-center min-h-screen",children:(0,s.jsx)("div",{className:"text-gray-500",children:"로딩 중..."})}):(0,s.jsxs)("section",{className:"space-y-3",children:[(0,s.jsxs)("div",{className:"rounded-lg border bg-white/50 dark:bg-white/5 p-2.5",children:[(0,s.jsx)("h1",{className:"text-lg font-semibold mb-2",children:"직원 관리"}),(0,s.jsxs)("div",{className:"flex flex-wrap items-end gap-2",children:[(0,s.jsxs)("div",{className:"flex flex-col",children:[(0,s.jsx)("label",{className:"text-xs text-gray-600 dark:text-gray-400 mb-0.5",children:"검색"}),(0,s.jsx)(x.Z,{className:"text-sm h-8",style:{width:"352px",minWidth:"352px"},type:"text",placeholder:"이름, 이메일 검색",value:y,onChange:e=>b(e.target.value)})]}),(0,s.jsxs)("div",{className:"flex flex-col",children:[(0,s.jsx)("label",{className:"text-xs text-gray-600 dark:text-gray-400 mb-0.5",children:"상태"}),(0,s.jsxs)("select",{value:j,onChange:e=>f(e.target.value),className:"text-sm h-8 border border-gray-300 dark:border-gray-600 rounded-md px-3 bg-white dark:bg-gray-700 text-gray-900 dark:text-white",children:[(0,s.jsx)("option",{value:"ALL",children:"전체"}),(0,s.jsx)("option",{value:"ACTIVE",children:"활성"}),(0,s.jsx)("option",{value:"INACTIVE",children:"비활성"})]})]}),(0,s.jsxs)("div",{className:"flex flex-col",children:[(0,s.jsx)("label",{className:"text-xs text-gray-600 dark:text-gray-400 mb-0.5",children:"역할"}),(0,s.jsxs)("select",{value:N,onChange:e=>k(e.target.value),className:"text-sm h-8 border border-gray-300 dark:border-gray-600 rounded-md px-3 bg-white dark:bg-gray-700 text-gray-900 dark:text-white",children:[(0,s.jsx)("option",{value:"ALL",children:"전체"}),(0,s.jsx)("option",{value:"CUSTOMER_ADMIN",children:"고객사 관리자"}),(0,s.jsx)("option",{value:"CUSTOMER_USER",children:"고객사 사용자"})]})]}),(0,s.jsx)("div",{className:"flex gap-1.5 mb-1.5 ml-auto",children:(0,s.jsx)(n.Z,{size:"sm",onClick:()=>u(!0),children:"+ 직원 초대"})})]})]}),(0,s.jsx)("div",{className:"hidden md:block rounded-lg border overflow-x-auto max-h-[calc(100vh-180px)] overflow-y-auto",children:(0,s.jsxs)("table",{className:"min-w-full divide-y divide-gray-200 dark:divide-gray-700",children:[(0,s.jsx)("thead",{className:"bg-gray-50 dark:bg-white/10 sticky top-0 z-10",children:(0,s.jsxs)("tr",{children:[(0,s.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase bg-gray-50 dark:bg-gray-800",children:"이름"}),(0,s.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase bg-gray-50 dark:bg-gray-800",children:"이메일"}),(0,s.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase bg-gray-50 dark:bg-gray-800",children:"역할"}),(0,s.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase bg-gray-50 dark:bg-gray-800",children:"부서/직급"}),(0,s.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase bg-gray-50 dark:bg-gray-800",children:"상태"}),(0,s.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase bg-gray-50 dark:bg-gray-800",children:"최근 로그인"}),(0,s.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase bg-gray-50 dark:bg-gray-800",children:"액션"})]})}),(0,s.jsx)("tbody",{className:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700",children:0===g.length?(0,s.jsx)("tr",{children:(0,s.jsx)("td",{colSpan:7,className:"px-6 py-4 text-center text-gray-500 dark:text-gray-400",children:"직원이 없습니다."})}):g.map(e=>(0,s.jsxs)("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-700",children:[(0,s.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,s.jsx)("div",{className:"text-sm font-medium text-gray-900 dark:text-white",children:e.name})}),(0,s.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,s.jsx)("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:e.email})}),(0,s.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:w(e.role)}),(0,s.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400",children:e.department&&e.position?"".concat(e.department," / ").concat(e.position):e.department||e.position||"-"}),(0,s.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,s.jsx)("span",{className:"px-2 py-1 rounded text-xs font-medium ".concat(e.isActive?"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200":"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200"),children:e.isActive?"활성":"비활성"})}),(0,s.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400",children:e.lastLoginAt?new Date(e.lastLoginAt).toLocaleDateString("ko-KR"):"없음"}),(0,s.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:(0,s.jsx)(i.default,{href:"/customer/staff/".concat(e.id),className:"text-blue-600 hover:text-blue-900 dark:text-blue-400 dark:hover:text-blue-300",children:"상세"})})]},e.id))})]})}),(0,s.jsx)("div",{className:"md:hidden space-y-3",children:0===g.length?(0,s.jsx)("div",{className:"rounded-lg border bg-white/50 dark:bg-white/5 p-6 text-center text-gray-500",children:"직원이 없습니다."}):g.map(e=>(0,s.jsxs)("div",{className:"rounded-lg border bg-white/50 dark:bg-white/5 p-4 space-y-2",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,s.jsx)("div",{className:"font-medium text-lg",children:e.name}),(0,s.jsx)("span",{className:"px-2 py-1 rounded text-xs font-medium ".concat(e.isActive?"bg-green-100 text-green-800":"bg-red-100 text-red-800"),children:e.isActive?"활성":"비활성"})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 gap-2 text-sm",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{className:"text-gray-500",children:"\uD83D\uDCE7 이메일:"})," ",e.email]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{className:"text-gray-500",children:"\uD83C\uDFF7️ 역할:"})," ",w(e.role)]}),(e.department||e.position)&&(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{className:"text-gray-500",children:"\uD83C\uDFE2 부서/직급:"})," ",e.department&&e.position?"".concat(e.department," / ").concat(e.position):e.department||e.position]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{className:"text-gray-500",children:"\uD83D\uDD51 최근 로그인:"})," ",e.lastLoginAt?new Date(e.lastLoginAt).toLocaleDateString("ko-KR"):"없음"]}),(0,s.jsx)("div",{className:"pt-2",children:(0,s.jsx)(i.default,{href:"/customer/staff/".concat(e.id),className:"block w-full px-3 py-2 bg-blue-500 text-white hover:bg-blue-600 rounded text-sm text-center",children:"상세"})})]})]},e.id))}),p&&(0,s.jsx)(c.Z,{isOpen:p,onClose:()=>u(!1),onSuccess:()=>{u(!1),v()},userType:"customer"})]})}}},function(e){e.O(0,[605,3448,682,2971,2117,1744],function(){return e(e.s=3823)}),_N_E=e.O()}]);