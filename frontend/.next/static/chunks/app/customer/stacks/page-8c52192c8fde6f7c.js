(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7044],{3977:function(e,t,a){Promise.resolve().then(a.bind(a,8746))},9205:function(e,t,a){"use strict";a.d(t,{Z:function(){return x}});var s=a(2265);let r=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),l=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,a)=>a?a.toUpperCase():t.toLowerCase()),i=e=>{let t=l(e);return t.charAt(0).toUpperCase()+t.slice(1)},n=function(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return t.filter((e,t,a)=>!!e&&""!==e.trim()&&a.indexOf(e)===t).join(" ").trim()},d=e=>{for(let t in e)if(t.startsWith("aria-")||"role"===t||"title"===t)return!0};var c={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let o=(0,s.forwardRef)((e,t)=>{let{color:a="currentColor",size:r=24,strokeWidth:l=2,absoluteStrokeWidth:i,className:o="",children:x,iconNode:m,...u}=e;return(0,s.createElement)("svg",{ref:t,...c,width:r,height:r,stroke:a,strokeWidth:i?24*Number(l)/Number(r):l,className:n("lucide",o),...!x&&!d(u)&&{"aria-hidden":"true"},...u},[...m.map(e=>{let[t,a]=e;return(0,s.createElement)(t,a)}),...Array.isArray(x)?x:[x]])}),x=(e,t)=>{let a=(0,s.forwardRef)((a,l)=>{let{className:d,...c}=a;return(0,s.createElement)(o,{ref:l,iconNode:t,className:n("lucide-".concat(r(i(e))),"lucide-".concat(e),d),...c})});return a.displayName=i(e),a}},5685:function(e,t,a){"use strict";a.d(t,{Z:function(){return s}});let s=(0,a(9205).Z)("circle-question-mark",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]])},9376:function(e,t,a){"use strict";var s=a(5475);a.o(s,"useParams")&&a.d(t,{useParams:function(){return s.useParams}}),a.o(s,"usePathname")&&a.d(t,{usePathname:function(){return s.usePathname}}),a.o(s,"useRouter")&&a.d(t,{useRouter:function(){return s.useRouter}}),a.o(s,"useSearchParams")&&a.d(t,{useSearchParams:function(){return s.useSearchParams}})},8746:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return x}});var s=a(7437),r=a(2265),l=a(9376),i=a(6334),n=a(5685),d=a(2827);function c(e){let{isOpen:t,onClose:a,onSelect:l,currentOrgId:n}=e,[c,o]=(0,r.useState)([]),[x,m]=(0,r.useState)([]),[u,h]=(0,r.useState)(""),[g,p]=(0,r.useState)(null),[y,v]=(0,r.useState)(!1);(0,r.useEffect)(()=>{t&&j()},[t]),(0,r.useEffect)(()=>{u?m(c.filter(e=>{var t;return e.name.toLowerCase().includes(u.toLowerCase())||(null===(t=e.businessNumber)||void 0===t?void 0:t.includes(u))})):m(c)},[u,c]);let j=async()=>{try{v(!0);let e=await fetch("/api/organizations"),t=await e.json();o(t.data||[]),m(t.data||[])}catch(e){}finally{v(!1)}};return t?(0,s.jsx)("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",onClick:a,children:(0,s.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg w-full max-w-2xl max-h-[80vh] flex flex-col",onClick:e=>e.stopPropagation(),children:[(0,s.jsx)("div",{className:"px-6 py-4 border-b dark:border-gray-700",children:(0,s.jsx)("h2",{className:"text-xl font-bold",children:"환경측정기업 선택"})}),(0,s.jsx)("div",{className:"px-6 py-4 border-b dark:border-gray-700",children:(0,s.jsx)(d.Z,{placeholder:"기업명 또는 사업자번호로 검색...",value:u,onChange:e=>h(e.target.value)})}),(0,s.jsx)("div",{className:"flex-1 overflow-y-auto px-6 py-4",children:y?(0,s.jsx)("div",{className:"text-center py-8 text-gray-500",children:"로딩 중..."}):0===x.length?(0,s.jsx)("div",{className:"text-center py-8 text-gray-500",children:"검색 결과가 없습니다."}):(0,s.jsx)("div",{className:"space-y-2",children:x.map(e=>(0,s.jsx)("div",{className:"p-4 border rounded-lg cursor-pointer transition-colors ".concat((null==g?void 0:g.id)===e.id?"border-blue-500 bg-blue-50 dark:bg-blue-900/20":"border-gray-200 dark:border-gray-700 hover:border-gray-300 dark:hover:border-gray-600"," ").concat(n===e.id?"bg-gray-100 dark:bg-gray-700":""),onClick:()=>p(e),children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"font-medium",children:e.name}),e.businessNumber&&(0,s.jsxs)("div",{className:"text-sm text-gray-500",children:["사업자번호: ",e.businessNumber]})]}),n===e.id&&(0,s.jsx)("span",{className:"text-xs px-2 py-1 bg-gray-200 dark:bg-gray-600 rounded",children:"현재"})]})},e.id))})}),(0,s.jsxs)("div",{className:"px-6 py-4 border-t dark:border-gray-700 flex gap-2 justify-end",children:[(0,s.jsx)(i.Z,{variant:"secondary",onClick:a,children:"취소"}),(0,s.jsx)(i.Z,{onClick:()=>{g&&(l(g),a())},disabled:!g,children:"확인"})]})]})}):null}var o=a(2397);function x(){let{user:e,loading:t}=function(e){let{user:t,loading:a}=(0,o.a)(),s=(0,l.useRouter)(),i=(0,l.usePathname)();return(0,r.useEffect)(()=>{if(!a){if(!t){let e=encodeURIComponent(i||"/dashboard");s.push("/login?callbackUrl=".concat(e));return}if(!e.allowedRoles.includes(t.role)){if(e.onUnauthorized)e.onUnauthorized();else{let t=e.redirectTo||"/dashboard";s.push(t)}}}},[t,a,i,s,e.allowedRoles,e.redirectTo,e.onUnauthorized]),{user:t,loading:a,hasPermission:!!t&&e.allowedRoles.includes(t.role)}}((0,r.useMemo)(()=>({allowedRoles:["SUPER_ADMIN","CUSTOMER_ADMIN","CUSTOMER_USER"],redirectTo:"/dashboard"}),[])),a=(0,l.useRouter)(),[d,x]=(0,r.useState)("confirmed"),[m,u]=(0,r.useState)([]),[h,g]=(0,r.useState)([]),[p,y]=(0,r.useState)(new Set),[v,j]=(0,r.useState)(!0),[f,N]=(0,r.useState)(""),[b,k]=(0,r.useState)(!1),[w,C]=(0,r.useState)(null),[D,S]=(0,r.useState)(null),[T,z]=(0,r.useState)(!1),[A,L]=(0,r.useState)(null),[E,I]=(0,r.useState)(!1);(0,r.useEffect)(()=>{!t&&e&&(R(),P())},[e,t]),(0,r.useEffect)(()=>{e&&("pending"===d?R():"confirmed"===d&&P())},[d]);let R=async()=>{try{let e=await fetch("/api/customer/stacks/pending-review"),t=await e.json();u(t.stacks||[])}catch(e){}},P=async()=>{try{let e=await fetch("/api/stacks"),t=((await e.json()).data||[]).filter(e=>e.isActive);g(t)}catch(e){}},F=e=>{let t=new Set(p);t.has(e)?t.delete(e):t.add(e),y(t)},O=async e=>{if(confirm("이 굴뚝을 확인 완료하시겠습니까?\n\n확인 완료 후 전체 탭에서 계속 표시되며, 검토대기 탭에서는 사라집니다."))try{let t=await fetch("/api/customer/stacks/".concat(e,"/verify"),{method:"POST",headers:{"Content-Type":"application/json"}}),a=await t.json();t.ok?(alert(a.message||"확인 완료되었습니다."),R(),P()):alert(a.error||"확인 실패")}catch(e){alert("오류가 발생했습니다.")}},_=async()=>{if(0===p.size){alert("확인할 굴뚝을 선택해주세요.");return}if(confirm("선택한 ".concat(p.size,"개 굴뚝을 일괄 확인 완료하시겠습니까?\n\n확인 완료 후 전체 탭에서 계속 표시되며, 검토대기 탭에서는 사라집니다.")))try{let e=Array.from(p),t=0,a=0;for(let s of e)(await fetch("/api/customer/stacks/".concat(s,"/verify"),{method:"POST",headers:{"Content-Type":"application/json"}})).ok?t++:a++;alert("완료: ".concat(t,"건 성공, ").concat(a,"건 실패")),y(new Set),R(),P()}catch(e){alert("오류가 발생했습니다.")}},M=e=>{var t,a,s,r,l,i,n,d,c,o,x;C(e.stackId||e.id),S({code:(null===(t=e.internal)||void 0===t?void 0:t.code)||e.code||"",fullName:(null===(a=e.site)||void 0===a?void 0:a.name)||e.fullName||"",facilityType:e.facilityType||"",category:e.category||"",location:(null===(s=e.physical)||void 0===s?void 0:s.location)||e.location||"",height:(null===(r=e.physical)||void 0===r?void 0:r.height)||e.height||"",diameter:(null===(l=e.physical)||void 0===l?void 0:l.diameter)||e.diameter||"",organizationId:(null===(n=e.internal)||void 0===n?void 0:null===(i=n.organization)||void 0===i?void 0:i.id)||(null===(d=e.organizationNames)||void 0===d?void 0:d[0])||"",organizationName:(null===(o=e.internal)||void 0===o?void 0:null===(c=o.organization)||void 0===c?void 0:c.name)||(null===(x=e.organizationNames)||void 0===x?void 0:x[0])||""})},U=()=>{C(null),S(null),L(null)},Z=async e=>{if(!D)return;let t=prompt("수정 사유를 입력하세요:");if(t)try{let a=await fetch("/api/stacks/".concat(e),{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({code:D.code,fullName:D.fullName,facilityType:D.facilityType,category:D.category,location:D.location,height:D.height?parseFloat(D.height):null,diameter:D.diameter?parseFloat(D.diameter):null,changeReason:t})});if(a.ok)A&&A.id!==D.organizationId&&await W(e,A.id),alert("저장되었습니다."),U(),R(),P();else{let e=await a.json();alert(e.error||"저장 실패")}}catch(e){alert("오류가 발생했습니다.")}},W=async(e,t)=>{try{let a=await fetch("/api/stacks/".concat(e,"/change-organization"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({organizationId:t})});if(!a.ok){let e=await a.json();throw Error(e.error)}}catch(e){throw e}},B=async e=>{if(confirm("이 굴뚝을 비활성화하시겠습니까?\n비활성화된 굴뚝은 '비활성화 보기'를 체크해야 표시됩니다."))try{let t=await fetch("/api/stacks/".concat(e,"/deactivate"),{method:"POST"});if(t.ok)alert("비활성화되었습니다."),R(),P();else{let e=await t.json();alert(e.error||"비활성화 실패")}}catch(e){alert("오류가 발생했습니다.")}},K=async e=>{if(confirm("이 굴뚝을 활성화하시겠습니까?"))try{let t=await fetch("/api/stacks/".concat(e,"/activate"),{method:"POST"});if(t.ok)alert("활성화되었습니다."),R(),P();else{let e=await t.json();alert(e.error||"활성화 실패")}}catch(e){alert("오류가 발생했습니다.")}},Q=async(e,t)=>{if(t>0){alert("측정 데이터가 있는 굴뚝은 삭제할 수 없습니다.\n먼저 관련 측정 데이터를 삭제해주세요.");return}if(confirm("이 굴뚝을 완전히 삭제하시겠습니까?\n이 작업은 되돌릴 수 없습니다."))try{let t=await fetch("/api/stacks/".concat(e),{method:"DELETE"});if(t.ok)alert("삭제되었습니다."),R(),P();else{let e=await t.json();alert(e.error||"삭제 실패")}}catch(e){alert("오류가 발생했습니다.")}};return(0,s.jsxs)("section",{className:"space-y-3",children:[(0,s.jsx)("div",{className:"rounded-lg border bg-white/50 dark:bg-white/5 p-2.5",children:(0,s.jsxs)("div",{className:"flex flex-wrap items-end gap-2",children:[(0,s.jsx)("h1",{className:"text-lg font-semibold whitespace-nowrap mb-1.5",children:"굴뚝 관리"}),(0,s.jsx)("span",{className:"text-gray-300 dark:text-gray-600 mb-1.5",children:"|"}),(0,s.jsxs)("div",{className:"flex gap-2 mb-1.5",children:[(0,s.jsxs)("button",{onClick:()=>x("confirmed"),className:"px-3 py-1 rounded text-sm font-medium transition-colors ".concat("confirmed"===d?"bg-blue-600 text-white":"bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600"),children:["전체 (",h.length,")"]}),(0,s.jsxs)("button",{onClick:()=>x("pending"),className:"px-3 py-1 rounded text-sm font-medium transition-colors ".concat("pending"===d?"bg-blue-600 text-white":"bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600"),children:["검토대기 (",m.length,")"]})]}),(0,s.jsxs)("div",{className:"flex flex-col",style:{minWidth:"280px"},children:[(0,s.jsx)("label",{className:"text-xs text-gray-600 dark:text-gray-400 mb-0.5",children:"검색"}),(0,s.jsx)("input",{type:"text",placeholder:"굴뚝번호, 코드, 명칭...",value:f,onChange:e=>N(e.target.value),className:"text-sm h-8 px-3 border rounded dark:bg-gray-800 dark:border-gray-700"})]}),"confirmed"===d&&(0,s.jsxs)("label",{className:"flex items-center gap-2 text-sm mb-1.5",children:[(0,s.jsx)("input",{type:"checkbox",checked:E,onChange:e=>I(e.target.checked),className:"w-4 h-4"}),"비활성화 보기"]}),(0,s.jsxs)("div",{className:"flex gap-2 ml-auto mb-1.5",children:[(0,s.jsx)(i.Z,{size:"sm",variant:"secondary",onClick:()=>{let e=new Blob(["\uFEFF"+[["굴뚝번호","굴뚝코드","정식명칭","배출시설종류","높이(m)","안지름(m)","종별","확인상태","담당환경측정회사","생성일"],...("pending"===d?m:h).map(e=>{var t,a,s,r,l,i,n,c;return["pending"===d?(null===(t=e.site)||void 0===t?void 0:t.code)||"":e.name||"","pending"===d?(null===(a=e.internal)||void 0===a?void 0:a.code)||"":e.code||"","pending"===d?(null===(s=e.site)||void 0===s?void 0:s.name)||"":e.fullName||"",e.facilityType||"","pending"===d?(null===(r=e.physical)||void 0===r?void 0:r.height)||"":e.height||"","pending"===d?(null===(l=e.physical)||void 0===l?void 0:l.diameter)||"":e.diameter||"",e.category||"","pending"===d?"확인필요":e.isVerified?"확인완료":"확인필요","pending"===d?(null===(n=e.internal)||void 0===n?void 0:null===(i=n.organization)||void 0===i?void 0:i.name)||"":(null===(c=e.organizationNames)||void 0===c?void 0:c.join(", "))||"",new Date(e.createdAt).toLocaleDateString("ko-KR",{year:"numeric",month:"2-digit",day:"2-digit"}).replace(/\. /g,"-").replace(".","")]})].map(e=>e.map(e=>'"'.concat(String(null!=e?e:"").replace(/"/g,'""'),'"')).join(",")).join("\n")],{type:"text/csv;charset=utf-8;"}),t=URL.createObjectURL(e),a=document.createElement("a");a.href=t,a.download="굴뚝목록_".concat("pending"===d?"검토대기":"전체","_").concat(new Date().toISOString().slice(0,10),".csv"),document.body.appendChild(a),a.click(),document.body.removeChild(a),URL.revokeObjectURL(t)},children:"Excel"}),"pending"===d&&(null==e?void 0:e.role)==="CUSTOMER_ADMIN"&&(0,s.jsxs)(i.Z,{size:"sm",onClick:_,disabled:0===p.size,children:["일괄확인완료 ",p.size>0&&"(".concat(p.size,")")]}),(0,s.jsxs)(i.Z,{variant:"secondary",size:"sm",onClick:()=>k(!0),children:[(0,s.jsx)(n.Z,{className:"w-4 h-4 mr-1"}),"도움말"]}),(0,s.jsx)(i.Z,{size:"sm",onClick:()=>a.push("/customer/stacks/create"),children:"+ 굴뚝 직접 등록"})]})]})}),b&&(0,s.jsx)("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",onClick:()=>k(!1),children:(0,s.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-6 max-w-2xl max-h-[80vh] overflow-y-auto",onClick:e=>e.stopPropagation(),children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,s.jsx)("h2",{className:"text-xl font-bold",children:"굴뚝 관리 도움말"}),(0,s.jsx)("button",{onClick:()=>k(!1),className:"text-gray-500 hover:text-gray-700",children:"✕"})]}),(0,s.jsxs)("div",{className:"space-y-6 text-sm",children:[(0,s.jsxs)("section",{children:[(0,s.jsx)("h3",{className:"font-semibold text-base mb-2",children:"\uD83D\uDCCB 메뉴 개요"}),(0,s.jsx)("p",{className:"text-gray-600 dark:text-gray-400",children:"자사의 모든 굴뚝 정보를 조회하고 관리할 수 있는 메뉴입니다. 환경측정기업이 등록한 굴뚝을 검토하거나, 직접 굴뚝을 등록할 수 있습니다."})]}),(0,s.jsxs)("section",{children:[(0,s.jsx)("h3",{className:"font-semibold text-base mb-2",children:"\uD83D\uDCD1 탭 설명"}),(0,s.jsxs)("div",{className:"space-y-3",children:[(0,s.jsxs)("div",{className:"border-l-4 border-blue-500 pl-3",children:[(0,s.jsx)("h4",{className:"font-medium mb-1",children:"전체 굴뚝"}),(0,s.jsxs)("ul",{className:"list-disc list-inside text-gray-600 dark:text-gray-400 space-y-1",children:[(0,s.jsx)("li",{children:"자사의 모든 활성화된 굴뚝 목록을 확인할 수 있습니다"}),(0,s.jsx)("li",{children:"검색 기능으로 굴뚝번호, 코드, 명칭, 배출시설종류로 검색 가능합니다"}),(0,s.jsx)("li",{children:"각 굴뚝의 측정 건수와 생성일을 확인할 수 있습니다"}),(0,s.jsx)("li",{children:"확인 상태(확인완료/확인필요)를 표시하며, 확인필요 항목이 우선 정렬됩니다"}),(0,s.jsxs)("li",{children:[(0,s.jsx)("strong",{children:"관리자"}),'는 "수정" 버튼으로 굴뚝 정보를 인라인 편집할 수 있습니다']}),(0,s.jsxs)("li",{children:[(0,s.jsx)("strong",{children:"관리자"}),"는 담당 환경측정기업을 변경할 수 있습니다"]}),(0,s.jsxs)("li",{children:[(0,s.jsx)("strong",{children:"관리자"}),"는 굴뚝을 비활성화하거나 영구 삭제할 수 있습니다"]}),(0,s.jsx)("li",{children:"Excel 버튼으로 목록을 다운로드할 수 있습니다"})]})]}),(0,s.jsxs)("div",{className:"border-l-4 border-orange-500 pl-3",children:[(0,s.jsx)("h4",{className:"font-medium mb-1",children:"검토 대기"}),(0,s.jsxs)("ul",{className:"list-disc list-inside text-gray-600 dark:text-gray-400 space-y-1",children:[(0,s.jsx)("li",{children:"환경측정기업이 등록한 굴뚝 중 아직 확인하지 않은 목록입니다"}),(0,s.jsx)("li",{children:"검색 기능으로 빠르게 찾을 수 있습니다"}),(0,s.jsxs)("li",{children:["정보를 검토한 후 ",(0,s.jsx)("strong",{children:'"확인완료"'})," 버튼을 클릭하여 승인할 수 있습니다"]}),(0,s.jsx)("li",{children:"여러 굴뚝을 선택하여 일괄 확인 처리가 가능합니다"}),(0,s.jsx)("li",{children:'확인 완료된 굴뚝은 "전체 굴뚝" 탭으로 이동하며, 담당 환경측정기업에 알림이 전송됩니다'}),(0,s.jsx)("li",{children:"Excel 버튼으로 검토대기 목록을 다운로드할 수 있습니다"})]})]})]})]}),(0,s.jsxs)("section",{children:[(0,s.jsx)("h3",{className:"font-semibold text-base mb-2",children:"➕ 굴뚝 직접 등록"}),(0,s.jsxs)("div",{className:"space-y-2 text-gray-600 dark:text-gray-400",children:[(0,s.jsx)("p",{children:'우측 상단의 "+ 굴뚝 직접 등록" 버튼을 클릭하여 새로운 굴뚝을 등록할 수 있습니다.'}),(0,s.jsxs)("div",{className:"bg-blue-50 dark:bg-blue-900/20 p-3 rounded",children:[(0,s.jsx)("p",{className:"font-medium text-blue-900 dark:text-blue-300 mb-2",children:"필수 입력 항목:"}),(0,s.jsxs)("ul",{className:"list-disc list-inside space-y-1",children:[(0,s.jsxs)("li",{children:[(0,s.jsx)("strong",{children:"현장 코드"}),": 자사에서 사용하는 굴뚝 코드 (예: S-001)"]}),(0,s.jsxs)("li",{children:[(0,s.jsx)("strong",{children:"현장 명칭"}),": 굴뚝의 명칭 (예: 1호 소각로)"]})]})]}),(0,s.jsxs)("div",{className:"bg-gray-50 dark:bg-gray-900/20 p-3 rounded",children:[(0,s.jsx)("p",{className:"font-medium text-gray-900 dark:text-gray-300 mb-2",children:"선택 입력 항목:"}),(0,s.jsx)("ul",{className:"list-disc list-inside space-y-1",children:(0,s.jsx)("li",{children:"배출시설 종류, 높이, 안지름, 종별 등"})})]}),(0,s.jsx)("p",{className:"text-sm italic",children:"\uD83D\uDCA1 직접 등록한 굴뚝은 즉시 활성화되어 측정 데이터 입력이 가능합니다."})]})]}),(0,s.jsxs)("section",{children:[(0,s.jsx)("h3",{className:"font-semibold text-base mb-2",children:"✏️ 굴뚝 정보 수정"}),(0,s.jsxs)("div",{className:"space-y-2 text-gray-600 dark:text-gray-400",children:[(0,s.jsx)("p",{children:'전체 굴뚝 탭에서 "수정" 버튼을 클릭하여 굴뚝 정보를 수정할 수 있습니다.'}),(0,s.jsxs)("div",{className:"bg-green-50 dark:bg-green-900/20 p-3 rounded",children:[(0,s.jsx)("p",{className:"font-medium text-green-900 dark:text-green-300 mb-2",children:"수정 가능 항목:"}),(0,s.jsxs)("ul",{className:"list-disc list-inside space-y-1",children:[(0,s.jsx)("li",{children:"굴뚝 코드, 정식 명칭, 배출시설 종류, 종별"}),(0,s.jsx)("li",{children:"높이, 안지름"})]})]}),(0,s.jsxs)("p",{className:"text-sm italic",children:["⚠️ 수정 시 반드시 ",(0,s.jsx)("strong",{children:"수정 사유"}),"를 입력해야 하며, 모든 수정 이력이 자동으로 기록됩니다."]}),(0,s.jsx)("p",{className:"text-sm italic",children:"\uD83D\uDCCC 굴뚝번호는 환경측정기업 전용 필드로 수정할 수 없습니다."})]})]}),(0,s.jsxs)("section",{children:[(0,s.jsx)("h3",{className:"font-semibold text-base mb-2",children:"\uD83D\uDD14 알림 기능"}),(0,s.jsx)("div",{className:"space-y-2 text-gray-600 dark:text-gray-400",children:(0,s.jsxs)("ul",{className:"list-disc list-inside space-y-1",children:[(0,s.jsx)("li",{children:"환경측정기업이 굴뚝을 등록하거나 수정하면 실시간 알림을 받습니다"}),(0,s.jsx)("li",{children:"고객사가 굴뚝 정보를 수정하면 담당 환경측정기업에게 알림이 전송됩니다"}),(0,s.jsx)("li",{children:"굴뚝 확인 완료 시 담당 환경측정기업에게 알림이 전송됩니다"}),(0,s.jsx)("li",{children:"우측 상단 알림 아이콘에서 확인할 수 있습니다"})]})})]}),(0,s.jsxs)("section",{children:[(0,s.jsx)("h3",{className:"font-semibold text-base mb-2",children:"❓ 자주 묻는 질문"}),(0,s.jsxs)("div",{className:"space-y-3",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"font-medium",children:"Q. 굴뚝 정보에 오류가 있으면 어떻게 하나요?"}),(0,s.jsx)("p",{className:"text-gray-600 dark:text-gray-400 text-sm mt-1",children:'A. "수정" 버튼을 클릭하여 직접 수정할 수 있습니다. 수정 사유를 입력하면 담당 환경측정기업에게 알림이 전송됩니다.'})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"font-medium",children:"Q. 검토 대기 중인 굴뚝은 측정이 가능한가요?"}),(0,s.jsx)("p",{className:"text-gray-600 dark:text-gray-400 text-sm mt-1",children:"A. 네, 가능합니다. 활성화된 모든 굴뚝은 검토 여부와 관계없이 측정 데이터 입력이 가능합니다."})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"font-medium",children:"Q. 확인완료 버튼은 무엇인가요?"}),(0,s.jsx)("p",{className:"text-gray-600 dark:text-gray-400 text-sm mt-1",children:"A. 굴뚝 정보를 확인했음을 표시하는 기능입니다. 측정 가능 여부와는 무관하며, 정보 확인 여부만 표시합니다."})]})]})]})]}),(0,s.jsx)("div",{className:"mt-6 flex justify-end",children:(0,s.jsx)(i.Z,{onClick:()=>k(!1),children:"닫기"})})]})}),"pending"===d&&(0,s.jsx)(s.Fragment,{children:0===m.length?(0,s.jsx)("div",{className:"text-center py-12 bg-gray-50 dark:bg-gray-800 rounded-lg",children:(0,s.jsx)("p",{className:"text-gray-600 dark:text-gray-400",children:"검토가 필요한 굴뚝이 없습니다."})}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{className:"hidden md:block overflow-x-auto max-h-[calc(100vh-200px)] overflow-y-auto",children:(0,s.jsxs)("table",{className:"min-w-full divide-y divide-gray-200 dark:divide-gray-700",children:[(0,s.jsx)("thead",{className:"bg-gray-50 dark:bg-gray-800 sticky top-0 z-10",children:(0,s.jsxs)("tr",{children:[(0,s.jsx)("th",{className:"px-4 py-3 text-center text-xs font-medium text-gray-500 dark:text-gray-400 uppercase",children:(0,s.jsx)("input",{type:"checkbox",checked:p.size===m.length&&m.length>0,onChange:e=>{e.target.checked?y(new Set(m.map(e=>e.stackId))):y(new Set)},className:"h-4 w-4"})}),(0,s.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase",children:"굴뚝번호"}),(0,s.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase",children:"굴뚝코드"}),(0,s.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase",children:"정식명칭"}),(0,s.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase",children:"배출시설종류"}),(0,s.jsx)("th",{className:"px-4 py-3 text-center text-xs font-medium text-gray-500 dark:text-gray-400 uppercase",children:"높이(m)"}),(0,s.jsx)("th",{className:"px-4 py-3 text-center text-xs font-medium text-gray-500 dark:text-gray-400 uppercase",children:"안지름(m)"}),(0,s.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase",children:"종별"}),(0,s.jsx)("th",{className:"px-4 py-3 text-center text-xs font-medium text-gray-500 dark:text-gray-400 uppercase",children:"확인 상태"}),(0,s.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase",children:"담당환경측정회사"}),(0,s.jsx)("th",{className:"px-4 py-3 text-center text-xs font-medium text-gray-500 dark:text-gray-400 uppercase",children:"생성일"}),(null==e?void 0:e.role)==="CUSTOMER_ADMIN"&&(0,s.jsx)("th",{className:"px-4 py-3 text-center text-xs font-medium text-gray-500 dark:text-gray-400 uppercase",children:"액션"})]})}),(0,s.jsx)("tbody",{className:"bg-white dark:bg-gray-900 divide-y divide-gray-200 dark:divide-gray-700",children:m.filter(e=>{var t,a,s,r,l;if(!f)return!0;let i=f.toLowerCase();return(null===(t=e.site.code)||void 0===t?void 0:t.toLowerCase().includes(i))||(null===(s=e.internal)||void 0===s?void 0:null===(a=s.code)||void 0===a?void 0:a.toLowerCase().includes(i))||(null===(r=e.site.name)||void 0===r?void 0:r.toLowerCase().includes(i))||(null===(l=e.facilityType)||void 0===l?void 0:l.toLowerCase().includes(i))}).sort((e,t)=>{let a=new Date(e.createdAt).getTime(),s=new Date(t.createdAt).getTime();return a!==s?s-a:(e.site.code||"").localeCompare(t.site.code||"")}).map(t=>{var a,r,l,i;return(0,s.jsxs)("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-800",children:[(0,s.jsx)("td",{className:"px-4 py-3 text-center",children:(0,s.jsx)("input",{type:"checkbox",checked:p.has(t.stackId),onChange:()=>F(t.stackId),className:"h-4 w-4"})}),(0,s.jsx)("td",{className:"px-4 py-3 text-sm font-mono",children:t.site.code}),(0,s.jsx)("td",{className:"px-4 py-3 text-sm font-mono",children:w===t.stackId?(0,s.jsx)("input",{type:"text",value:(null==D?void 0:D.code)||"",onChange:e=>S({...D,code:e.target.value}),className:"w-full px-2 py-1 border rounded text-sm"}):(null===(a=t.internal)||void 0===a?void 0:a.code)||"-"}),(0,s.jsx)("td",{className:"px-4 py-3 text-sm",children:w===t.stackId?(0,s.jsx)("input",{type:"text",value:(null==D?void 0:D.fullName)||"",onChange:e=>S({...D,fullName:e.target.value}),className:"w-full px-2 py-1 border rounded text-sm"}):t.site.name||"-"}),(0,s.jsx)("td",{className:"px-4 py-3 text-sm",children:t.facilityType||"-"}),(0,s.jsx)("td",{className:"px-4 py-3 text-sm text-center",children:w===t.stackId?(0,s.jsx)("input",{type:"number",step:"0.1",value:(null==D?void 0:D.height)||"",onChange:e=>S({...D,height:e.target.value}),className:"w-20 px-2 py-1 border rounded text-sm"}):null!==(l=t.physical.height)&&void 0!==l?l:"-"}),(0,s.jsx)("td",{className:"px-4 py-3 text-sm text-center",children:w===t.stackId?(0,s.jsx)("input",{type:"number",step:"0.1",value:(null==D?void 0:D.diameter)||"",onChange:e=>S({...D,diameter:e.target.value}),className:"w-20 px-2 py-1 border rounded text-sm"}):null!==(i=t.physical.diameter)&&void 0!==i?i:"-"}),(0,s.jsx)("td",{className:"px-4 py-3 text-sm",children:t.category||"-"}),(0,s.jsx)("td",{className:"px-4 py-3 text-sm text-center",children:(0,s.jsx)("span",{className:"px-2 py-1 text-xs rounded bg-yellow-100 text-yellow-700 dark:bg-yellow-900/30 dark:text-yellow-300",children:"확인필요"})}),(0,s.jsx)("td",{className:"px-4 py-3 text-sm",children:w===t.stackId?(0,s.jsx)("button",{onClick:()=>z(!0),className:"text-blue-600 hover:underline",children:(null==D?void 0:D.organizationName)||"-"}):(null===(r=t.internal)||void 0===r?void 0:r.organization.name)||"-"}),(0,s.jsx)("td",{className:"px-4 py-3 text-sm text-center",children:new Date(t.createdAt).toLocaleDateString("ko-KR",{year:"numeric",month:"2-digit",day:"2-digit"}).replace(/\. /g,"-").replace(".","")}),(null==e?void 0:e.role)==="CUSTOMER_ADMIN"&&(0,s.jsx)("td",{className:"px-4 py-3 text-sm text-center",children:(0,s.jsxs)("div",{className:"flex gap-2 justify-center",children:[w===t.stackId?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("button",{onClick:()=>Z(t.stackId),className:"text-blue-600 hover:underline text-xs",children:"저장"}),(0,s.jsx)("button",{onClick:()=>U(),className:"text-gray-600 hover:underline text-xs",children:"취소"})]}):(0,s.jsx)("button",{onClick:()=>M(t),className:"text-green-600 hover:underline text-xs",children:"수정"}),(0,s.jsx)("button",{onClick:()=>O(t.stackId),className:"text-blue-600 hover:underline text-xs",children:"확인완료"})]})})]},t.stackId)})})]})}),(0,s.jsx)("div",{className:"md:hidden space-y-3",children:m.filter(e=>{var t,a,s,r,l;if(!f)return!0;let i=f.toLowerCase();return(null===(t=e.site.code)||void 0===t?void 0:t.toLowerCase().includes(i))||(null===(s=e.internal)||void 0===s?void 0:null===(a=s.code)||void 0===a?void 0:a.toLowerCase().includes(i))||(null===(r=e.site.name)||void 0===r?void 0:r.toLowerCase().includes(i))||(null===(l=e.facilityType)||void 0===l?void 0:l.toLowerCase().includes(i))}).sort((e,t)=>{let a=new Date(e.createdAt).getTime(),s=new Date(t.createdAt).getTime();return a!==s?s-a:(e.site.code||"").localeCompare(t.site.code||"")}).map(t=>{var a,r,l,i;return(0,s.jsxs)("div",{className:"rounded-lg border bg-white/50 dark:bg-white/5 p-4 space-y-2",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,s.jsx)("span",{className:"px-2 py-1 text-xs rounded bg-yellow-100 text-yellow-700 dark:bg-yellow-900/30 dark:text-yellow-300",children:"확인필요"}),(null==e?void 0:e.role)==="CUSTOMER_ADMIN"&&(0,s.jsx)("button",{onClick:()=>O(t.stackId),className:"text-xs text-blue-600 hover:underline",children:"확인완료"})]}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-2 text-sm",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{className:"text-gray-500",children:"\uD83C\uDFED 굴뚝번호:"})," ",t.site.code]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{className:"text-gray-500",children:"\uD83D\uDCCB 굴뚝코드:"})," ",(null===(a=t.internal)||void 0===a?void 0:a.code)||"-"]}),(0,s.jsxs)("div",{className:"col-span-2",children:[(0,s.jsx)("span",{className:"text-gray-500",children:"\uD83D\uDCCD 정식명칭:"})," ",t.site.name||"-"]}),(0,s.jsxs)("div",{className:"col-span-2",children:[(0,s.jsx)("span",{className:"text-gray-500",children:"⚙️ 배출시설:"})," ",t.facilityType||"-"]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{className:"text-gray-500",children:"\uD83D\uDCCF 높이:"})," ",null!==(l=t.physical.height)&&void 0!==l?l:"-","m"]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{className:"text-gray-500",children:"⭕ 안지름:"})," ",null!==(i=t.physical.diameter)&&void 0!==i?i:"-","m"]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{className:"text-gray-500",children:"\uD83C\uDFF7️ 종별:"})," ",t.category||"-"]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{className:"text-gray-500",children:"\uD83C\uDFE2 담당:"})," ",(null===(r=t.internal)||void 0===r?void 0:r.organization.name)||"-"]}),(0,s.jsxs)("div",{className:"col-span-2",children:[(0,s.jsx)("span",{className:"text-gray-500",children:"\uD83D\uDCC5 생성일:"})," ",new Date(t.createdAt).toLocaleDateString("ko-KR",{year:"numeric",month:"2-digit",day:"2-digit"}).replace(/\. /g,"-").replace(".","")]})]})]},t.stackId)})})]})}),"confirmed"===d&&(0,s.jsx)(s.Fragment,{children:0===h.length?(0,s.jsx)("div",{className:"text-center py-12 bg-gray-50 dark:bg-gray-800 rounded-lg",children:(0,s.jsx)("p",{className:"text-gray-600 dark:text-gray-400",children:"확정된 굴뚝이 없습니다."})}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{className:"hidden md:block overflow-x-auto max-h-[calc(100vh-200px)] overflow-y-auto",children:(0,s.jsxs)("table",{className:"min-w-full divide-y divide-gray-200 dark:divide-gray-700",children:[(0,s.jsx)("thead",{className:"bg-gray-50 dark:bg-gray-800 sticky top-0 z-10",children:(0,s.jsxs)("tr",{children:[(0,s.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase",children:"굴뚝번호"}),(0,s.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase",children:"굴뚝코드"}),(0,s.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase",children:"정식명칭"}),(0,s.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase",children:"배출시설종류"}),(0,s.jsx)("th",{className:"px-4 py-3 text-center text-xs font-medium text-gray-500 dark:text-gray-400 uppercase",children:"높이(m)"}),(0,s.jsx)("th",{className:"px-4 py-3 text-center text-xs font-medium text-gray-500 dark:text-gray-400 uppercase",children:"안지름(m)"}),(0,s.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase",children:"종별"}),(0,s.jsx)("th",{className:"px-4 py-3 text-center text-xs font-medium text-gray-500 dark:text-gray-400 uppercase",children:"확인 상태"}),(0,s.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase",children:"담당환경측정회사"}),(0,s.jsx)("th",{className:"px-4 py-3 text-center text-xs font-medium text-gray-500 dark:text-gray-400 uppercase",children:"측정 건수"}),(0,s.jsx)("th",{className:"px-4 py-3 text-center text-xs font-medium text-gray-500 dark:text-gray-400 uppercase",children:"생성일"}),(null==e?void 0:e.role)==="CUSTOMER_ADMIN"&&(0,s.jsx)("th",{className:"px-4 py-3 text-center text-xs font-medium text-gray-500 dark:text-gray-400 uppercase",children:"액션"})]})}),(0,s.jsx)("tbody",{className:"bg-white dark:bg-gray-900 divide-y divide-gray-200 dark:divide-gray-700",children:h.filter(e=>{var t,a,s,r,l;if(!E&&!e.isActive)return!1;if(!f)return!0;let i=f.toLowerCase();return(null===(t=e.name)||void 0===t?void 0:t.toLowerCase().includes(i))||(null===(a=e.code)||void 0===a?void 0:a.toLowerCase().includes(i))||(null===(s=e.fullName)||void 0===s?void 0:s.toLowerCase().includes(i))||(null===(r=e.facilityType)||void 0===r?void 0:r.toLowerCase().includes(i))||(null===(l=e.location)||void 0===l?void 0:l.toLowerCase().includes(i))}).sort((e,t)=>{let a=new Date(e.createdAt).getTime(),s=new Date(t.createdAt).getTime();return a!==s?s-a:(e.name||"").localeCompare(t.name||"")}).map(t=>{var a,r,l,i,n;return(0,s.jsxs)("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-800",children:[(0,s.jsx)("td",{className:"px-4 py-3 text-sm font-mono",children:t.name}),(0,s.jsx)("td",{className:"px-4 py-3 text-sm font-mono",children:w===t.id?(0,s.jsx)("input",{type:"text",value:(null==D?void 0:D.code)||"",onChange:e=>S({...D,code:e.target.value}),className:"w-full px-2 py-1 border rounded text-sm"}):t.code||"-"}),(0,s.jsx)("td",{className:"px-4 py-3 text-sm",children:w===t.id?(0,s.jsx)("input",{type:"text",value:(null==D?void 0:D.fullName)||"",onChange:e=>S({...D,fullName:e.target.value}),className:"w-full px-2 py-1 border rounded text-sm"}):t.fullName||"-"}),(0,s.jsx)("td",{className:"px-4 py-3 text-sm",children:w===t.id?(0,s.jsx)("input",{type:"text",value:(null==D?void 0:D.facilityType)||"",onChange:e=>S({...D,facilityType:e.target.value}),className:"w-full px-2 py-1 border rounded text-sm"}):t.facilityType||"-"}),(0,s.jsx)("td",{className:"px-4 py-3 text-sm text-center",children:w===t.id?(0,s.jsx)("input",{type:"number",step:"0.1",value:(null==D?void 0:D.height)||"",onChange:e=>S({...D,height:e.target.value}),className:"w-20 px-2 py-1 border rounded text-sm"}):null!==(i=t.height)&&void 0!==i?i:"-"}),(0,s.jsx)("td",{className:"px-4 py-3 text-sm text-center",children:w===t.id?(0,s.jsx)("input",{type:"number",step:"0.1",value:(null==D?void 0:D.diameter)||"",onChange:e=>S({...D,diameter:e.target.value}),className:"w-20 px-2 py-1 border rounded text-sm"}):null!==(n=t.diameter)&&void 0!==n?n:"-"}),(0,s.jsx)("td",{className:"px-4 py-3 text-sm",children:w===t.id?(0,s.jsx)("input",{type:"text",value:(null==D?void 0:D.category)||"",onChange:e=>S({...D,category:e.target.value}),className:"w-20 px-2 py-1 border rounded text-sm"}):t.category||"-"}),(0,s.jsx)("td",{className:"px-4 py-3 text-sm text-center",children:t.isVerified?(0,s.jsx)("span",{className:"px-2 py-1 text-xs rounded bg-green-100 text-green-700 dark:bg-green-900/30 dark:text-green-300",children:"✓ 확인완료"}):(0,s.jsx)("span",{className:"px-2 py-1 text-xs rounded bg-yellow-100 text-yellow-700 dark:bg-yellow-900/30 dark:text-yellow-300",children:"확인필요"})}),(0,s.jsx)("td",{className:"px-4 py-3 text-sm",children:w===t.id?(0,s.jsx)("button",{onClick:()=>z(!0),className:"text-blue-600 hover:underline",children:(null==D?void 0:D.organizationName)||"-"}):t.organizationNames&&t.organizationNames.length>0?t.organizationNames.join(", "):"-"}),(0,s.jsx)("td",{className:"px-4 py-3 text-sm text-center",children:(null===(a=t._count)||void 0===a?void 0:a.measurements)||0}),(0,s.jsx)("td",{className:"px-4 py-3 text-sm text-center",children:new Date(t.createdAt).toLocaleDateString("ko-KR",{year:"numeric",month:"2-digit",day:"2-digit"}).replace(/\. /g,"-").replace(".","")}),(null==e?void 0:e.role)==="CUSTOMER_ADMIN"&&(0,s.jsx)("td",{className:"px-4 py-3 text-sm text-center",children:(0,s.jsx)("div",{className:"flex gap-2 justify-center flex-wrap",children:w===t.id?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("button",{onClick:()=>Z(t.id),className:"text-blue-600 hover:underline text-xs",children:"저장"}),(0,s.jsx)("button",{onClick:()=>U(),className:"text-gray-600 hover:underline text-xs",children:"취소"})]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("button",{onClick:()=>M(t),className:"text-green-600 hover:underline text-xs",children:"수정"}),t.isActive?(0,s.jsx)("button",{onClick:()=>B(t.id),className:"text-orange-600 hover:underline text-xs",children:"비활성화"}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("button",{onClick:()=>K(t.id),className:"text-green-600 hover:underline text-xs",children:"활성화"}),(0,s.jsx)("button",{onClick:()=>{var e;return Q(t.id,(null===(e=t._count)||void 0===e?void 0:e.measurements)||0)},className:"text-xs hover:underline ".concat(((null===(r=t._count)||void 0===r?void 0:r.measurements)||0)>0?"text-gray-400 cursor-not-allowed":"text-red-600"),disabled:((null===(l=t._count)||void 0===l?void 0:l.measurements)||0)>0,children:"삭제"})]})]})})})]},t.id)})})]})}),(0,s.jsx)("div",{className:"md:hidden space-y-3",children:h.filter(e=>{var t,a,s,r;if(!f)return!0;let l=f.toLowerCase();return(null===(t=e.name)||void 0===t?void 0:t.toLowerCase().includes(l))||(null===(a=e.code)||void 0===a?void 0:a.toLowerCase().includes(l))||(null===(s=e.fullName)||void 0===s?void 0:s.toLowerCase().includes(l))||(null===(r=e.facilityType)||void 0===r?void 0:r.toLowerCase().includes(l))}).sort((e,t)=>{let a=new Date(e.createdAt).getTime(),s=new Date(t.createdAt).getTime();return a!==s?s-a:(e.name||"").localeCompare(t.name||"")}).map(e=>{var t,a,r,l;return(0,s.jsxs)("div",{className:"rounded-lg border bg-white/50 dark:bg-white/5 p-4 space-y-2",children:[(0,s.jsx)("div",{className:"flex items-center justify-between mb-2",children:(0,s.jsx)("span",{className:"px-2 py-1 text-xs rounded bg-green-100 text-green-700 dark:bg-green-900/30 dark:text-green-300",children:"확정완료"})}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-2 text-sm",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{className:"text-gray-500",children:"\uD83C\uDFED 굴뚝번호:"})," ",e.name||"-"]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{className:"text-gray-500",children:"\uD83D\uDCCB 굴뚝코드:"})," ",e.code||"-"]}),(0,s.jsxs)("div",{className:"col-span-2",children:[(0,s.jsx)("span",{className:"text-gray-500",children:"\uD83D\uDCCD 정식명칭:"})," ",e.fullName||"-"]}),(0,s.jsxs)("div",{className:"col-span-2",children:[(0,s.jsx)("span",{className:"text-gray-500",children:"⚙️ 배출시설:"})," ",e.facilityType||"-"]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{className:"text-gray-500",children:"\uD83D\uDCCF 높이:"})," ",null!==(r=e.height)&&void 0!==r?r:"-","m"]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{className:"text-gray-500",children:"⭕ 안지름:"})," ",null!==(l=e.diameter)&&void 0!==l?l:"-","m"]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{className:"text-gray-500",children:"\uD83C\uDFF7️ 종별:"})," ",e.category||"-"]}),(0,s.jsxs)("div",{className:"col-span-2",children:[(0,s.jsx)("span",{className:"text-gray-500",children:"\uD83C\uDFE2 담당:"})," ",(null===(t=e.organizationNames)||void 0===t?void 0:t.length)>0?e.organizationNames.join(", "):"-"]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{className:"text-gray-500",children:"\uD83D\uDCCA 측정:"})," ",(null===(a=e._count)||void 0===a?void 0:a.measurements)||0,"건"]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{className:"text-gray-500",children:"\uD83D\uDCC5 생성:"})," ",e.createdAt?new Date(e.createdAt).toLocaleDateString("ko-KR",{month:"2-digit",day:"2-digit"}):"-"]})]})]},e.stackId)})})]})}),(0,s.jsx)(c,{isOpen:T,onClose:()=>z(!1),onSelect:e=>{L(e),S({...D,organizationId:e.id,organizationName:e.name})},currentOrgId:null==D?void 0:D.organizationId})]})}},6334:function(e,t,a){"use strict";a.d(t,{Z:function(){return i}});var s=a(7437);a(2265);let r={primary:"bg-black text-white hover:bg-black/90 dark:bg-white dark:text-black dark:hover:bg-white/90",secondary:"border border-gray-300 text-gray-900 hover:bg-gray-50 dark:border-white/20 dark:text-white dark:hover:bg-white/10",ghost:"text-gray-700 hover:bg-gray-100 dark:text-gray-200 dark:hover:bg-white/10"},l={sm:"h-8 px-3 text-sm",md:"h-10 px-4 text-sm",lg:"h-11 px-5 text-base"};function i(e){let{variant:t="primary",size:a="md",className:i="",...n}=e;return(0,s.jsx)("button",{className:"".concat("inline-flex items-center justify-center rounded-md font-medium transition-colors focus:outline-none focus:ring-2 focus:ring-offset-2 disabled:opacity-50 disabled:pointer-events-none"," ").concat(r[t]," ").concat(l[a]," ").concat(i),...n})}},2827:function(e,t,a){"use strict";a.d(t,{Z:function(){return r}});var s=a(7437);function r(e){let{className:t="",...a}=e;return(0,s.jsx)("input",{className:"".concat("rounded-md border bg-transparent px-3 py-2 text-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:border-white/20"," ").concat(t),...a})}a(2265)},2397:function(e,t,a){"use strict";a.d(t,{H:function(){return c},a:function(){return o}});var s=a(7437),r=a(2265),l=a(605),i=a(9376);function n(){return(0,s.jsxs)("div",{className:"min-h-screen flex flex-col items-center justify-center bg-gray-50 dark:bg-gray-900",children:[(0,s.jsxs)("div",{className:"mb-16",children:[(0,s.jsx)("h1",{className:"text-3xl font-extrabold text-gray-900 dark:text-white text-center",children:"오염물질 측정 관리 시스템"}),(0,s.jsx)("p",{className:"mt-2 text-center text-sm text-gray-600 dark:text-gray-400",children:"Pollutant Measurement Management System"})]}),(0,s.jsxs)("div",{className:"flex flex-col items-center gap-4",children:[(0,s.jsx)("div",{className:"relative",children:(0,s.jsx)("div",{className:"w-16 h-16 border-4 border-gray-200 dark:border-gray-700 border-t-blue-600 rounded-full animate-spin"})}),(0,s.jsx)("p",{className:"text-gray-600 dark:text-gray-400 text-sm font-medium",children:"로딩 중..."})]}),(0,s.jsx)("div",{className:"mt-16"})]})}let d=(0,r.createContext)(null);function c(e){let{children:t}=e,{data:a,status:c}=(0,l.useSession)(),[o,x]=(0,r.useState)(null),[m,u]=(0,r.useState)(!0),h=(0,i.usePathname)();(0,r.useEffect)(()=>{"loading"!==c&&u(!1),(null==a?void 0:a.user)?x(a.user):"unauthenticated"===c&&x(null)},[a,c]);let g="loading"===c||m;return!g||"/login"===h||(null==h?void 0:h.startsWith("/register"))||(null==h?void 0:h.startsWith("/invite"))||(null==h?void 0:h.startsWith("/auth"))?(0,s.jsx)(d.Provider,{value:{user:o,loading:g},children:t}):(0,s.jsx)(n,{})}function o(){let e=(0,r.useContext)(d);if(!e)throw Error("AuthProvider is missing");return e}}},function(e){e.O(0,[605,2971,2117,1744],function(){return e(e.s=3977)}),_N_E=e.O()}]);