(()=>{var e={};e.id=2,e.ids=[2],e.modules={72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},55315:e=>{"use strict";e.exports=require("path")},17360:e=>{"use strict";e.exports=require("url")},5182:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>i.a,__next_app__:()=>x,originalPathname:()=>m,pages:()=>o,routeModule:()=>h,tree:()=>c}),s(11961),s(92553),s(35866);var r=s(23191),a=s(88716),l=s(37922),i=s.n(l),n=s(95231),d={};for(let e in n)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(d[e]=()=>n[e]);s.d(t,d);let c=["",{children:["org",{children:["draft-customers",{children:["[customerId]",{children:["stacks",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,11961)),"C:\\Users\\User\\boaz\\frontend\\src\\app\\org\\draft-customers\\[customerId]\\stacks\\page.tsx"]}]},{}]},{}]},{}]},{metadata:{icon:[async e=>(await Promise.resolve().then(s.bind(s,73881))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(s.bind(s,92553)),"C:\\Users\\User\\boaz\\frontend\\src\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,35866,23)),"next/dist/client/components/not-found-error"],metadata:{icon:[async e=>(await Promise.resolve().then(s.bind(s,73881))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}],o=["C:\\Users\\User\\boaz\\frontend\\src\\app\\org\\draft-customers\\[customerId]\\stacks\\page.tsx"],m="/org/draft-customers/[customerId]/stacks/page",x={require:s,loadChunk:()=>Promise.resolve()},h=new r.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/org/draft-customers/[customerId]/stacks/page",pathname:"/org/draft-customers/[customerId]/stacks",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},89309:(e,t,s)=>{Promise.resolve().then(s.bind(s,71123))},18019:(e,t,s)=>{"use strict";s.d(t,{Z:()=>r});let r=(0,s(62881).Z)("info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]])},94019:(e,t,s)=>{"use strict";s.d(t,{Z:()=>r});let r=(0,s(62881).Z)("x",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]])},71123:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>h});var r=s(10326),a=s(17577),l=s(21120),i=s(35047),n=s(99837),d=s(89175),c=s(18019),o=s(94019);function m({pageType:e}){let[t,s]=(0,a.useState)(!1);return t?r.jsx("div",{className:"mb-4 p-4 bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg",children:(0,r.jsxs)("div",{className:"flex items-start gap-3",children:[r.jsx(c.Z,{className:"h-5 w-5 text-blue-600 dark:text-blue-400 flex-shrink-0 mt-0.5"}),(0,r.jsxs)("div",{className:"flex-1",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[r.jsx("h3",{className:"font-semibold text-blue-900 dark:text-blue-100",children:"\uD83D\uDCA1 코드 안내"}),r.jsx("button",{onClick:()=>s(!1),className:"text-blue-600 dark:text-blue-400 hover:text-blue-800 dark:hover:text-blue-200",children:r.jsx(o.Z,{className:"h-4 w-4"})})]}),"org"===e?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{className:"text-sm text-blue-800 dark:text-blue-200 mb-2",children:[(0,r.jsxs)("p",{className:"mb-1",children:["• ",r.jsx("strong",{children:"내부 코드"}),": 우리 회사에서 사용하는 관리 코드"]}),(0,r.jsxs)("p",{className:"mb-1",children:["• ",r.jsx("strong",{children:"현장 코드"}),": 고객사 현장에서 사용하는 코드"]})]}),r.jsx("p",{className:"text-xs text-blue-700 dark:text-blue-300 mb-3",children:'예: 삼성전자는 "A-001"로 부르지만, 우리는 "S-001"로 관리합니다.'})]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{className:"text-sm text-blue-800 dark:text-blue-200 mb-2",children:[(0,r.jsxs)("p",{className:"mb-1",children:["• ",r.jsx("strong",{children:"현장 코드"}),": 우리 현장에서 사용하는 굴뚝 코드"]}),(0,r.jsxs)("p",{className:"mb-1",children:["• ",r.jsx("strong",{children:"측정업체 코드"}),": 각 환경측정기업이 내부적으로 사용하는 코드"]})]}),r.jsx("p",{className:"text-xs text-blue-700 dark:text-blue-300 mb-3",children:"측정업체마다 다른 코드를 사용할 수 있으며, 시스템이 자동으로 연결합니다."})]}),r.jsx(n.Z,{variant:"outline",size:"sm",onClick:()=>{localStorage.setItem(`codeGuide_${e}_hidden`,"true"),s(!1)},className:"text-xs",children:"다시 보지 않기"})]})]})}):null}var x=s(21216);function h(){let{user:e}=(0,l.a)(),t=(0,i.useRouter)(),s=(0,i.useParams)().customerId,[c,o]=(0,a.useState)([]),[h,u]=(0,a.useState)(!0),[b,g]=(0,a.useState)(!1),[p,j]=(0,a.useState)(null),[f,y]=(0,a.useState)({internalCode:"",internalName:"",location:"",height:"",diameter:"",description:""}),v=async()=>{try{u(!0);let e=await fetch(`/api/org/draft-customers/${s}/stacks`),t=await e.json();o(t.stacks||[])}catch(e){}finally{u(!1)}},k=async e=>{if(e.preventDefault(),!f.internalCode){alert("내부 코드는 필수입니다.");return}try{let e=p?`/api/org/draft-customers/${s}/stacks/${p.stackId}`:`/api/org/draft-customers/${s}/stacks/create`,t=await fetch(e,{method:p?"PATCH":"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(f)});if(t.ok)alert(p?"수정되었습니다.":"등록되었습니다."),g(!1),j(null),y({internalCode:"",internalName:"",location:"",height:"",diameter:"",description:""}),v();else{let e=await t.json();alert(e.error||"실패")}}catch(e){alert("오류가 발생했습니다.")}},N=e=>{j(e),y({internalCode:e.internal.code,internalName:e.internal.name||"",location:e.physical.location||"",height:e.physical.height?.toString()||"",diameter:e.physical.diameter?.toString()||"",description:e.description||""}),g(!0)},w=async(e,t)=>{if(confirm(`"${t}" 굴뚝을 삭제하시겠습니까?`))try{let t=await fetch(`/api/org/draft-customers/${s}/stacks/${e}`,{method:"DELETE"});if(t.ok)alert("삭제되었습니다."),v();else{let e=await t.json();alert(e.error||"삭제 실패")}}catch(e){alert("오류가 발생했습니다.")}};return h?r.jsx("div",{className:"flex items-center justify-center h-64",children:r.jsx("div",{className:"text-gray-500",children:"로딩 중..."})}):(0,r.jsxs)("div",{className:"p-6",children:[r.jsx(m,{pageType:"org"}),(0,r.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,r.jsxs)("div",{children:[r.jsx(n.Z,{onClick:()=>t.back(),className:"mb-2 text-sm",children:"← 돌아가기"}),r.jsx("h1",{className:"text-2xl font-bold mb-1",children:"임시 굴뚝 관리"}),r.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"연결 전에 굴뚝 정보를 미리 등록할 수 있습니다."})]}),r.jsx(n.Z,{onClick:()=>g(!0),children:"+ 굴뚝 등록"})]}),0===c.length?r.jsx("div",{className:"text-center py-12 bg-gray-50 dark:bg-gray-800 rounded-lg",children:r.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"등록된 굴뚝이 없습니다."})}):r.jsx("div",{className:"space-y-3",children:c.map(e=>r.jsx("div",{className:"p-4 border border-gray-200 dark:border-gray-700 rounded-lg",children:(0,r.jsxs)("div",{className:"flex items-start justify-between",children:[(0,r.jsxs)("div",{className:"flex-1",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[r.jsx("h3",{className:"font-mono text-lg font-semibold",children:e.internal.code}),r.jsx("span",{className:"px-2 py-0.5 text-xs rounded bg-yellow-100 text-yellow-700 dark:bg-yellow-900/30 dark:text-yellow-300",children:"임시"})]}),e.internal.name&&r.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-2",children:e.internal.name}),(0,r.jsxs)("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:[e.physical.location&&(0,r.jsxs)("p",{children:["위치: ",e.physical.location]}),(e.physical.height||e.physical.diameter)&&(0,r.jsxs)("p",{children:[e.physical.height&&`${e.physical.height}m`,e.physical.height&&e.physical.diameter&&" / ",e.physical.diameter&&`\xd8${e.physical.diameter}m`]})]})]}),(0,r.jsxs)("div",{className:"flex gap-2",children:[r.jsx(n.Z,{size:"sm",onClick:()=>N(e),children:"수정"}),r.jsx(n.Z,{size:"sm",onClick:()=>w(e.stackId,e.internal.code),className:"bg-red-600 hover:bg-red-700",children:"삭제"})]})]})},e.stackId))}),b&&r.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4 overflow-y-auto",children:(0,r.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg max-w-2xl w-full p-6 my-8",children:[r.jsx("h2",{className:"text-xl font-bold mb-4",children:p?"굴뚝 수정":"굴뚝 등록"}),(0,r.jsxs)("form",{onSubmit:k,children:[(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsxs)("label",{className:"block text-sm font-medium mb-1",children:["내부 코드 ",r.jsx("span",{className:"text-red-500",children:"*"}),r.jsx(x.b,{title:"내부 코드란?",content:"우리 회사에서 사용하는 굴뚝 관리 코드입니다."})]}),r.jsx(d.Z,{value:f.internalCode,onChange:e=>y({...f,internalCode:e.target.value}),placeholder:"예: S-001",required:!0})]}),(0,r.jsxs)("div",{children:[(0,r.jsxs)("label",{className:"block text-sm font-medium mb-1",children:["내부 명칭",r.jsx(x.b,{content:"우리 회사에서 사용하는 굴뚝 명칭입니다."})]}),r.jsx(d.Z,{value:f.internalName,onChange:e=>y({...f,internalName:e.target.value}),placeholder:"예: 북측 높은 굴뚝"})]}),(0,r.jsxs)("div",{children:[r.jsx("label",{className:"block text-sm font-medium mb-1",children:"위치"}),r.jsx(d.Z,{value:f.location,onChange:e=>y({...f,location:e.target.value}),placeholder:"예: 1공장 북측"})]}),(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{children:[r.jsx("label",{className:"block text-sm font-medium mb-1",children:"높이 (m)"}),r.jsx(d.Z,{type:"number",step:"0.1",value:f.height,onChange:e=>y({...f,height:e.target.value}),placeholder:"30"})]}),(0,r.jsxs)("div",{children:[r.jsx("label",{className:"block text-sm font-medium mb-1",children:"직경 (m)"}),r.jsx(d.Z,{type:"number",step:"0.1",value:f.diameter,onChange:e=>y({...f,diameter:e.target.value}),placeholder:"1.2"})]})]}),(0,r.jsxs)("div",{children:[r.jsx("label",{className:"block text-sm font-medium mb-1",children:"메모"}),r.jsx("textarea",{value:f.description,onChange:e=>y({...f,description:e.target.value}),placeholder:"측정 시 사다리 필요 등",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700",rows:3})]})]}),(0,r.jsxs)("div",{className:"flex gap-2 mt-6",children:[r.jsx(n.Z,{type:"button",onClick:()=>{g(!1),j(null),y({internalCode:"",internalName:"",location:"",height:"",diameter:"",description:""})},className:"flex-1 bg-gray-500 hover:bg-gray-600",children:"취소"}),r.jsx(n.Z,{type:"submit",className:"flex-1",children:p?"수정":"등록"})]})]})]})})]})}},99837:(e,t,s)=>{"use strict";s.d(t,{Z:()=>i});var r=s(10326);s(17577);let a={primary:"bg-black text-white hover:bg-black/90 dark:bg-white dark:text-black dark:hover:bg-white/90",secondary:"border border-gray-300 text-gray-900 hover:bg-gray-50 dark:border-white/20 dark:text-white dark:hover:bg-white/10",ghost:"text-gray-700 hover:bg-gray-100 dark:text-gray-200 dark:hover:bg-white/10"},l={sm:"h-8 px-3 text-sm",md:"h-10 px-4 text-sm",lg:"h-11 px-5 text-base"};function i({variant:e="primary",size:t="md",className:s="",...i}){return r.jsx("button",{className:`inline-flex items-center justify-center rounded-md font-medium transition-colors focus:outline-none focus:ring-2 focus:ring-offset-2 disabled:opacity-50 disabled:pointer-events-none ${a[e]} ${l[t]} ${s}`,...i})}},21216:(e,t,s)=>{"use strict";s.d(t,{b:()=>i});var r=s(10326),a=s(18019),l=s(17577);function i({content:e,title:t}){let[s,i]=(0,l.useState)(!1);return(0,r.jsxs)("div",{className:"relative inline-block ml-1",children:[r.jsx("button",{type:"button",onMouseEnter:()=>i(!0),onMouseLeave:()=>i(!1),onClick:()=>i(!s),className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 transition-colors",children:r.jsx(a.Z,{className:"h-4 w-4"})}),s&&(0,r.jsxs)("div",{className:"absolute z-50 bottom-full left-1/2 -translate-x-1/2 mb-2 w-64 p-3 bg-gray-900 dark:bg-gray-800 text-white text-sm rounded-lg shadow-lg",children:[t&&r.jsx("p",{className:"font-semibold mb-1",children:t}),r.jsx("p",{className:"text-gray-200",children:e}),r.jsx("div",{className:"absolute top-full left-1/2 -translate-x-1/2 -mt-1 border-4 border-transparent border-t-gray-900 dark:border-t-gray-800"})]})]})}},89175:(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});var r=s(10326);function a({className:e="",...t}){return r.jsx("input",{className:`rounded-md border bg-transparent px-3 py-2 text-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:border-white/20 ${e}`,...t})}s(17577)},11961:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>r});let r=(0,s(68570).createProxy)(String.raw`C:\Users\User\boaz\frontend\src\app\org\draft-customers\[customerId]\stacks\page.tsx#default`)},73881:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});var r=s(66621);let a=e=>[{type:"image/x-icon",sizes:"16x16",url:(0,r.fillMetadataSegment)(".",e.params,"favicon.ico")+""}]}};var t=require("../../../../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),r=t.X(0,[8948,9975,6621,5736],()=>s(5182));module.exports=r})();