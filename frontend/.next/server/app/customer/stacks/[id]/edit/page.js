(()=>{var e={};e.id=6635,e.ids=[6635],e.modules={72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},55315:e=>{"use strict";e.exports=require("path")},17360:e=>{"use strict";e.exports=require("url")},23026:(e,t,a)=>{"use strict";a.r(t),a.d(t,{GlobalError:()=>i.a,__next_app__:()=>m,originalPathname:()=>u,pages:()=>c,routeModule:()=>x,tree:()=>d}),a(29810),a(92553),a(35866);var r=a(23191),s=a(88716),l=a(37922),i=a.n(l),n=a(95231),o={};for(let e in n)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>n[e]);a.d(t,o);let d=["",{children:["customer",{children:["stacks",{children:["[id]",{children:["edit",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(a.bind(a,29810)),"C:\\Users\\User\\boaz\\frontend\\src\\app\\customer\\stacks\\[id]\\edit\\page.tsx"]}]},{}]},{}]},{}]},{metadata:{icon:[async e=>(await Promise.resolve().then(a.bind(a,73881))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(a.bind(a,92553)),"C:\\Users\\User\\boaz\\frontend\\src\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(a.t.bind(a,35866,23)),"next/dist/client/components/not-found-error"],metadata:{icon:[async e=>(await Promise.resolve().then(a.bind(a,73881))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}],c=["C:\\Users\\User\\boaz\\frontend\\src\\app\\customer\\stacks\\[id]\\edit\\page.tsx"],u="/customer/stacks/[id]/edit/page",m={require:a,loadChunk:()=>Promise.resolve()},x=new r.AppPageRouteModule({definition:{kind:s.x.APP_PAGE,page:"/customer/stacks/[id]/edit/page",pathname:"/customer/stacks/[id]/edit",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},16273:(e,t,a)=>{Promise.resolve().then(a.bind(a,6546))},6546:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>d});var r=a(10326),s=a(17577),l=a(21120),i=a(35047),n=a(99837),o=a(89175);function d(){let{user:e}=(0,l.a)(),t=(0,i.useRouter)(),a=(0,i.useParams)(),d=a?.id,[c,u]=(0,s.useState)(!0),[m,x]=(0,s.useState)(!1),[h,p]=(0,s.useState)(null),[b,g]=(0,s.useState)({code:"",fullName:"",facilityType:"",location:"",height:"",diameter:"",description:"",changeReason:""}),f=async e=>{if(e.preventDefault(),!b.changeReason.trim()){alert("수정 사유를 입력해주세요.");return}try{x(!0);let e=await fetch(`/api/stacks/${d}`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({code:b.code||null,fullName:b.fullName||null,facilityType:b.facilityType||null,location:b.location||null,height:b.height?parseFloat(b.height):null,diameter:b.diameter?parseFloat(b.diameter):null,description:b.description||null,changeReason:b.changeReason})}),a=await e.json();e.ok?(alert("굴뚝 정보가 수정되었습니다."),t.push("/customer/stacks?tab=confirmed")):alert(a.error||"수정 실패")}catch(e){alert("오류가 발생했습니다.")}finally{x(!1)}};return c?r.jsx("div",{className:"flex items-center justify-center h-64",children:r.jsx("div",{className:"text-gray-500",children:"로딩 중..."})}):h?(0,r.jsxs)("div",{className:"p-6 max-w-3xl mx-auto",children:[(0,r.jsxs)("div",{className:"mb-6",children:[r.jsx("h1",{className:"text-2xl font-bold mb-1",children:"굴뚝 정보 수정"}),(0,r.jsxs)("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:["굴뚝번호: ",r.jsx("span",{className:"font-mono font-semibold",children:h.name})]})]}),(0,r.jsxs)("div",{className:"bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg p-4 mb-6",children:[(0,r.jsxs)("p",{className:"text-sm text-blue-800 dark:text-blue-300",children:["\uD83D\uDCA1 ",r.jsx("strong",{children:"수정 가능 항목:"})," 굴뚝코드, 정식 명칭, 배출시설 종류, 위치, 높이, 직경, 설명"]}),(0,r.jsxs)("p",{className:"text-sm text-blue-800 dark:text-blue-300 mt-1",children:["⚠️ ",r.jsx("strong",{children:"수정 불가 항목:"})," 굴뚝번호 (환경측정기업 관리)"]})]}),(0,r.jsxs)("form",{onSubmit:f,className:"space-y-4",children:[(0,r.jsxs)("div",{children:[r.jsx("label",{className:"block text-sm font-medium mb-1",children:"굴뚝코드 (선택)"}),r.jsx(o.Z,{value:b.code,onChange:e=>g({...b,code:e.target.value}),placeholder:"예: STACK-001"})]}),(0,r.jsxs)("div",{children:[r.jsx("label",{className:"block text-sm font-medium mb-1",children:"굴뚝 정식 명칭 (선택)"}),r.jsx(o.Z,{value:b.fullName,onChange:e=>g({...b,fullName:e.target.value}),placeholder:"예: 제1공장 배출구"})]}),(0,r.jsxs)("div",{children:[r.jsx("label",{className:"block text-sm font-medium mb-1",children:"배출시설 종류 (선택)"}),r.jsx(o.Z,{value:b.facilityType,onChange:e=>g({...b,facilityType:e.target.value}),placeholder:"예: 소각시설"})]}),(0,r.jsxs)("div",{children:[r.jsx("label",{className:"block text-sm font-medium mb-1",children:"위치 (선택)"}),r.jsx(o.Z,{value:b.location,onChange:e=>g({...b,location:e.target.value}),placeholder:"예: 제1공장 동측"})]}),(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{children:[r.jsx("label",{className:"block text-sm font-medium mb-1",children:"굴뚝 높이 (m)"}),r.jsx(o.Z,{type:"number",step:"0.1",value:b.height,onChange:e=>g({...b,height:e.target.value}),placeholder:"예: 25.5"})]}),(0,r.jsxs)("div",{children:[r.jsx("label",{className:"block text-sm font-medium mb-1",children:"굴뚝 안지름 (m)"}),r.jsx(o.Z,{type:"number",step:"0.1",value:b.diameter,onChange:e=>g({...b,diameter:e.target.value}),placeholder:"예: 1.2"})]})]}),(0,r.jsxs)("div",{children:[r.jsx("label",{className:"block text-sm font-medium mb-1",children:"설명 (선택)"}),r.jsx("textarea",{value:b.description,onChange:e=>g({...b,description:e.target.value}),placeholder:"추가 설명을 입력하세요",className:"w-full px-3 py-2 border rounded-lg dark:bg-gray-800 dark:border-gray-700",rows:3})]}),(0,r.jsxs)("div",{className:"border-t pt-4",children:[r.jsx("label",{className:"block text-sm font-medium mb-1 text-red-600 dark:text-red-400",children:"수정 사유 (필수) *"}),r.jsx("textarea",{value:b.changeReason,onChange:e=>g({...b,changeReason:e.target.value}),placeholder:"수정 사유를 입력해주세요 (예: 현장 코드 변경, 높이 측정값 보정)",className:"w-full px-3 py-2 border rounded-lg dark:bg-gray-800 dark:border-gray-700",rows:2,required:!0})]}),(0,r.jsxs)("div",{className:"flex gap-2 pt-4",children:[r.jsx(n.Z,{type:"button",variant:"secondary",onClick:()=>t.push("/customer/stacks?tab=confirmed"),disabled:m,children:"취소"}),r.jsx(n.Z,{type:"submit",disabled:m,children:m?"저장 중...":"저장"})]})]})]}):null}},99837:(e,t,a)=>{"use strict";a.d(t,{Z:()=>i});var r=a(10326);a(17577);let s={primary:"bg-black text-white hover:bg-black/90 dark:bg-white dark:text-black dark:hover:bg-white/90",secondary:"border border-gray-300 text-gray-900 hover:bg-gray-50 dark:border-white/20 dark:text-white dark:hover:bg-white/10",ghost:"text-gray-700 hover:bg-gray-100 dark:text-gray-200 dark:hover:bg-white/10"},l={sm:"h-8 px-3 text-sm",md:"h-10 px-4 text-sm",lg:"h-11 px-5 text-base"};function i({variant:e="primary",size:t="md",className:a="",...i}){return r.jsx("button",{className:`inline-flex items-center justify-center rounded-md font-medium transition-colors focus:outline-none focus:ring-2 focus:ring-offset-2 disabled:opacity-50 disabled:pointer-events-none ${s[e]} ${l[t]} ${a}`,...i})}},89175:(e,t,a)=>{"use strict";a.d(t,{Z:()=>s});var r=a(10326);function s({className:e="",...t}){return r.jsx("input",{className:`rounded-md border bg-transparent px-3 py-2 text-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:border-white/20 ${e}`,...t})}a(17577)},29810:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>r});let r=(0,a(68570).createProxy)(String.raw`C:\Users\User\boaz\frontend\src\app\customer\stacks\[id]\edit\page.tsx#default`)},73881:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>s});var r=a(66621);let s=e=>[{type:"image/x-icon",sizes:"16x16",url:(0,r.fillMetadataSegment)(".",e.params,"favicon.ico")+""}]}};var t=require("../../../../../webpack-runtime.js");t.C(e);var a=e=>t(t.s=e),r=t.X(0,[8948,9975,6621,5736],()=>a(23026));module.exports=r})();