(()=>{var e={};e.id=7009,e.ids=[7009],e.modules={72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},55315:e=>{"use strict";e.exports=require("path")},17360:e=>{"use strict";e.exports=require("url")},29568:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>i.a,__next_app__:()=>m,originalPathname:()=>x,pages:()=>c,routeModule:()=>g,tree:()=>o}),r(28587),r(92553),r(35866);var a=r(23191),s=r(88716),d=r(37922),i=r.n(d),n=r(95231),l={};for(let e in n)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>n[e]);r.d(t,l);let o=["",{children:["customer",{children:["staff",{children:["[id]",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,28587)),"C:\\Users\\User\\boaz\\frontend\\src\\app\\customer\\staff\\[id]\\page.tsx"]}]},{}]},{}]},{metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,73881))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(r.bind(r,92553)),"C:\\Users\\User\\boaz\\frontend\\src\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,35866,23)),"next/dist/client/components/not-found-error"],metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,73881))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}],c=["C:\\Users\\User\\boaz\\frontend\\src\\app\\customer\\staff\\[id]\\page.tsx"],x="/customer/staff/[id]/page",m={require:r,loadChunk:()=>Promise.resolve()},g=new a.AppPageRouteModule({definition:{kind:s.x.APP_PAGE,page:"/customer/staff/[id]/page",pathname:"/customer/staff/[id]",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:o}})},72578:(e,t,r)=>{Promise.resolve().then(r.bind(r,81796))},81796:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>c});var a=r(10326),s=r(17577),d=r(77109),i=r(35047),n=r(90434),l=r(99837),o=r(89175);function c(){var e;let{data:t,status:r}=(0,d.useSession)(),c=(0,i.useRouter)(),x=(0,i.useParams)(),m=x?.id,[g,h]=(0,s.useState)(null),[u,p]=(0,s.useState)(!0),[b,f]=(0,s.useState)(!1),[y,v]=(0,s.useState)({name:"",phone:"",department:"",position:"",role:""}),j=async()=>{try{p(!0);let e=await fetch(`/api/customer/staff/${m}`),t=await e.json();e.ok?(h(t.staff),v({name:t.staff.name||"",phone:t.staff.phone||"",department:t.staff.department||"",position:t.staff.position||"",role:t.staff.role||""})):(alert(t.error||"직원 정보를 불러오는데 실패했습니다."),c.push("/customer/staff"))}catch(e){alert("직원 정보를 불러오는데 실패했습니다.")}finally{p(!1)}},k=async()=>{try{let e=await fetch(`/api/customer/staff/${m}`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify(y)}),t=await e.json();e.ok?(alert("저장되었습니다."),f(!1),j()):alert(t.error||"저장에 실패했습니다.")}catch(e){alert("저장 중 오류가 발생했습니다.")}},w=async()=>{if(!g)return;let e=g.isActive?"비활성화":"활성화";if(confirm(`이 직원을 ${e}하시겠습니까?`))try{let t=g.isActive?"deactivate":"activate",r=await fetch(`/api/customer/staff/${m}/${t}`,{method:"PATCH"}),a=await r.json();r.ok?(alert(a.message),j()):alert(a.error||`${e}에 실패했습니다.`)}catch(t){alert(`${e} 중 오류가 발생했습니다.`)}},N=async()=>{if(g&&confirm(`"${g.name}" 직원을 완전히 삭제하시겠습니까?

⚠️ 이 작업은 되돌릴 수 없습니다.`))try{let e=await fetch(`/api/customer/staff/${m}`,{method:"DELETE"}),t=await e.json();e.ok?(alert("삭제되었습니다."),c.push("/customer/staff")):alert(t.error||"삭제에 실패했습니다.")}catch(e){alert("삭제 중 오류가 발생했습니다.")}};return u?a.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900",children:a.jsx("div",{className:"flex justify-center items-center h-64",children:a.jsx("div",{className:"text-gray-500",children:"로딩 중..."})})}):g?a.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900",children:(0,a.jsxs)("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[(0,a.jsxs)("div",{className:"mb-8 flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[a.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:"직원 상세"}),a.jsx("p",{className:"mt-2 text-sm text-gray-600 dark:text-gray-400",children:"직원 정보 관리"})]}),a.jsx(n.default,{href:"/customer/staff",children:a.jsx("button",{className:"px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-md text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700",children:"← 목록으로"})})]}),(0,a.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-6 mb-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[a.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:"기본 정보"}),b?(0,a.jsxs)("div",{className:"flex gap-2",children:[a.jsx("button",{onClick:()=>{f(!1),v({name:g.name||"",phone:g.phone||"",department:g.department||"",position:g.position||"",role:g.role||""})},className:"px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-md text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700",children:"취소"}),a.jsx(l.Z,{onClick:k,children:"저장"})]}):a.jsx(l.Z,{onClick:()=>f(!0),children:"수정"})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"이름"}),b?a.jsx(o.Z,{value:y.name,onChange:e=>v({...y,name:e.target.value})}):a.jsx("div",{className:"text-gray-900 dark:text-white",children:g.name})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"이메일"}),a.jsx("div",{className:"text-gray-900 dark:text-white",children:g.email}),a.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"이메일은 변경할 수 없습니다."})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"전화번호"}),b?a.jsx(o.Z,{value:y.phone,onChange:e=>v({...y,phone:e.target.value}),placeholder:"010-1234-5678"}):a.jsx("div",{className:"text-gray-900 dark:text-white",children:g.phone||"-"})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"역할"}),b?(0,a.jsxs)("select",{value:y.role,onChange:e=>v({...y,role:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 text-gray-900 dark:text-white",children:[a.jsx("option",{value:"CUSTOMER_ADMIN",children:"고객사 관리자"}),a.jsx("option",{value:"CUSTOMER_USER",children:"고객사 사용자"})]}):a.jsx("div",{children:(e=g.role,a.jsx("span",{className:`px-2 py-1 rounded text-xs font-medium ${{CUSTOMER_ADMIN:"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200",CUSTOMER_USER:"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200"}[e]||"bg-gray-100 text-gray-800"}`,children:{CUSTOMER_ADMIN:"고객사 관리자",CUSTOMER_USER:"고객사 사용자"}[e]||e}))})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"부서"}),b?a.jsx(o.Z,{value:y.department,onChange:e=>v({...y,department:e.target.value}),placeholder:"환경안전팀"}):a.jsx("div",{className:"text-gray-900 dark:text-white",children:g.department||"-"})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"직책"}),b?a.jsx(o.Z,{value:y.position,onChange:e=>v({...y,position:e.target.value}),placeholder:"팀장"}):a.jsx("div",{className:"text-gray-900 dark:text-white",children:g.position||"-"})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"상태"}),a.jsx("span",{className:`px-2 py-1 rounded text-xs font-medium ${g.isActive?"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200":"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200"}`,children:g.isActive?"활성":"비활성"})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"가입일"}),a.jsx("div",{className:"text-gray-900 dark:text-white",children:new Date(g.createdAt).toLocaleDateString("ko-KR")})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"최근 로그인"}),a.jsx("div",{className:"text-gray-900 dark:text-white",children:g.lastLoginAt?new Date(g.lastLoginAt).toLocaleDateString("ko-KR"):"없음"})]})]})]}),(0,a.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-6",children:[a.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-4",children:"계정 관리"}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between p-4 border border-gray-200 dark:border-gray-700 rounded-md",children:[(0,a.jsxs)("div",{children:[a.jsx("h3",{className:"font-medium text-gray-900 dark:text-white",children:g.isActive?"계정 비활성화":"계정 활성화"}),a.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:g.isActive?"비활성화하면 로그인할 수 없습니다. 데이터는 유지됩니다.":"활성화하면 다시 로그인할 수 있습니다."})]}),a.jsx("button",{onClick:w,className:`px-4 py-2 rounded-md whitespace-nowrap ${g.isActive?"bg-orange-600 hover:bg-orange-700 text-white":"bg-green-600 hover:bg-green-700 text-white"}`,children:g.isActive?"비활성화":"활성화"})]}),!g.isActive&&(0,a.jsxs)("div",{className:"flex items-center justify-between p-4 border border-red-200 dark:border-red-800 bg-red-50 dark:bg-red-900/20 rounded-md",children:[(0,a.jsxs)("div",{children:[a.jsx("h3",{className:"font-medium text-red-900 dark:text-red-200",children:"계정 삭제"}),a.jsx("p",{className:"text-sm text-red-700 dark:text-red-300 mt-1",children:"⚠️ 삭제하면 모든 데이터가 영구적으로 삭제됩니다. 이 작업은 되돌릴 수 없습니다."})]}),a.jsx("button",{onClick:N,className:"px-4 py-2 rounded-md whitespace-nowrap bg-red-600 hover:bg-red-700 text-white",children:"삭제"})]})]})]})]})}):null}},99837:(e,t,r)=>{"use strict";r.d(t,{Z:()=>i});var a=r(10326);r(17577);let s={primary:"bg-black text-white hover:bg-black/90 dark:bg-white dark:text-black dark:hover:bg-white/90",secondary:"border border-gray-300 text-gray-900 hover:bg-gray-50 dark:border-white/20 dark:text-white dark:hover:bg-white/10",ghost:"text-gray-700 hover:bg-gray-100 dark:text-gray-200 dark:hover:bg-white/10"},d={sm:"h-8 px-3 text-sm",md:"h-10 px-4 text-sm",lg:"h-11 px-5 text-base"};function i({variant:e="primary",size:t="md",className:r="",...i}){return a.jsx("button",{className:`inline-flex items-center justify-center rounded-md font-medium transition-colors focus:outline-none focus:ring-2 focus:ring-offset-2 disabled:opacity-50 disabled:pointer-events-none ${s[e]} ${d[t]} ${r}`,...i})}},89175:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});var a=r(10326);function s({className:e="",...t}){return a.jsx("input",{className:`rounded-md border bg-transparent px-3 py-2 text-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:border-white/20 ${e}`,...t})}r(17577)},28587:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>a});let a=(0,r(68570).createProxy)(String.raw`C:\Users\User\boaz\frontend\src\app\customer\staff\[id]\page.tsx#default`)},73881:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>s});var a=r(66621);let s=e=>[{type:"image/x-icon",sizes:"16x16",url:(0,a.fillMetadataSegment)(".",e.params,"favicon.ico")+""}]}};var t=require("../../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),a=t.X(0,[8948,9975,6621,5736],()=>r(29568));module.exports=a})();