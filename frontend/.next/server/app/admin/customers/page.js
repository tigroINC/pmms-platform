(()=>{var e={};e.id=6781,e.ids=[6781],e.modules={72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},55315:e=>{"use strict";e.exports=require("path")},17360:e=>{"use strict";e.exports=require("url")},72067:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>i.a,__next_app__:()=>m,originalPathname:()=>o,pages:()=>x,routeModule:()=>g,tree:()=>c}),r(85162),r(92553),r(35866);var a=r(23191),s=r(88716),d=r(37922),i=r.n(d),n=r(95231),l={};for(let e in n)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>n[e]);r.d(t,l);let c=["",{children:["admin",{children:["customers",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,85162)),"C:\\Users\\User\\boaz\\frontend\\src\\app\\admin\\customers\\page.tsx"]}]},{}]},{metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,73881))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(r.bind(r,92553)),"C:\\Users\\User\\boaz\\frontend\\src\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,35866,23)),"next/dist/client/components/not-found-error"],metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,73881))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}],x=["C:\\Users\\User\\boaz\\frontend\\src\\app\\admin\\customers\\page.tsx"],o="/admin/customers/page",m={require:r,loadChunk:()=>Promise.resolve()},g=new a.AppPageRouteModule({definition:{kind:s.x.APP_PAGE,page:"/admin/customers/page",pathname:"/admin/customers",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},48725:(e,t,r)=>{Promise.resolve().then(r.bind(r,59686))},59686:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>x});var a=r(10326),s=r(17577),d=r(77109),i=r(35047),n=r(99837),l=r(62993),c=r(90434);function x(){let{data:e,status:t}=(0,d.useSession)(),r=(0,i.useRouter)(),[x,o]=(0,s.useState)([]),[m,g]=(0,s.useState)(!0),[h,p]=(0,s.useState)(""),[u,y]=(0,s.useState)("ALL"),[b,j]=(0,s.useState)("ALL"),v=async()=>{try{g(!0);let e=new URLSearchParams;"ALL"!==u&&e.append("status",u),"ALL"!==b&&e.append("plan",b),h&&e.append("search",h);let t=await fetch(`/api/customers?${e}`),r=await t.json();t.ok?o(r.customers):alert(r.error||"고객회사 목록을 불러오는데 실패했습니다.")}catch(e){alert("고객회사 목록을 불러오는데 실패했습니다.")}finally{g(!1)}},f=async e=>{if(confirm("이 고객회사를 승인하시겠습니까?"))try{let t=await fetch(`/api/customers/${e}`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({action:"approve"})}),r=await t.json();t.ok?(alert(r.message),v()):alert(r.error||"승인에 실패했습니다.")}catch(e){alert("승인 중 오류가 발생했습니다.")}},k=async e=>{if(confirm("이 고객회사를 거부하시겠습니까?"))try{let t=await fetch(`/api/customers/${e}`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({action:"reject"})}),r=await t.json();t.ok?(alert(r.message),v()):alert(r.error||"거부에 실패했습니다.")}catch(e){alert("거부 중 오류가 발생했습니다.")}},w=e=>{sessionStorage.setItem("viewAsCustomer",e),r.push("/dashboard")},N=e=>e?"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200":"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-200";return m?a.jsx("div",{className:"flex items-center justify-center min-h-screen",children:a.jsx("div",{className:"text-gray-500",children:"로딩 중..."})}):(0,a.jsxs)("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900",children:[a.jsx(l.Z,{}),(0,a.jsxs)("div",{className:"max-w-7xl mx-auto p-8",children:[(0,a.jsxs)("div",{className:"mb-8 flex justify-between items-center",children:[(0,a.jsxs)("div",{children:[a.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:"고객회사 관리"}),a.jsx("p",{className:"mt-2 text-sm text-gray-600 dark:text-gray-400",children:"고객회사 승인 및 관리"})]}),a.jsx(c.default,{href:"/admin/dashboard",children:a.jsx(n.Z,{children:"← 대시보드로"})})]}),a.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-4 mb-6",children:(0,a.jsxs)("div",{className:"flex flex-wrap items-center gap-4",children:[(0,a.jsxs)("div",{className:"flex gap-4",children:[(0,a.jsxs)("div",{className:"text-sm",children:[a.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"전체 "}),a.jsx("span",{className:"font-bold text-gray-900 dark:text-white",children:x.length})]}),(0,a.jsxs)("div",{className:"text-sm",children:[a.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"승인대기 "}),a.jsx("span",{className:"font-bold text-yellow-600",children:x.filter(e=>!e.isActive).length})]})]}),a.jsx("div",{className:"h-6 w-px bg-gray-300 dark:bg-gray-600"}),a.jsx("input",{type:"text",placeholder:"회사명 또는 사업자등록번호 검색",value:h,onChange:e=>p(e.target.value),className:"flex-1 min-w-[200px] px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md dark:bg-gray-800 dark:text-white"}),(0,a.jsxs)("select",{value:u,onChange:e=>y(e.target.value),className:"px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md dark:bg-gray-800 dark:text-white",children:[a.jsx("option",{value:"ALL",children:"전체 상태"}),a.jsx("option",{value:"PENDING",children:"승인 대기"}),a.jsx("option",{value:"APPROVED",children:"승인됨"})]}),(0,a.jsxs)("select",{value:b,onChange:e=>j(e.target.value),className:"px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md dark:bg-gray-800 dark:text-white",children:[a.jsx("option",{value:"ALL",children:"전체 플랜"}),a.jsx("option",{value:"FREE",children:"FREE"}),a.jsx("option",{value:"BASIC",children:"BASIC"}),a.jsx("option",{value:"PLUS",children:"PLUS"}),a.jsx("option",{value:"MASTER",children:"MASTER"})]})]})}),(0,a.jsxs)("div",{className:"hidden md:block bg-white dark:bg-gray-800 rounded-lg shadow overflow-hidden",children:[a.jsx("div",{className:"overflow-x-auto max-h-[600px] overflow-y-auto",children:(0,a.jsxs)("table",{className:"min-w-full divide-y divide-gray-200 dark:divide-gray-700",children:[a.jsx("thead",{className:"bg-gray-50 dark:bg-gray-900 sticky top-0 z-10",children:(0,a.jsxs)("tr",{children:[a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"회사명"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"사업자등록번호"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"관리자"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"사용자 수"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"상태"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"등록일"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"액션"})]})}),a.jsx("tbody",{className:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700",children:x.map(e=>(0,a.jsxs)("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-700",children:[(0,a.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap",children:[a.jsx("div",{className:"text-sm font-medium text-gray-900 dark:text-white",children:e.name}),e.address&&a.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:e.address})]}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white",children:e.businessNumber||"-"}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.users[0]?(0,a.jsxs)("div",{children:[a.jsx("div",{className:"text-sm font-medium text-gray-900 dark:text-white",children:e.users[0].name}),a.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:e.users[0].email})]}):a.jsx("span",{className:"text-sm text-gray-500",children:"-"})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white",children:e._count.users}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsx("span",{className:`px-2 py-1 inline-flex text-xs leading-5 font-semibold rounded-full ${N(e.isActive)}`,children:e.isActive?"활성":"승인 대기"})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400",children:new Date(e.createdAt).toLocaleDateString()}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:e.isActive?(0,a.jsxs)("div",{className:"flex flex-col gap-1",children:[a.jsx("button",{onClick:()=>r.push(`/admin/customers/${e.id}`),className:"px-3 py-1 bg-blue-100 text-blue-700 hover:bg-blue-200 dark:bg-blue-900 dark:text-blue-200 dark:hover:bg-blue-800 rounded text-left",children:"상세"}),a.jsx("button",{onClick:()=>w(e.id),className:"px-3 py-1 bg-purple-100 text-purple-700 hover:bg-purple-200 dark:bg-purple-900 dark:text-purple-200 dark:hover:bg-purple-800 rounded text-left",children:"시스템 보기"})]}):(0,a.jsxs)("div",{className:"flex flex-col gap-1",children:[a.jsx("button",{onClick:()=>f(e.id),className:"px-3 py-1 bg-green-100 text-green-700 hover:bg-green-200 dark:bg-green-900 dark:text-green-200 dark:hover:bg-green-800 rounded text-left",children:"승인"}),a.jsx("button",{onClick:()=>k(e.id),className:"px-3 py-1 bg-red-100 text-red-700 hover:bg-red-200 dark:bg-red-900 dark:text-red-200 dark:hover:bg-red-800 rounded text-left",children:"거부"})]})})]},e.id))})]})}),0===x.length&&a.jsx("div",{className:"text-center py-12 text-gray-500 dark:text-gray-400",children:"등록된 고객회사가 없습니다."})]}),a.jsx("div",{className:"md:hidden space-y-3",children:0===x.length?a.jsx("div",{className:"rounded-lg border bg-white/50 dark:bg-white/5 p-6 text-center text-gray-500",children:"등록된 고객회사가 없습니다."}):x.map(e=>(0,a.jsxs)("div",{className:"rounded-lg border bg-white/50 dark:bg-white/5 p-4 space-y-2",children:[a.jsx("div",{className:"flex items-center justify-between mb-2",children:a.jsx("span",{className:`px-2 py-1 inline-flex text-xs leading-5 font-semibold rounded-full ${N(e.isActive)}`,children:e.isActive?"활성":"승인 대기"})}),(0,a.jsxs)("div",{className:"grid grid-cols-1 gap-2 text-sm",children:[a.jsx("div",{className:"font-medium text-lg",children:e.name}),e.address&&(0,a.jsxs)("div",{className:"text-xs text-gray-500",children:["\uD83D\uDCCD ",e.address]}),(0,a.jsxs)("div",{children:[a.jsx("span",{className:"text-gray-500",children:"\uD83D\uDCBC 사업자:"})," ",e.businessNumber||"-"]}),e.users[0]&&(0,a.jsxs)("div",{children:[a.jsx("span",{className:"text-gray-500",children:"\uD83D\uDC64 관리자:"})," ",e.users[0].name,a.jsx("div",{className:"text-xs text-gray-500 ml-6",children:e.users[0].email})]}),(0,a.jsxs)("div",{children:[a.jsx("span",{className:"text-gray-500",children:"\uD83D\uDC65 사용자:"})," ",e._count.users,"명"]}),(0,a.jsxs)("div",{children:[a.jsx("span",{className:"text-gray-500",children:"\uD83D\uDCC5 등록일:"})," ",new Date(e.createdAt).toLocaleDateString()]}),a.jsx("div",{className:"flex flex-col gap-2 pt-2",children:e.isActive?(0,a.jsxs)(a.Fragment,{children:[a.jsx("button",{onClick:()=>r.push(`/admin/customers/${e.id}`),className:"w-full px-3 py-2 bg-blue-500 text-white hover:bg-blue-600 rounded text-sm",children:"상세"}),a.jsx("button",{onClick:()=>w(e.id),className:"w-full px-3 py-2 bg-purple-500 text-white hover:bg-purple-600 rounded text-sm",children:"시스템 보기"})]}):(0,a.jsxs)(a.Fragment,{children:[a.jsx("button",{onClick:()=>f(e.id),className:"w-full px-3 py-2 bg-green-500 text-white hover:bg-green-600 rounded text-sm",children:"승인"}),a.jsx("button",{onClick:()=>k(e.id),className:"w-full px-3 py-2 bg-gray-500 text-white hover:bg-gray-600 rounded text-sm",children:"거부"})]})})]})]},e.id))})]})]})}},62993:(e,t,r)=>{"use strict";r.d(t,{Z:()=>n});var a=r(10326),s=r(77109),d=r(35047),i=r(17577);function n(){let{data:e}=(0,s.useSession)();(0,d.useRouter)();let[t,r]=(0,i.useState)(!1),n=e?.user?.name||"",l=e?.user?.email||"";return a.jsx("header",{className:"h-16 border-b border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-800 sticky top-0 z-40",children:(0,a.jsxs)("div",{className:"mx-auto h-full px-6 flex items-center justify-between",children:[a.jsx("div",{children:a.jsx("h1",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"시스템 관리자"})}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsxs)("button",{onClick:()=>r(!t),className:"flex items-center gap-2 px-3 py-2 rounded-md hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors",children:[a.jsx("div",{className:"w-8 h-8 rounded-full bg-purple-600 flex items-center justify-center text-white font-semibold",children:n.charAt(0).toUpperCase()}),a.jsx("span",{className:"text-sm font-medium text-gray-900 dark:text-white",children:n}),a.jsx("svg",{className:"w-4 h-4 text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),t&&(0,a.jsxs)(a.Fragment,{children:[a.jsx("div",{className:"fixed inset-0 z-10",onClick:()=>r(!1)}),(0,a.jsxs)("div",{className:"absolute right-0 mt-2 w-56 bg-white dark:bg-gray-800 rounded-md shadow-lg border border-gray-200 dark:border-gray-700 z-20",children:[(0,a.jsxs)("div",{className:"px-4 py-3 border-b border-gray-200 dark:border-gray-700",children:[a.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-white",children:n}),a.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 truncate",children:l})]}),a.jsx("div",{className:"py-1",children:a.jsx("button",{onClick:()=>{sessionStorage.removeItem("viewAsOrganization"),sessionStorage.removeItem("viewAsCustomer"),(0,s.signOut)({callbackUrl:"/login"})},className:"w-full text-left px-4 py-2 text-sm text-red-600 dark:text-red-400 hover:bg-gray-100 dark:hover:bg-gray-700",children:"로그아웃"})})]})]})]})]})})}},99837:(e,t,r)=>{"use strict";r.d(t,{Z:()=>i});var a=r(10326);r(17577);let s={primary:"bg-black text-white hover:bg-black/90 dark:bg-white dark:text-black dark:hover:bg-white/90",secondary:"border border-gray-300 text-gray-900 hover:bg-gray-50 dark:border-white/20 dark:text-white dark:hover:bg-white/10",ghost:"text-gray-700 hover:bg-gray-100 dark:text-gray-200 dark:hover:bg-white/10"},d={sm:"h-8 px-3 text-sm",md:"h-10 px-4 text-sm",lg:"h-11 px-5 text-base"};function i({variant:e="primary",size:t="md",className:r="",...i}){return a.jsx("button",{className:`inline-flex items-center justify-center rounded-md font-medium transition-colors focus:outline-none focus:ring-2 focus:ring-offset-2 disabled:opacity-50 disabled:pointer-events-none ${s[e]} ${d[t]} ${r}`,...i})}},85162:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>a});let a=(0,r(68570).createProxy)(String.raw`C:\Users\User\boaz\frontend\src\app\admin\customers\page.tsx#default`)},73881:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>s});var a=r(66621);let s=e=>[{type:"image/x-icon",sizes:"16x16",url:(0,a.fillMetadataSegment)(".",e.params,"favicon.ico")+""}]}};var t=require("../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),a=t.X(0,[8948,9975,6621,5736],()=>r(72067));module.exports=a})();