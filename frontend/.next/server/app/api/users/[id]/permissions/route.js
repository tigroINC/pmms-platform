"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "app/api/users/[id]/permissions/route";
exports.ids = ["app/api/users/[id]/permissions/route"];
exports.modules = {

/***/ "@prisma/client":
/*!*********************************!*\
  !*** external "@prisma/client" ***!
  \*********************************/
/***/ ((module) => {

module.exports = require("@prisma/client");

/***/ }),

/***/ "../../client/components/action-async-storage.external":
/*!*******************************************************************************!*\
  !*** external "next/dist/client/components/action-async-storage.external.js" ***!
  \*******************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/client/components/action-async-storage.external.js");

/***/ }),

/***/ "../../client/components/request-async-storage.external":
/*!********************************************************************************!*\
  !*** external "next/dist/client/components/request-async-storage.external.js" ***!
  \********************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/client/components/request-async-storage.external.js");

/***/ }),

/***/ "../../client/components/static-generation-async-storage.external":
/*!******************************************************************************************!*\
  !*** external "next/dist/client/components/static-generation-async-storage.external.js" ***!
  \******************************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/client/components/static-generation-async-storage.external.js");

/***/ }),

/***/ "next/dist/compiled/next-server/app-page.runtime.dev.js":
/*!*************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-page.runtime.dev.js" ***!
  \*************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-page.runtime.dev.js");

/***/ }),

/***/ "next/dist/compiled/next-server/app-route.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-route.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-route.runtime.dev.js");

/***/ }),

/***/ "assert":
/*!*************************!*\
  !*** external "assert" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("assert");

/***/ }),

/***/ "buffer":
/*!*************************!*\
  !*** external "buffer" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("buffer");

/***/ }),

/***/ "crypto":
/*!*************************!*\
  !*** external "crypto" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("crypto");

/***/ }),

/***/ "events":
/*!*************************!*\
  !*** external "events" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("events");

/***/ }),

/***/ "http":
/*!***********************!*\
  !*** external "http" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("http");

/***/ }),

/***/ "https":
/*!************************!*\
  !*** external "https" ***!
  \************************/
/***/ ((module) => {

module.exports = require("https");

/***/ }),

/***/ "querystring":
/*!******************************!*\
  !*** external "querystring" ***!
  \******************************/
/***/ ((module) => {

module.exports = require("querystring");

/***/ }),

/***/ "url":
/*!**********************!*\
  !*** external "url" ***!
  \**********************/
/***/ ((module) => {

module.exports = require("url");

/***/ }),

/***/ "util":
/*!***********************!*\
  !*** external "util" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("util");

/***/ }),

/***/ "zlib":
/*!***********************!*\
  !*** external "zlib" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("zlib");

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fusers%2F%5Bid%5D%2Fpermissions%2Froute&page=%2Fapi%2Fusers%2F%5Bid%5D%2Fpermissions%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fusers%2F%5Bid%5D%2Fpermissions%2Froute.ts&appDir=C%3A%5CUsers%5CUser%5Cboaz%5Cfrontend%5Csrc%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5CUser%5Cboaz%5Cfrontend&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=standalone&preferredRegion=&middlewareConfig=e30%3D!":
/*!****************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fusers%2F%5Bid%5D%2Fpermissions%2Froute&page=%2Fapi%2Fusers%2F%5Bid%5D%2Fpermissions%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fusers%2F%5Bid%5D%2Fpermissions%2Froute.ts&appDir=C%3A%5CUsers%5CUser%5Cboaz%5Cfrontend%5Csrc%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5CUser%5Cboaz%5Cfrontend&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=standalone&preferredRegion=&middlewareConfig=e30%3D! ***!
  \****************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   originalPathname: () => (/* binding */ originalPathname),\n/* harmony export */   patchFetch: () => (/* binding */ patchFetch),\n/* harmony export */   requestAsyncStorage: () => (/* binding */ requestAsyncStorage),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   serverHooks: () => (/* binding */ serverHooks),\n/* harmony export */   staticGenerationAsyncStorage: () => (/* binding */ staticGenerationAsyncStorage)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/app-route/module.compiled */ \"(rsc)/./node_modules/next/dist/server/future/route-modules/app-route/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(rsc)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/server/lib/patch-fetch */ \"(rsc)/./node_modules/next/dist/server/lib/patch-fetch.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var C_Users_User_boaz_frontend_src_app_api_users_id_permissions_route_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./src/app/api/users/[id]/permissions/route.ts */ \"(rsc)/./src/app/api/users/[id]/permissions/route.ts\");\n\n\n\n\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = \"standalone\"\nconst routeModule = new next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__.AppRouteRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n        page: \"/api/users/[id]/permissions/route\",\n        pathname: \"/api/users/[id]/permissions\",\n        filename: \"route\",\n        bundlePath: \"app/api/users/[id]/permissions/route\"\n    },\n    resolvedPagePath: \"C:\\\\Users\\\\User\\\\boaz\\\\frontend\\\\src\\\\app\\\\api\\\\users\\\\[id]\\\\permissions\\\\route.ts\",\n    nextConfigOutput,\n    userland: C_Users_User_boaz_frontend_src_app_api_users_id_permissions_route_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { requestAsyncStorage, staticGenerationAsyncStorage, serverHooks } = routeModule;\nconst originalPathname = \"/api/users/[id]/permissions/route\";\nfunction patchFetch() {\n    return (0,next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__.patchFetch)({\n        serverHooks,\n        staticGenerationAsyncStorage\n    });\n}\n\n\n//# sourceMappingURL=app-route.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWFwcC1sb2FkZXIuanM/bmFtZT1hcHAlMkZhcGklMkZ1c2VycyUyRiU1QmlkJTVEJTJGcGVybWlzc2lvbnMlMkZyb3V0ZSZwYWdlPSUyRmFwaSUyRnVzZXJzJTJGJTVCaWQlNUQlMkZwZXJtaXNzaW9ucyUyRnJvdXRlJmFwcFBhdGhzPSZwYWdlUGF0aD1wcml2YXRlLW5leHQtYXBwLWRpciUyRmFwaSUyRnVzZXJzJTJGJTVCaWQlNUQlMkZwZXJtaXNzaW9ucyUyRnJvdXRlLnRzJmFwcERpcj1DJTNBJTVDVXNlcnMlNUNVc2VyJTVDYm9heiU1Q2Zyb250ZW5kJTVDc3JjJTVDYXBwJnBhZ2VFeHRlbnNpb25zPXRzeCZwYWdlRXh0ZW5zaW9ucz10cyZwYWdlRXh0ZW5zaW9ucz1qc3gmcGFnZUV4dGVuc2lvbnM9anMmcm9vdERpcj1DJTNBJTVDVXNlcnMlNUNVc2VyJTVDYm9heiU1Q2Zyb250ZW5kJmlzRGV2PXRydWUmdHNjb25maWdQYXRoPXRzY29uZmlnLmpzb24mYmFzZVBhdGg9JmFzc2V0UHJlZml4PSZuZXh0Q29uZmlnT3V0cHV0PXN0YW5kYWxvbmUmcHJlZmVycmVkUmVnaW9uPSZtaWRkbGV3YXJlQ29uZmlnPWUzMCUzRCEiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7O0FBQXNHO0FBQ3ZDO0FBQ2M7QUFDa0M7QUFDL0c7QUFDQTtBQUNBO0FBQ0Esd0JBQXdCLGdIQUFtQjtBQUMzQztBQUNBLGNBQWMseUVBQVM7QUFDdkI7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLFlBQVk7QUFDWixDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0EsUUFBUSxpRUFBaUU7QUFDekU7QUFDQTtBQUNBLFdBQVcsNEVBQVc7QUFDdEI7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUN1SDs7QUFFdkgiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9mcm9udGVuZC8/ZGQ3ZCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBBcHBSb3V0ZVJvdXRlTW9kdWxlIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvZnV0dXJlL3JvdXRlLW1vZHVsZXMvYXBwLXJvdXRlL21vZHVsZS5jb21waWxlZFwiO1xuaW1wb3J0IHsgUm91dGVLaW5kIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvZnV0dXJlL3JvdXRlLWtpbmRcIjtcbmltcG9ydCB7IHBhdGNoRmV0Y2ggYXMgX3BhdGNoRmV0Y2ggfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9saWIvcGF0Y2gtZmV0Y2hcIjtcbmltcG9ydCAqIGFzIHVzZXJsYW5kIGZyb20gXCJDOlxcXFxVc2Vyc1xcXFxVc2VyXFxcXGJvYXpcXFxcZnJvbnRlbmRcXFxcc3JjXFxcXGFwcFxcXFxhcGlcXFxcdXNlcnNcXFxcW2lkXVxcXFxwZXJtaXNzaW9uc1xcXFxyb3V0ZS50c1wiO1xuLy8gV2UgaW5qZWN0IHRoZSBuZXh0Q29uZmlnT3V0cHV0IGhlcmUgc28gdGhhdCB3ZSBjYW4gdXNlIHRoZW0gaW4gdGhlIHJvdXRlXG4vLyBtb2R1bGUuXG5jb25zdCBuZXh0Q29uZmlnT3V0cHV0ID0gXCJzdGFuZGFsb25lXCJcbmNvbnN0IHJvdXRlTW9kdWxlID0gbmV3IEFwcFJvdXRlUm91dGVNb2R1bGUoe1xuICAgIGRlZmluaXRpb246IHtcbiAgICAgICAga2luZDogUm91dGVLaW5kLkFQUF9ST1VURSxcbiAgICAgICAgcGFnZTogXCIvYXBpL3VzZXJzL1tpZF0vcGVybWlzc2lvbnMvcm91dGVcIixcbiAgICAgICAgcGF0aG5hbWU6IFwiL2FwaS91c2Vycy9baWRdL3Blcm1pc3Npb25zXCIsXG4gICAgICAgIGZpbGVuYW1lOiBcInJvdXRlXCIsXG4gICAgICAgIGJ1bmRsZVBhdGg6IFwiYXBwL2FwaS91c2Vycy9baWRdL3Blcm1pc3Npb25zL3JvdXRlXCJcbiAgICB9LFxuICAgIHJlc29sdmVkUGFnZVBhdGg6IFwiQzpcXFxcVXNlcnNcXFxcVXNlclxcXFxib2F6XFxcXGZyb250ZW5kXFxcXHNyY1xcXFxhcHBcXFxcYXBpXFxcXHVzZXJzXFxcXFtpZF1cXFxccGVybWlzc2lvbnNcXFxccm91dGUudHNcIixcbiAgICBuZXh0Q29uZmlnT3V0cHV0LFxuICAgIHVzZXJsYW5kXG59KTtcbi8vIFB1bGwgb3V0IHRoZSBleHBvcnRzIHRoYXQgd2UgbmVlZCB0byBleHBvc2UgZnJvbSB0aGUgbW9kdWxlLiBUaGlzIHNob3VsZFxuLy8gYmUgZWxpbWluYXRlZCB3aGVuIHdlJ3ZlIG1vdmVkIHRoZSBvdGhlciByb3V0ZXMgdG8gdGhlIG5ldyBmb3JtYXQuIFRoZXNlXG4vLyBhcmUgdXNlZCB0byBob29rIGludG8gdGhlIHJvdXRlLlxuY29uc3QgeyByZXF1ZXN0QXN5bmNTdG9yYWdlLCBzdGF0aWNHZW5lcmF0aW9uQXN5bmNTdG9yYWdlLCBzZXJ2ZXJIb29rcyB9ID0gcm91dGVNb2R1bGU7XG5jb25zdCBvcmlnaW5hbFBhdGhuYW1lID0gXCIvYXBpL3VzZXJzL1tpZF0vcGVybWlzc2lvbnMvcm91dGVcIjtcbmZ1bmN0aW9uIHBhdGNoRmV0Y2goKSB7XG4gICAgcmV0dXJuIF9wYXRjaEZldGNoKHtcbiAgICAgICAgc2VydmVySG9va3MsXG4gICAgICAgIHN0YXRpY0dlbmVyYXRpb25Bc3luY1N0b3JhZ2VcbiAgICB9KTtcbn1cbmV4cG9ydCB7IHJvdXRlTW9kdWxlLCByZXF1ZXN0QXN5bmNTdG9yYWdlLCBzdGF0aWNHZW5lcmF0aW9uQXN5bmNTdG9yYWdlLCBzZXJ2ZXJIb29rcywgb3JpZ2luYWxQYXRobmFtZSwgcGF0Y2hGZXRjaCwgIH07XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWFwcC1yb3V0ZS5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fusers%2F%5Bid%5D%2Fpermissions%2Froute&page=%2Fapi%2Fusers%2F%5Bid%5D%2Fpermissions%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fusers%2F%5Bid%5D%2Fpermissions%2Froute.ts&appDir=C%3A%5CUsers%5CUser%5Cboaz%5Cfrontend%5Csrc%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5CUser%5Cboaz%5Cfrontend&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=standalone&preferredRegion=&middlewareConfig=e30%3D!\n");

/***/ }),

/***/ "(rsc)/./src/app/api/users/[id]/permissions/route.ts":
/*!*****************************************************!*\
  !*** ./src/app/api/users/[id]/permissions/route.ts ***!
  \*****************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   GET: () => (/* binding */ GET),\n/* harmony export */   PATCH: () => (/* binding */ PATCH)\n/* harmony export */ });\n/* harmony import */ var next_server__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/server */ \"(rsc)/./node_modules/next/dist/api/server.js\");\n/* harmony import */ var next_auth__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next-auth */ \"(rsc)/./node_modules/next-auth/index.js\");\n/* harmony import */ var next_auth__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(next_auth__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _lib_auth__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @/lib/auth */ \"(rsc)/./src/lib/auth.ts\");\n/* harmony import */ var _lib_prisma__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @/lib/prisma */ \"(rsc)/./src/lib/prisma.ts\");\n\n\n\n\n// 사용자 권한 조회\nasync function GET(request, { params }) {\n    try {\n        const session = await (0,next_auth__WEBPACK_IMPORTED_MODULE_1__.getServerSession)(_lib_auth__WEBPACK_IMPORTED_MODULE_2__.authOptions);\n        if (!session) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: \"인증이 필요합니다.\"\n            }, {\n                status: 401\n            });\n        }\n        const { id } = params;\n        // 사용자 정보 조회\n        const user = await _lib_prisma__WEBPACK_IMPORTED_MODULE_3__.prisma.user.findUnique({\n            where: {\n                id\n            },\n            include: {\n                customRole: {\n                    include: {\n                        template: {\n                            include: {\n                                defaultPermissions: true\n                            }\n                        },\n                        permissions: true\n                    }\n                },\n                customPermissions: true,\n                assignedCustomers: {\n                    include: {\n                        customer: {\n                            select: {\n                                id: true,\n                                name: true\n                            }\n                        }\n                    }\n                }\n            }\n        });\n        if (!user) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: \"사용자를 찾을 수 없습니다.\"\n            }, {\n                status: 404\n            });\n        }\n        // 권한 계산 - 배열 형태로 반환\n        const permissionSet = new Set();\n        // 1. 시스템 기본 역할 권한\n        const rolePermissionMap = {\n            SUPER_ADMIN: [\n                \"*\"\n            ],\n            ORG_ADMIN: [\n                \"customer.*\",\n                \"user.*\",\n                \"measurement.*\",\n                \"report.*\",\n                \"stack.*\",\n                \"item.*\",\n                \"limit.*\",\n                \"connection.*\",\n                \"organization.*\",\n                \"assignment.*\"\n            ],\n            OPERATOR: [\n                \"customer.view\",\n                \"measurement.create\",\n                \"measurement.update\",\n                \"measurement.read\",\n                \"stack.read\",\n                \"item.read\",\n                \"limit.read\",\n                \"report.read\"\n            ],\n            CUSTOMER_ADMIN: [\n                \"measurement.read\",\n                \"report.read\",\n                \"stack.read\",\n                \"stack.update\",\n                \"user.create\",\n                \"user.read\",\n                \"user.update\",\n                \"connection.approve\",\n                \"measurement.comment\",\n                \"alert.manage\"\n            ],\n            CUSTOMER_USER: [\n                \"measurement.read\",\n                \"report.read\",\n                \"stack.read\"\n            ]\n        };\n        const systemPermissions = rolePermissionMap[user.role] || [];\n        systemPermissions.forEach((p)=>permissionSet.add(p));\n        // 2. 커스텀 역할 권한 (템플릿 + 역할 권한)\n        if (user.customRole) {\n            // 템플릿 기본 권한\n            if (user.customRole.template) {\n                user.customRole.template.defaultPermissions.forEach((p)=>{\n                    permissionSet.add(p.permissionCode);\n                });\n            }\n            // 역할 레벨 권한 조정\n            user.customRole.permissions.forEach((p)=>{\n                if (p.granted) {\n                    permissionSet.add(p.permissionCode);\n                } else {\n                    permissionSet.delete(p.permissionCode);\n                }\n            });\n        }\n        // 3. 사용자 개별 권한 (최우선)\n        user.customPermissions.forEach((p)=>{\n            if (p.granted) {\n                permissionSet.add(p.permissionCode);\n            } else {\n                permissionSet.delete(p.permissionCode);\n            }\n        });\n        // 상세 정보도 함께 반환\n        const permissionsDetail = {\n            // 시스템 기본 역할\n            systemRole: user.role,\n            // 커스텀 역할\n            customRole: user.customRole ? {\n                id: user.customRole.id,\n                name: user.customRole.name,\n                template: user.customRole.template,\n                permissions: user.customRole.permissions\n            } : null,\n            // 개별 권한\n            customPermissions: user.customPermissions,\n            // 접근 범위\n            accessScope: user.accessScope,\n            // 담당 고객사\n            assignedCustomers: user.assignedCustomers.map((a)=>({\n                    id: a.customer.id,\n                    name: a.customer.name,\n                    isPrimary: a.isPrimary\n                }))\n        };\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            permissions: Array.from(permissionSet),\n            detail: permissionsDetail\n        });\n    } catch (error) {\n        console.error(\"Get user permissions error:\", error);\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            error: \"사용자 권한 조회 중 오류가 발생했습니다.\"\n        }, {\n            status: 500\n        });\n    }\n}\n// 사용자 권한 수정\nasync function PATCH(request, { params }) {\n    try {\n        const session = await (0,next_auth__WEBPACK_IMPORTED_MODULE_1__.getServerSession)(_lib_auth__WEBPACK_IMPORTED_MODULE_2__.authOptions);\n        if (!session) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: \"인증이 필요합니다.\"\n            }, {\n                status: 401\n            });\n        }\n        const userRole = session.user.role;\n        const currentUserId = session.user.id;\n        const { id } = params;\n        // 권한 체크\n        if (userRole !== \"SUPER_ADMIN\" && userRole !== \"ORG_ADMIN\" && userRole !== \"CUSTOMER_SITE_ADMIN\" && userRole !== \"CUSTOMER_GROUP_ADMIN\") {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: \"권한이 없습니다.\"\n            }, {\n                status: 403\n            });\n        }\n        const body = await request.json();\n        const { customRoleId, accessScope, customPermissions, assignedCustomers } = body;\n        // 사용자 존재 확인\n        const user = await _lib_prisma__WEBPACK_IMPORTED_MODULE_3__.prisma.user.findUnique({\n            where: {\n                id\n            }\n        });\n        if (!user) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: \"사용자를 찾을 수 없습니다.\"\n            }, {\n                status: 404\n            });\n        }\n        // 트랜잭션으로 처리\n        const result = await _lib_prisma__WEBPACK_IMPORTED_MODULE_3__.prisma.$transaction(async (tx)=>{\n            // 기본 정보 업데이트\n            const updateData = {};\n            if (customRoleId !== undefined) updateData.customRoleId = customRoleId;\n            if (accessScope !== undefined) updateData.accessScope = accessScope;\n            const updatedUser = await tx.user.update({\n                where: {\n                    id\n                },\n                data: updateData\n            });\n            // 개별 권한 업데이트\n            if (customPermissions) {\n                // 기존 권한 삭제\n                await tx.userPermission.deleteMany({\n                    where: {\n                        userId: id\n                    }\n                });\n                // 새 권한 추가\n                if (customPermissions.length > 0) {\n                    await tx.userPermission.createMany({\n                        data: customPermissions.map((p)=>({\n                                userId: id,\n                                permissionCode: p.permissionCode,\n                                granted: p.granted,\n                                grantedBy: currentUserId,\n                                reason: p.reason\n                            }))\n                    });\n                }\n            }\n            // 담당 고객사 업데이트\n            if (assignedCustomers) {\n                // 기존 할당 삭제\n                await tx.customerAssignment.deleteMany({\n                    where: {\n                        userId: id\n                    }\n                });\n                // 새 할당 추가\n                if (assignedCustomers.length > 0) {\n                    await tx.customerAssignment.createMany({\n                        data: assignedCustomers.map((c)=>({\n                                userId: id,\n                                customerId: c.customerId,\n                                assignedBy: currentUserId\n                            }))\n                    });\n                }\n            }\n            // 활동 로그\n            await tx.activityLog.create({\n                data: {\n                    userId: currentUserId,\n                    action: \"UPDATE_USER_PERMISSIONS\",\n                    target: \"User\",\n                    targetId: id,\n                    details: JSON.stringify({\n                        userName: user.name,\n                        customRoleId,\n                        accessScope,\n                        customPermissionsCount: customPermissions?.length || 0,\n                        assignedCustomersCount: assignedCustomers?.length || 0\n                    })\n                }\n            });\n            return updatedUser;\n        });\n        // 업데이트된 사용자 정보 조회\n        const updatedUser = await _lib_prisma__WEBPACK_IMPORTED_MODULE_3__.prisma.user.findUnique({\n            where: {\n                id\n            },\n            include: {\n                customRole: true,\n                customPermissions: true,\n                assignedCustomers: {\n                    include: {\n                        customer: {\n                            select: {\n                                id: true,\n                                name: true\n                            }\n                        }\n                    }\n                }\n            }\n        });\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            message: \"사용자 권한이 수정되었습니다.\",\n            user: updatedUser\n        });\n    } catch (error) {\n        console.error(\"Update user permissions error:\", error);\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            error: \"사용자 권한 수정 중 오류가 발생했습니다.\"\n        }, {\n            status: 500\n        });\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvYXBwL2FwaS91c2Vycy9baWRdL3Blcm1pc3Npb25zL3JvdXRlLnRzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7QUFBd0Q7QUFDWDtBQUNKO0FBQ0g7QUFFdEMsWUFBWTtBQUNMLGVBQWVJLElBQ3BCQyxPQUFvQixFQUNwQixFQUFFQyxNQUFNLEVBQThCO0lBRXRDLElBQUk7UUFDRixNQUFNQyxVQUFVLE1BQU1OLDJEQUFnQkEsQ0FBQ0Msa0RBQVdBO1FBRWxELElBQUksQ0FBQ0ssU0FBUztZQUNaLE9BQU9QLHFEQUFZQSxDQUFDUSxJQUFJLENBQUM7Z0JBQUVDLE9BQU87WUFBYSxHQUFHO2dCQUFFQyxRQUFRO1lBQUk7UUFDbEU7UUFFQSxNQUFNLEVBQUVDLEVBQUUsRUFBRSxHQUFHTDtRQUVmLFlBQVk7UUFDWixNQUFNTSxPQUFPLE1BQU1ULCtDQUFNQSxDQUFDUyxJQUFJLENBQUNDLFVBQVUsQ0FBQztZQUN4Q0MsT0FBTztnQkFBRUg7WUFBRztZQUNaSSxTQUFTO2dCQUNQQyxZQUFZO29CQUNWRCxTQUFTO3dCQUNQRSxVQUFVOzRCQUNSRixTQUFTO2dDQUNQRyxvQkFBb0I7NEJBQ3RCO3dCQUNGO3dCQUNBQyxhQUFhO29CQUNmO2dCQUNGO2dCQUNBQyxtQkFBbUI7Z0JBQ25CQyxtQkFBbUI7b0JBQ2pCTixTQUFTO3dCQUNQTyxVQUFVOzRCQUNSQyxRQUFRO2dDQUNOWixJQUFJO2dDQUNKYSxNQUFNOzRCQUNSO3dCQUNGO29CQUNGO2dCQUNGO1lBQ0Y7UUFDRjtRQUVBLElBQUksQ0FBQ1osTUFBTTtZQUNULE9BQU9aLHFEQUFZQSxDQUFDUSxJQUFJLENBQUM7Z0JBQUVDLE9BQU87WUFBa0IsR0FBRztnQkFBRUMsUUFBUTtZQUFJO1FBQ3ZFO1FBRUEsb0JBQW9CO1FBQ3BCLE1BQU1lLGdCQUFnQixJQUFJQztRQUUxQixrQkFBa0I7UUFDbEIsTUFBTUMsb0JBQThDO1lBQ2xEQyxhQUFhO2dCQUFDO2FBQUk7WUFDbEJDLFdBQVc7Z0JBQ1Q7Z0JB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cUUsU0FBU0MsS0FBS0MsU0FBUyxDQUFDO3dCQUN0QkMsVUFBVXZFLEtBQUtZLElBQUk7d0JBQ25CK0I7d0JBQ0FaO3dCQUNBeUMsd0JBQXdCaEUsbUJBQW1CK0MsVUFBVTt3QkFDckRrQix3QkFBd0JoRSxtQkFBbUI4QyxVQUFVO29CQUN2RDtnQkFDRjtZQUNGO1lBRUEsT0FBT047UUFDVDtRQUVBLGtCQUFrQjtRQUNsQixNQUFNQSxjQUFjLE1BQU0xRCwrQ0FBTUEsQ0FBQ1MsSUFBSSxDQUFDQyxVQUFVLENBQUM7WUFDL0NDLE9BQU87Z0JBQUVIO1lBQUc7WUFDWkksU0FBUztnQkFDUEMsWUFBWTtnQkFDWkksbUJBQW1CO2dCQUNuQkMsbUJBQW1CO29CQUNqQk4sU0FBUzt3QkFDUE8sVUFBVTs0QkFDUkMsUUFBUTtnQ0FDTlosSUFBSTtnQ0FDSmEsTUFBTTs0QkFDUjt3QkFDRjtvQkFDRjtnQkFDRjtZQUNGO1FBQ0Y7UUFFQSxPQUFPeEIscURBQVlBLENBQUNRLElBQUksQ0FBQztZQUN2QjhFLFNBQVM7WUFDVDFFLE1BQU1pRDtRQUNSO0lBQ0YsRUFBRSxPQUFPcEQsT0FBWTtRQUNuQnlDLFFBQVF6QyxLQUFLLENBQUMsa0NBQWtDQTtRQUNoRCxPQUFPVCxxREFBWUEsQ0FBQ1EsSUFBSSxDQUN0QjtZQUFFQyxPQUFPO1FBQTBCLEdBQ25DO1lBQUVDLFFBQVE7UUFBSTtJQUVsQjtBQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZnJvbnRlbmQvLi9zcmMvYXBwL2FwaS91c2Vycy9baWRdL3Blcm1pc3Npb25zL3JvdXRlLnRzPzc1NzQiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgTmV4dFJlcXVlc3QsIE5leHRSZXNwb25zZSB9IGZyb20gXCJuZXh0L3NlcnZlclwiO1xuaW1wb3J0IHsgZ2V0U2VydmVyU2Vzc2lvbiB9IGZyb20gXCJuZXh0LWF1dGhcIjtcbmltcG9ydCB7IGF1dGhPcHRpb25zIH0gZnJvbSBcIkAvbGliL2F1dGhcIjtcbmltcG9ydCB7IHByaXNtYSB9IGZyb20gXCJAL2xpYi9wcmlzbWFcIjtcblxuLy8g7IKs7Jqp7J6QIOq2jO2VnCDsobDtmoxcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBHRVQoXG4gIHJlcXVlc3Q6IE5leHRSZXF1ZXN0LFxuICB7IHBhcmFtcyB9OiB7IHBhcmFtczogeyBpZDogc3RyaW5nIH0gfVxuKSB7XG4gIHRyeSB7XG4gICAgY29uc3Qgc2Vzc2lvbiA9IGF3YWl0IGdldFNlcnZlclNlc3Npb24oYXV0aE9wdGlvbnMpO1xuXG4gICAgaWYgKCFzZXNzaW9uKSB7XG4gICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oeyBlcnJvcjogXCLsnbjspp3snbQg7ZWE7JqU7ZWp64uI64ukLlwiIH0sIHsgc3RhdHVzOiA0MDEgfSk7XG4gICAgfVxuXG4gICAgY29uc3QgeyBpZCB9ID0gcGFyYW1zO1xuXG4gICAgLy8g7IKs7Jqp7J6QIOygleuztCDsobDtmoxcbiAgICBjb25zdCB1c2VyID0gYXdhaXQgcHJpc21hLnVzZXIuZmluZFVuaXF1ZSh7XG4gICAgICB3aGVyZTogeyBpZCB9LFxuICAgICAgaW5jbHVkZToge1xuICAgICAgICBjdXN0b21Sb2xlOiB7XG4gICAgICAgICAgaW5jbHVkZToge1xuICAgICAgICAgICAgdGVtcGxhdGU6IHtcbiAgICAgICAgICAgICAgaW5jbHVkZToge1xuICAgICAgICAgICAgICAgIGRlZmF1bHRQZXJtaXNzaW9uczogdHJ1ZSxcbiAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBwZXJtaXNzaW9uczogdHJ1ZSxcbiAgICAgICAgICB9LFxuICAgICAgICB9LFxuICAgICAgICBjdXN0b21QZXJtaXNzaW9uczogdHJ1ZSxcbiAgICAgICAgYXNzaWduZWRDdXN0b21lcnM6IHtcbiAgICAgICAgICBpbmNsdWRlOiB7XG4gICAgICAgICAgICBjdXN0b21lcjoge1xuICAgICAgICAgICAgICBzZWxlY3Q6IHtcbiAgICAgICAgICAgICAgICBpZDogdHJ1ZSxcbiAgICAgICAgICAgICAgICBuYW1lOiB0cnVlLFxuICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICB9LFxuICAgICAgICB9LFxuICAgICAgfSxcbiAgICB9KTtcblxuICAgIGlmICghdXNlcikge1xuICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHsgZXJyb3I6IFwi7IKs7Jqp7J6Q66W8IOywvuydhCDsiJgg7JeG7Iq164uI64ukLlwiIH0sIHsgc3RhdHVzOiA0MDQgfSk7XG4gICAgfVxuXG4gICAgLy8g6raM7ZWcIOqzhOyCsCAtIOuwsOyXtCDtmJXtg5zroZwg67CY7ZmYXG4gICAgY29uc3QgcGVybWlzc2lvblNldCA9IG5ldyBTZXQ8c3RyaW5nPigpO1xuXG4gICAgLy8gMS4g7Iuc7Iqk7YWcIOq4sOuzuCDsl63tlaAg6raM7ZWcXG4gICAgY29uc3Qgcm9sZVBlcm1pc3Npb25NYXA6IFJlY29yZDxzdHJpbmcsIHN0cmluZ1tdPiA9IHtcbiAgICAgIFNVUEVSX0FETUlOOiBbJyonXSwgLy8g66qo65OgIOq2jO2VnFxuICAgICAgT1JHX0FETUlOOiBbXG4gICAgICAgICdjdXN0b21lci4qJywgJ3VzZXIuKicsICdtZWFzdXJlbWVudC4qJywgJ3JlcG9ydC4qJyxcbiAgICAgICAgJ3N0YWNrLionLCAnaXRlbS4qJywgJ2xpbWl0LionLCAnY29ubmVjdGlvbi4qJywgJ29yZ2FuaXphdGlvbi4qJywgJ2Fzc2lnbm1lbnQuKidcbiAgICAgIF0sXG4gICAgICBPUEVSQVRPUjogW1xuICAgICAgICAnY3VzdG9tZXIudmlldycsICdtZWFzdXJlbWVudC5jcmVhdGUnLCAnbWVhc3VyZW1lbnQudXBkYXRlJyxcbiAgICAgICAgJ21lYXN1cmVtZW50LnJlYWQnLCAnc3RhY2sucmVhZCcsICdpdGVtLnJlYWQnLCAnbGltaXQucmVhZCcsICdyZXBvcnQucmVhZCdcbiAgICAgIF0sXG4gICAgICBDVVNUT01FUl9BRE1JTjogW1xuICAgICAgICAnbWVhc3VyZW1lbnQucmVhZCcsICdyZXBvcnQucmVhZCcsICdzdGFjay5yZWFkJywgJ3N0YWNrLnVwZGF0ZScsXG4gICAgICAgICd1c2VyLmNyZWF0ZScsICd1c2VyLnJlYWQnLCAndXNlci51cGRhdGUnLCAnY29ubmVjdGlvbi5hcHByb3ZlJyxcbiAgICAgICAgJ21lYXN1cmVtZW50LmNvbW1lbnQnLCAnYWxlcnQubWFuYWdlJ1xuICAgICAgXSxcbiAgICAgIENVU1RPTUVSX1VTRVI6IFtcbiAgICAgICAgJ21lYXN1cmVtZW50LnJlYWQnLCAncmVwb3J0LnJlYWQnLCAnc3RhY2sucmVhZCdcbiAgICAgIF1cbiAgICB9O1xuXG4gICAgY29uc3Qgc3lzdGVtUGVybWlzc2lvbnMgPSByb2xlUGVybWlzc2lvbk1hcFt1c2VyLnJvbGVdIHx8IFtdO1xuICAgIHN5c3RlbVBlcm1pc3Npb25zLmZvckVhY2gocCA9PiBwZXJtaXNzaW9uU2V0LmFkZChwKSk7XG5cbiAgICAvLyAyLiDsu6TsiqTthYAg7Jet7ZWgIOq2jO2VnCAo7YWc7ZSM66a/ICsg7Jet7ZWgIOq2jO2VnClcbiAgICBpZiAodXNlci5jdXN0b21Sb2xlKSB7XG4gICAgICAvLyDthZztlIzrpr8g6riw67O4IOq2jO2VnFxuICAgICAgaWYgKHVzZXIuY3VzdG9tUm9sZS50ZW1wbGF0ZSkge1xuICAgICAgICB1c2VyLmN1c3RvbVJvbGUudGVtcGxhdGUuZGVmYXVsdFBlcm1pc3Npb25zLmZvckVhY2gocCA9PiB7XG4gICAgICAgICAgcGVybWlzc2lvblNldC5hZGQocC5wZXJtaXNzaW9uQ29kZSk7XG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgICAgXG4gICAgICAvLyDsl63tlaAg66CI67KoIOq2jO2VnCDsobDsoJVcbiAgICAgIHVzZXIuY3VzdG9tUm9sZS5wZXJtaXNzaW9ucy5mb3JFYWNoKHAgPT4ge1xuICAgICAgICBpZiAocC5ncmFudGVkKSB7XG4gICAgICAgICAgcGVybWlzc2lvblNldC5hZGQocC5wZXJtaXNzaW9uQ29kZSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgcGVybWlzc2lvblNldC5kZWxldGUocC5wZXJtaXNzaW9uQ29kZSk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH1cblxuICAgIC8vIDMuIOyCrOyaqeyekCDqsJzrs4Qg6raM7ZWcICjstZzsmrDshKApXG4gICAgdXNlci5jdXN0b21QZXJtaXNzaW9ucy5mb3JFYWNoKHAgPT4ge1xuICAgICAgaWYgKHAuZ3JhbnRlZCkge1xuICAgICAgICBwZXJtaXNzaW9uU2V0LmFkZChwLnBlcm1pc3Npb25Db2RlKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHBlcm1pc3Npb25TZXQuZGVsZXRlKHAucGVybWlzc2lvbkNvZGUpO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgLy8g7IOB7IS4IOygleuztOuPhCDtlajqu5gg67CY7ZmYXG4gICAgY29uc3QgcGVybWlzc2lvbnNEZXRhaWwgPSB7XG4gICAgICAvLyDsi5zsiqTthZwg6riw67O4IOyXre2VoFxuICAgICAgc3lzdGVtUm9sZTogdXNlci5yb2xlLFxuICAgICAgXG4gICAgICAvLyDsu6TsiqTthYAg7Jet7ZWgXG4gICAgICBjdXN0b21Sb2xlOiB1c2VyLmN1c3RvbVJvbGUgPyB7XG4gICAgICAgIGlkOiB1c2VyLmN1c3RvbVJvbGUuaWQsXG4gICAgICAgIG5hbWU6IHVzZXIuY3VzdG9tUm9sZS5uYW1lLFxuICAgICAgICB0ZW1wbGF0ZTogdXNlci5jdXN0b21Sb2xlLnRlbXBsYXRlLFxuICAgICAgICBwZXJtaXNzaW9uczogdXNlci5jdXN0b21Sb2xlLnBlcm1pc3Npb25zLFxuICAgICAgfSA6IG51bGwsXG4gICAgICBcbiAgICAgIC8vIOqwnOuzhCDqtoztlZxcbiAgICAgIGN1c3RvbVBlcm1pc3Npb25zOiB1c2VyLmN1c3RvbVBlcm1pc3Npb25zLFxuICAgICAgXG4gICAgICAvLyDsoJHqt7wg67KU7JyEXG4gICAgICBhY2Nlc3NTY29wZTogdXNlci5hY2Nlc3NTY29wZSxcbiAgICAgIFxuICAgICAgLy8g64u064u5IOqzoOqwneyCrFxuICAgICAgYXNzaWduZWRDdXN0b21lcnM6IHVzZXIuYXNzaWduZWRDdXN0b21lcnMubWFwKGEgPT4gKHtcbiAgICAgICAgaWQ6IGEuY3VzdG9tZXIuaWQsXG4gICAgICAgIG5hbWU6IGEuY3VzdG9tZXIubmFtZSxcbiAgICAgICAgaXNQcmltYXJ5OiBhLmlzUHJpbWFyeSxcbiAgICAgIH0pKSxcbiAgICB9O1xuXG4gICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHsgXG4gICAgICBwZXJtaXNzaW9uczogQXJyYXkuZnJvbShwZXJtaXNzaW9uU2V0KSxcbiAgICAgIGRldGFpbDogcGVybWlzc2lvbnNEZXRhaWwgXG4gICAgfSk7XG4gIH0gY2F0Y2ggKGVycm9yOiBhbnkpIHtcbiAgICBjb25zb2xlLmVycm9yKFwiR2V0IHVzZXIgcGVybWlzc2lvbnMgZXJyb3I6XCIsIGVycm9yKTtcbiAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oXG4gICAgICB7IGVycm9yOiBcIuyCrOyaqeyekCDqtoztlZwg7KGw7ZqMIOykkSDsmKTrpZjqsIAg67Cc7IOd7ZaI7Iq164uI64ukLlwiIH0sXG4gICAgICB7IHN0YXR1czogNTAwIH1cbiAgICApO1xuICB9XG59XG5cbi8vIOyCrOyaqeyekCDqtoztlZwg7IiY7KCVXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gUEFUQ0goXG4gIHJlcXVlc3Q6IE5leHRSZXF1ZXN0LFxuICB7IHBhcmFtcyB9OiB7IHBhcmFtczogeyBpZDogc3RyaW5nIH0gfVxuKSB7XG4gIHRyeSB7XG4gICAgY29uc3Qgc2Vzc2lvbiA9IGF3YWl0IGdldFNlcnZlclNlc3Npb24oYXV0aE9wdGlvbnMpO1xuXG4gICAgaWYgKCFzZXNzaW9uKSB7XG4gICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oeyBlcnJvcjogXCLsnbjspp3snbQg7ZWE7JqU7ZWp64uI64ukLlwiIH0sIHsgc3RhdHVzOiA0MDEgfSk7XG4gICAgfVxuXG4gICAgY29uc3QgdXNlclJvbGUgPSAoc2Vzc2lvbi51c2VyIGFzIGFueSkucm9sZTtcbiAgICBjb25zdCBjdXJyZW50VXNlcklkID0gKHNlc3Npb24udXNlciBhcyBhbnkpLmlkO1xuICAgIGNvbnN0IHsgaWQgfSA9IHBhcmFtcztcblxuICAgIC8vIOq2jO2VnCDssrTtgaxcbiAgICBpZiAoXG4gICAgICB1c2VyUm9sZSAhPT0gXCJTVVBFUl9BRE1JTlwiICYmXG4gICAgICB1c2VyUm9sZSAhPT0gXCJPUkdfQURNSU5cIiAmJlxuICAgICAgdXNlclJvbGUgIT09IFwiQ1VTVE9NRVJfU0lURV9BRE1JTlwiICYmXG4gICAgICB1c2VyUm9sZSAhPT0gXCJDVVNUT01FUl9HUk9VUF9BRE1JTlwiXG4gICAgKSB7XG4gICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oeyBlcnJvcjogXCLqtoztlZzsnbQg7JeG7Iq164uI64ukLlwiIH0sIHsgc3RhdHVzOiA0MDMgfSk7XG4gICAgfVxuXG4gICAgY29uc3QgYm9keSA9IGF3YWl0IHJlcXVlc3QuanNvbigpO1xuICAgIGNvbnN0IHsgY3VzdG9tUm9sZUlkLCBhY2Nlc3NTY29wZSwgY3VzdG9tUGVybWlzc2lvbnMsIGFzc2lnbmVkQ3VzdG9tZXJzIH0gPSBib2R5O1xuXG4gICAgLy8g7IKs7Jqp7J6QIOyhtOyerCDtmZXsnbhcbiAgICBjb25zdCB1c2VyID0gYXdhaXQgcHJpc21hLnVzZXIuZmluZFVuaXF1ZSh7XG4gICAgICB3aGVyZTogeyBpZCB9LFxuICAgIH0pO1xuXG4gICAgaWYgKCF1c2VyKSB7XG4gICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oeyBlcnJvcjogXCLsgqzsmqnsnpDrpbwg7LC+7J2EIOyImCDsl4bsirXri4jri6QuXCIgfSwgeyBzdGF0dXM6IDQwNCB9KTtcbiAgICB9XG5cbiAgICAvLyDtirjrnpzsnq3shZjsnLzroZwg7LKY66asXG4gICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgcHJpc21hLiR0cmFuc2FjdGlvbihhc3luYyAodHgpID0+IHtcbiAgICAgIC8vIOq4sOuzuCDsoJXrs7Qg7JeF642w7J207Yq4XG4gICAgICBjb25zdCB1cGRhdGVEYXRhOiBhbnkgPSB7fTtcbiAgICAgIGlmIChjdXN0b21Sb2xlSWQgIT09IHVuZGVmaW5lZCkgdXBkYXRlRGF0YS5jdXN0b21Sb2xlSWQgPSBjdXN0b21Sb2xlSWQ7XG4gICAgICBpZiAoYWNjZXNzU2NvcGUgIT09IHVuZGVmaW5lZCkgdXBkYXRlRGF0YS5hY2Nlc3NTY29wZSA9IGFjY2Vzc1Njb3BlO1xuXG4gICAgICBjb25zdCB1cGRhdGVkVXNlciA9IGF3YWl0IHR4LnVzZXIudXBkYXRlKHtcbiAgICAgICAgd2hlcmU6IHsgaWQgfSxcbiAgICAgICAgZGF0YTogdXBkYXRlRGF0YSxcbiAgICAgIH0pO1xuXG4gICAgICAvLyDqsJzrs4Qg6raM7ZWcIOyXheuNsOydtO2KuFxuICAgICAgaWYgKGN1c3RvbVBlcm1pc3Npb25zKSB7XG4gICAgICAgIC8vIOq4sOyhtCDqtoztlZwg7IKt7KCcXG4gICAgICAgIGF3YWl0IHR4LnVzZXJQZXJtaXNzaW9uLmRlbGV0ZU1hbnkoe1xuICAgICAgICAgIHdoZXJlOiB7IHVzZXJJZDogaWQgfSxcbiAgICAgICAgfSk7XG5cbiAgICAgICAgLy8g7IOIIOq2jO2VnCDstpTqsIBcbiAgICAgICAgaWYgKGN1c3RvbVBlcm1pc3Npb25zLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICBhd2FpdCB0eC51c2VyUGVybWlzc2lvbi5jcmVhdGVNYW55KHtcbiAgICAgICAgICAgIGRhdGE6IGN1c3RvbVBlcm1pc3Npb25zLm1hcCgocDogYW55KSA9PiAoe1xuICAgICAgICAgICAgICB1c2VySWQ6IGlkLFxuICAgICAgICAgICAgICBwZXJtaXNzaW9uQ29kZTogcC5wZXJtaXNzaW9uQ29kZSxcbiAgICAgICAgICAgICAgZ3JhbnRlZDogcC5ncmFudGVkLFxuICAgICAgICAgICAgICBncmFudGVkQnk6IGN1cnJlbnRVc2VySWQsXG4gICAgICAgICAgICAgIHJlYXNvbjogcC5yZWFzb24sXG4gICAgICAgICAgICB9KSksXG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgLy8g64u064u5IOqzoOqwneyCrCDsl4XrjbDsnbTtirhcbiAgICAgIGlmIChhc3NpZ25lZEN1c3RvbWVycykge1xuICAgICAgICAvLyDquLDsobQg7ZWg64u5IOyCreygnFxuICAgICAgICBhd2FpdCB0eC5jdXN0b21lckFzc2lnbm1lbnQuZGVsZXRlTWFueSh7XG4gICAgICAgICAgd2hlcmU6IHsgdXNlcklkOiBpZCB9LFxuICAgICAgICB9KTtcblxuICAgICAgICAvLyDsg4gg7ZWg64u5IOy2lOqwgFxuICAgICAgICBpZiAoYXNzaWduZWRDdXN0b21lcnMubGVuZ3RoID4gMCkge1xuICAgICAgICAgIGF3YWl0IHR4LmN1c3RvbWVyQXNzaWdubWVudC5jcmVhdGVNYW55KHtcbiAgICAgICAgICAgIGRhdGE6IGFzc2lnbmVkQ3VzdG9tZXJzLm1hcCgoYzogYW55KSA9PiAoe1xuICAgICAgICAgICAgICB1c2VySWQ6IGlkLFxuICAgICAgICAgICAgICBjdXN0b21lcklkOiBjLmN1c3RvbWVySWQsXG4gICAgICAgICAgICAgIGFzc2lnbmVkQnk6IGN1cnJlbnRVc2VySWQsXG4gICAgICAgICAgICB9KSksXG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgLy8g7Zmc64+ZIOuhnOq3uFxuICAgICAgYXdhaXQgdHguYWN0aXZpdHlMb2cuY3JlYXRlKHtcbiAgICAgICAgZGF0YToge1xuICAgICAgICAgIHVzZXJJZDogY3VycmVudFVzZXJJZCxcbiAgICAgICAgICBhY3Rpb246IFwiVVBEQVRFX1VTRVJfUEVSTUlTU0lPTlNcIixcbiAgICAgICAgICB0YXJnZXQ6IFwiVXNlclwiLFxuICAgICAgICAgIHRhcmdldElkOiBpZCxcbiAgICAgICAgICBkZXRhaWxzOiBKU09OLnN0cmluZ2lmeSh7XG4gICAgICAgICAgICB1c2VyTmFtZTogdXNlci5uYW1lLFxuICAgICAgICAgICAgY3VzdG9tUm9sZUlkLFxuICAgICAgICAgICAgYWNjZXNzU2NvcGUsXG4gICAgICAgICAgICBjdXN0b21QZXJtaXNzaW9uc0NvdW50OiBjdXN0b21QZXJtaXNzaW9ucz8ubGVuZ3RoIHx8IDAsXG4gICAgICAgICAgICBhc3NpZ25lZEN1c3RvbWVyc0NvdW50OiBhc3NpZ25lZEN1c3RvbWVycz8ubGVuZ3RoIHx8IDAsXG4gICAgICAgICAgfSksXG4gICAgICAgIH0sXG4gICAgICB9KTtcblxuICAgICAgcmV0dXJuIHVwZGF0ZWRVc2VyO1xuICAgIH0pO1xuXG4gICAgLy8g7JeF642w7J207Yq465CcIOyCrOyaqeyekCDsoJXrs7Qg7KGw7ZqMXG4gICAgY29uc3QgdXBkYXRlZFVzZXIgPSBhd2FpdCBwcmlzbWEudXNlci5maW5kVW5pcXVlKHtcbiAgICAgIHdoZXJlOiB7IGlkIH0sXG4gICAgICBpbmNsdWRlOiB7XG4gICAgICAgIGN1c3RvbVJvbGU6IHRydWUsXG4gICAgICAgIGN1c3RvbVBlcm1pc3Npb25zOiB0cnVlLFxuICAgICAgICBhc3NpZ25lZEN1c3RvbWVyczoge1xuICAgICAgICAgIGluY2x1ZGU6IHtcbiAgICAgICAgICAgIGN1c3RvbWVyOiB7XG4gICAgICAgICAgICAgIHNlbGVjdDoge1xuICAgICAgICAgICAgICAgIGlkOiB0cnVlLFxuICAgICAgICAgICAgICAgIG5hbWU6IHRydWUsXG4gICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB9LFxuICAgICAgICAgIH0sXG4gICAgICAgIH0sXG4gICAgICB9LFxuICAgIH0pO1xuXG4gICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHtcbiAgICAgIG1lc3NhZ2U6IFwi7IKs7Jqp7J6QIOq2jO2VnOydtCDsiJjsoJXrkJjsl4jsirXri4jri6QuXCIsXG4gICAgICB1c2VyOiB1cGRhdGVkVXNlcixcbiAgICB9KTtcbiAgfSBjYXRjaCAoZXJyb3I6IGFueSkge1xuICAgIGNvbnNvbGUuZXJyb3IoXCJVcGRhdGUgdXNlciBwZXJtaXNzaW9ucyBlcnJvcjpcIiwgZXJyb3IpO1xuICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbihcbiAgICAgIHsgZXJyb3I6IFwi7IKs7Jqp7J6QIOq2jO2VnCDsiJjsoJUg7KSRIOyYpOulmOqwgCDrsJzsg53tlojsirXri4jri6QuXCIgfSxcbiAgICAgIHsgc3RhdHVzOiA1MDAgfVxuICAgICk7XG4gIH1cbn1cbiJdLCJuYW1lcyI6WyJOZXh0UmVzcG9uc2UiLCJnZXRTZXJ2ZXJTZXNzaW9uIiwiYXV0aE9wdGlvbnMiLCJwcmlzbWEiLCJHRVQiLCJyZXF1ZXN0IiwicGFyYW1zIiwic2Vzc2lvbiIsImpzb24iLCJlcnJvciIsInN0YXR1cyIsImlkIiwidXNlciIsImZpbmRVbmlxdWUiLCJ3aGVyZSIsImluY2x1ZGUiLCJjdXN0b21Sb2xlIiwidGVtcGxhdGUiLCJkZWZhdWx0UGVybWlzc2lvbnMiLCJwZXJtaXNzaW9ucyIsImN1c3RvbVBlcm1pc3Npb25zIiwiYXNzaWduZWRDdXN0b21lcnMiLCJjdXN0b21lciIsInNlbGVjdCIsIm5hbWUiLCJwZXJtaXNzaW9uU2V0IiwiU2V0Iiwicm9sZVBlcm1pc3Npb25NYXAiLCJTVVBFUl9BRE1JTiIsIk9SR19BRE1JTiIsIk9QRVJBVE9SIiwiQ1VTVE9NRVJfQURNSU4iLCJDVVNUT01FUl9VU0VSIiwic3lzdGVtUGVybWlzc2lvbnMiLCJyb2xlIiwiZm9yRWFjaCIsInAiLCJhZGQiLCJwZXJtaXNzaW9uQ29kZSIsImdyYW50ZWQiLCJkZWxldGUiLCJwZXJtaXNzaW9uc0RldGFpbCIsInN5c3RlbVJvbGUiLCJhY2Nlc3NTY29wZSIsIm1hcCIsImEiLCJpc1ByaW1hcnkiLCJBcnJheSIsImZyb20iLCJkZXRhaWwiLCJjb25zb2xlIiwiUEFUQ0giLCJ1c2VyUm9sZSIsImN1cnJlbnRVc2VySWQiLCJib2R5IiwiY3VzdG9tUm9sZUlkIiwicmVzdWx0IiwiJHRyYW5zYWN0aW9uIiwidHgiLCJ1cGRhdGVEYXRhIiwidW5kZWZpbmVkIiwidXBkYXRlZFVzZXIiLCJ1cGRhdGUiLCJkYXRhIiwidXNlclBlcm1pc3Npb24iLCJkZWxldGVNYW55IiwidXNlcklkIiwibGVuZ3RoIiwiY3JlYXRlTWFueSIsImdyYW50ZWRCeSIsInJlYXNvbiIsImN1c3RvbWVyQXNzaWdubWVudCIsImMiLCJjdXN0b21lcklkIiwiYXNzaWduZWRCeSIsImFjdGl2aXR5TG9nIiwiY3JlYXRlIiwiYWN0aW9uIiwidGFyZ2V0IiwidGFyZ2V0SWQiLCJkZXRhaWxzIiwiSlNPTiIsInN0cmluZ2lmeSIsInVzZXJOYW1lIiwiY3VzdG9tUGVybWlzc2lvbnNDb3VudCIsImFzc2lnbmVkQ3VzdG9tZXJzQ291bnQiLCJtZXNzYWdlIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./src/app/api/users/[id]/permissions/route.ts\n");

/***/ }),

/***/ "(rsc)/./src/lib/auth.ts":
/*!*************************!*\
  !*** ./src/lib/auth.ts ***!
  \*************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   authOptions: () => (/* binding */ authOptions)\n/* harmony export */ });\n/* harmony import */ var next_auth_providers_credentials__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next-auth/providers/credentials */ \"(rsc)/./node_modules/next-auth/providers/credentials.js\");\n/* harmony import */ var _next_auth_prisma_adapter__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @next-auth/prisma-adapter */ \"(rsc)/./node_modules/@next-auth/prisma-adapter/dist/index.js\");\n/* harmony import */ var _lib_prisma__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @/lib/prisma */ \"(rsc)/./src/lib/prisma.ts\");\n/* harmony import */ var bcryptjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! bcryptjs */ \"(rsc)/./node_modules/bcryptjs/index.js\");\n\n\n\n\nconst authOptions = {\n    adapter: (0,_next_auth_prisma_adapter__WEBPACK_IMPORTED_MODULE_1__.PrismaAdapter)(_lib_prisma__WEBPACK_IMPORTED_MODULE_2__.prisma),\n    providers: [\n        (0,next_auth_providers_credentials__WEBPACK_IMPORTED_MODULE_0__[\"default\"])({\n            name: \"credentials\",\n            credentials: {\n                email: {\n                    label: \"이메일\",\n                    type: \"email\"\n                },\n                password: {\n                    label: \"비밀번호\",\n                    type: \"password\"\n                }\n            },\n            async authorize (credentials) {\n                if (!credentials?.email || !credentials?.password) {\n                    throw new Error(\"이메일과 비밀번호를 입력해주세요.\");\n                }\n                const user = await _lib_prisma__WEBPACK_IMPORTED_MODULE_2__.prisma.user.findUnique({\n                    where: {\n                        email: credentials.email\n                    },\n                    include: {\n                        organization: true,\n                        customer: true\n                    }\n                });\n                if (!user) {\n                    throw new Error(\"등록되지 않은 이메일입니다.\");\n                }\n                if (user.status !== \"APPROVED\") {\n                    throw new Error(\"승인 대기 중이거나 거부된 계정입니다.\");\n                }\n                if (!user.isActive) {\n                    throw new Error(\"비활성화된 계정입니다.\");\n                }\n                const isPasswordValid = await bcryptjs__WEBPACK_IMPORTED_MODULE_3__[\"default\"].compare(credentials.password, user.password);\n                if (!isPasswordValid) {\n                    throw new Error(\"비밀번호가 일치하지 않습니다.\");\n                }\n                // 로그인 정보 업데이트\n                await _lib_prisma__WEBPACK_IMPORTED_MODULE_2__.prisma.user.update({\n                    where: {\n                        id: user.id\n                    },\n                    data: {\n                        lastLoginAt: new Date(),\n                        loginCount: {\n                            increment: 1\n                        }\n                    }\n                });\n                // 활동 로그 기록\n                await _lib_prisma__WEBPACK_IMPORTED_MODULE_2__.prisma.activityLog.create({\n                    data: {\n                        userId: user.id,\n                        action: \"LOGIN\",\n                        ipAddress: null,\n                        userAgent: null\n                    }\n                });\n                return {\n                    id: user.id,\n                    email: user.email,\n                    name: user.name,\n                    role: user.role,\n                    organizationId: user.organizationId,\n                    customerId: user.customerId,\n                    customerName: user.customer?.name || null,\n                    status: user.status,\n                    passwordResetRequired: user.passwordResetRequired\n                };\n            }\n        })\n    ],\n    callbacks: {\n        async jwt ({ token, user }) {\n            if (user) {\n                token.id = user.id;\n                token.role = user.role;\n                token.organizationId = user.organizationId;\n                token.customerId = user.customerId;\n                token.customerName = user.customerName;\n                token.status = user.status;\n                token.passwordResetRequired = user.passwordResetRequired;\n            }\n            return token;\n        },\n        async session ({ session, token }) {\n            if (session.user) {\n                session.user.id = token.id;\n                session.user.role = token.role;\n                session.user.organizationId = token.organizationId;\n                session.user.customerId = token.customerId;\n                session.user.customerName = token.customerName;\n                session.user.status = token.status;\n                session.user.passwordResetRequired = token.passwordResetRequired;\n            }\n            return session;\n        }\n    },\n    pages: {\n        signIn: \"/login\",\n        error: \"/login\"\n    },\n    session: {\n        strategy: \"jwt\",\n        maxAge: 24 * 60 * 60\n    },\n    secret: process.env.NEXTAUTH_SECRET\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QSxPQUFPLEVBQUVELEtBQUssRUFBRTtZQUM5QixJQUFJQyxRQUFRL0IsSUFBSSxFQUFFO2dCQUNmK0IsUUFBUS9CLElBQUksQ0FBU1csRUFBRSxHQUFHbUIsTUFBTW5CLEVBQUU7Z0JBQ2xDb0IsUUFBUS9CLElBQUksQ0FBU3VCLElBQUksR0FBR08sTUFBTVAsSUFBSTtnQkFDdENRLFFBQVEvQixJQUFJLENBQVN3QixjQUFjLEdBQUdNLE1BQU1OLGNBQWM7Z0JBQzFETyxRQUFRL0IsSUFBSSxDQUFTeUIsVUFBVSxHQUFHSyxNQUFNTCxVQUFVO2dCQUNsRE0sUUFBUS9CLElBQUksQ0FBUzBCLFlBQVksR0FBR0ksTUFBTUosWUFBWTtnQkFDdERLLFFBQVEvQixJQUFJLENBQVNNLE1BQU0sR0FBR3dCLE1BQU14QixNQUFNO2dCQUMxQ3lCLFFBQVEvQixJQUFJLENBQVMyQixxQkFBcUIsR0FBR0csTUFBTUgscUJBQXFCO1lBQzNFO1lBQ0EsT0FBT0k7UUFDVDtJQUNGO0lBQ0FDLE9BQU87UUFDTEMsUUFBUTtRQUNSQyxPQUFPO0lBQ1Q7SUFDQUgsU0FBUztRQUNQSSxVQUFVO1FBQ1ZDLFFBQVEsS0FBSyxLQUFLO0lBQ3BCO0lBQ0FDLFFBQVFDLFFBQVFDLEdBQUcsQ0FBQ0MsZUFBZTtBQUNyQyxFQUFFIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZnJvbnRlbmQvLi9zcmMvbGliL2F1dGgudHM/NjY5MiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBOZXh0QXV0aE9wdGlvbnMgfSBmcm9tIFwibmV4dC1hdXRoXCI7XG5pbXBvcnQgQ3JlZGVudGlhbHNQcm92aWRlciBmcm9tIFwibmV4dC1hdXRoL3Byb3ZpZGVycy9jcmVkZW50aWFsc1wiO1xuaW1wb3J0IHsgUHJpc21hQWRhcHRlciB9IGZyb20gXCJAbmV4dC1hdXRoL3ByaXNtYS1hZGFwdGVyXCI7XG5pbXBvcnQgeyBQcmlzbWFDbGllbnQgfSBmcm9tIFwiQHByaXNtYS9jbGllbnRcIjtcbmltcG9ydCB7IHByaXNtYSB9IGZyb20gXCJAL2xpYi9wcmlzbWFcIjtcbmltcG9ydCBiY3J5cHQgZnJvbSBcImJjcnlwdGpzXCI7XG5cbmV4cG9ydCBjb25zdCBhdXRoT3B0aW9uczogTmV4dEF1dGhPcHRpb25zID0ge1xuICBhZGFwdGVyOiBQcmlzbWFBZGFwdGVyKHByaXNtYSksXG4gIHByb3ZpZGVyczogW1xuICAgIENyZWRlbnRpYWxzUHJvdmlkZXIoe1xuICAgICAgbmFtZTogXCJjcmVkZW50aWFsc1wiLFxuICAgICAgY3JlZGVudGlhbHM6IHtcbiAgICAgICAgZW1haWw6IHsgbGFiZWw6IFwi7J2066mU7J28XCIsIHR5cGU6IFwiZW1haWxcIiB9LFxuICAgICAgICBwYXNzd29yZDogeyBsYWJlbDogXCLruYTrsIDrsojtmLhcIiwgdHlwZTogXCJwYXNzd29yZFwiIH1cbiAgICAgIH0sXG4gICAgICBhc3luYyBhdXRob3JpemUoY3JlZGVudGlhbHMpIHtcbiAgICAgICAgaWYgKCFjcmVkZW50aWFscz8uZW1haWwgfHwgIWNyZWRlbnRpYWxzPy5wYXNzd29yZCkge1xuICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIuydtOuplOydvOqzvCDruYTrsIDrsojtmLjrpbwg7J6F66Cl7ZW07KO87IS47JqULlwiKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IHVzZXIgPSBhd2FpdCBwcmlzbWEudXNlci5maW5kVW5pcXVlKHtcbiAgICAgICAgICB3aGVyZTogeyBlbWFpbDogY3JlZGVudGlhbHMuZW1haWwgfSxcbiAgICAgICAgICBpbmNsdWRlOiB7XG4gICAgICAgICAgICBvcmdhbml6YXRpb246IHRydWUsXG4gICAgICAgICAgICBjdXN0b21lcjogdHJ1ZSxcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGlmICghdXNlcikge1xuICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIuuTseuhneuQmOyngCDslYrsnYAg7J2066mU7J287J6F64uI64ukLlwiKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICh1c2VyLnN0YXR1cyAhPT0gXCJBUFBST1ZFRFwiKSB7XG4gICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwi7Iq57J24IOuMgOq4sCDspJHsnbTqsbDrgpgg6rGw67aA65CcIOqzhOygleyeheuLiOuLpC5cIik7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoIXVzZXIuaXNBY3RpdmUpIHtcbiAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCLruYTtmZzshLHtmZTrkJwg6rOE7KCV7J6F64uI64ukLlwiKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IGlzUGFzc3dvcmRWYWxpZCA9IGF3YWl0IGJjcnlwdC5jb21wYXJlKFxuICAgICAgICAgIGNyZWRlbnRpYWxzLnBhc3N3b3JkLFxuICAgICAgICAgIHVzZXIucGFzc3dvcmRcbiAgICAgICAgKTtcblxuICAgICAgICBpZiAoIWlzUGFzc3dvcmRWYWxpZCkge1xuICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIuu5hOuwgOuyiO2YuOqwgCDsnbzsuZjtlZjsp4Ag7JWK7Iq164uI64ukLlwiKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIOuhnOq3uOyduCDsoJXrs7Qg7JeF642w7J207Yq4XG4gICAgICAgIGF3YWl0IHByaXNtYS51c2VyLnVwZGF0ZSh7XG4gICAgICAgICAgd2hlcmU6IHsgaWQ6IHVzZXIuaWQgfSxcbiAgICAgICAgICBkYXRhOiB7XG4gICAgICAgICAgICBsYXN0TG9naW5BdDogbmV3IERhdGUoKSxcbiAgICAgICAgICAgIGxvZ2luQ291bnQ6IHsgaW5jcmVtZW50OiAxIH0sXG4gICAgICAgICAgfVxuICAgICAgICB9KTtcblxuICAgICAgICAvLyDtmZzrj5kg66Gc6re4IOq4sOuhnVxuICAgICAgICBhd2FpdCBwcmlzbWEuYWN0aXZpdHlMb2cuY3JlYXRlKHtcbiAgICAgICAgICBkYXRhOiB7XG4gICAgICAgICAgICB1c2VySWQ6IHVzZXIuaWQsXG4gICAgICAgICAgICBhY3Rpb246IFwiTE9HSU5cIixcbiAgICAgICAgICAgIGlwQWRkcmVzczogbnVsbCwgLy8g66+465Ok7Juo7Ja07JeQ7IScIOy2lOqwgCDqsIDriqVcbiAgICAgICAgICAgIHVzZXJBZ2VudDogbnVsbCxcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuXG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgaWQ6IHVzZXIuaWQsXG4gICAgICAgICAgZW1haWw6IHVzZXIuZW1haWwsXG4gICAgICAgICAgbmFtZTogdXNlci5uYW1lLFxuICAgICAgICAgIHJvbGU6IHVzZXIucm9sZSxcbiAgICAgICAgICBvcmdhbml6YXRpb25JZDogdXNlci5vcmdhbml6YXRpb25JZCxcbiAgICAgICAgICBjdXN0b21lcklkOiB1c2VyLmN1c3RvbWVySWQsXG4gICAgICAgICAgY3VzdG9tZXJOYW1lOiB1c2VyLmN1c3RvbWVyPy5uYW1lIHx8IG51bGwsXG4gICAgICAgICAgc3RhdHVzOiB1c2VyLnN0YXR1cyxcbiAgICAgICAgICBwYXNzd29yZFJlc2V0UmVxdWlyZWQ6IHVzZXIucGFzc3dvcmRSZXNldFJlcXVpcmVkLFxuICAgICAgICB9O1xuICAgICAgfVxuICAgIH0pXG4gIF0sXG4gIGNhbGxiYWNrczoge1xuICAgIGFzeW5jIGp3dCh7IHRva2VuLCB1c2VyIH0pIHtcbiAgICAgIGlmICh1c2VyKSB7XG4gICAgICAgIHRva2VuLmlkID0gKHVzZXIgYXMgYW55KS5pZDtcbiAgICAgICAgdG9rZW4ucm9sZSA9ICh1c2VyIGFzIGFueSkucm9sZTtcbiAgICAgICAgdG9rZW4ub3JnYW5pemF0aW9uSWQgPSAodXNlciBhcyBhbnkpLm9yZ2FuaXphdGlvbklkO1xuICAgICAgICB0b2tlbi5jdXN0b21lcklkID0gKHVzZXIgYXMgYW55KS5jdXN0b21lcklkO1xuICAgICAgICB0b2tlbi5jdXN0b21lck5hbWUgPSAodXNlciBhcyBhbnkpLmN1c3RvbWVyTmFtZTtcbiAgICAgICAgdG9rZW4uc3RhdHVzID0gKHVzZXIgYXMgYW55KS5zdGF0dXM7XG4gICAgICAgIHRva2VuLnBhc3N3b3JkUmVzZXRSZXF1aXJlZCA9ICh1c2VyIGFzIGFueSkucGFzc3dvcmRSZXNldFJlcXVpcmVkO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHRva2VuO1xuICAgIH0sXG4gICAgYXN5bmMgc2Vzc2lvbih7IHNlc3Npb24sIHRva2VuIH0pIHtcbiAgICAgIGlmIChzZXNzaW9uLnVzZXIpIHtcbiAgICAgICAgKHNlc3Npb24udXNlciBhcyBhbnkpLmlkID0gdG9rZW4uaWQgYXMgc3RyaW5nO1xuICAgICAgICAoc2Vzc2lvbi51c2VyIGFzIGFueSkucm9sZSA9IHRva2VuLnJvbGUgYXMgc3RyaW5nO1xuICAgICAgICAoc2Vzc2lvbi51c2VyIGFzIGFueSkub3JnYW5pemF0aW9uSWQgPSB0b2tlbi5vcmdhbml6YXRpb25JZCBhcyBzdHJpbmcgfCBudWxsO1xuICAgICAgICAoc2Vzc2lvbi51c2VyIGFzIGFueSkuY3VzdG9tZXJJZCA9IHRva2VuLmN1c3RvbWVySWQgYXMgc3RyaW5nIHwgbnVsbDtcbiAgICAgICAgKHNlc3Npb24udXNlciBhcyBhbnkpLmN1c3RvbWVyTmFtZSA9IHRva2VuLmN1c3RvbWVyTmFtZSBhcyBzdHJpbmcgfCBudWxsO1xuICAgICAgICAoc2Vzc2lvbi51c2VyIGFzIGFueSkuc3RhdHVzID0gdG9rZW4uc3RhdHVzIGFzIHN0cmluZztcbiAgICAgICAgKHNlc3Npb24udXNlciBhcyBhbnkpLnBhc3N3b3JkUmVzZXRSZXF1aXJlZCA9IHRva2VuLnBhc3N3b3JkUmVzZXRSZXF1aXJlZCBhcyBib29sZWFuO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHNlc3Npb247XG4gICAgfVxuICB9LFxuICBwYWdlczoge1xuICAgIHNpZ25JbjogXCIvbG9naW5cIixcbiAgICBlcnJvcjogXCIvbG9naW5cIixcbiAgfSxcbiAgc2Vzc2lvbjoge1xuICAgIHN0cmF0ZWd5OiBcImp3dFwiLFxuICAgIG1heEFnZTogMjQgKiA2MCAqIDYwLCAvLyAyNOyLnOqwhFxuICB9LFxuICBzZWNyZXQ6IHByb2Nlc3MuZW52Lk5FWFRBVVRIX1NFQ1JFVCxcbn07XG4iXSwibmFtZXMiOlsiQ3JlZGVudGlhbHNQcm92aWRlciIsIlByaXNtYUFkYXB0ZXIiLCJwcmlzbWEiLCJiY3J5cHQiLCJhdXRoT3B0aW9ucyIsImFkYXB0ZXIiLCJwcm92aWRlcnMiLCJuYW1lIiwiY3JlZGVudGlhbHMiLCJlbWFpbCIsImxhYmVsIiwidHlwZSIsInBhc3N3b3JkIiwiYXV0aG9yaXplIiwiRXJyb3IiLCJ1c2VyIiwiZmluZFVuaXF1ZSIsIndoZXJlIiwiaW5jbHVkZSIsIm9yZ2FuaXphdGlvbiIsImN1c3RvbWVyIiwic3RhdHVzIiwiaXNBY3RpdmUiLCJpc1Bhc3N3b3JkVmFsaWQiLCJjb21wYXJlIiwidXBkYXRlIiwiaWQiLCJkYXRhIiwibGFzdExvZ2luQXQiLCJEYXRlIiwibG9naW5Db3VudCIsImluY3JlbWVudCIsImFjdGl2aXR5TG9nIiwiY3JlYXRlIiwidXNlcklkIiwiYWN0aW9uIiwiaXBBZGRyZXNzIiwidXNlckFnZW50Iiwicm9sZSIsIm9yZ2FuaXphdGlvbklkIiwiY3VzdG9tZXJJZCIsImN1c3RvbWVyTmFtZSIsInBhc3N3b3JkUmVzZXRSZXF1aXJlZCIsImNhbGxiYWNrcyIsImp3dCIsInRva2VuIiwic2Vzc2lvbiIsInBhZ2VzIiwic2lnbkluIiwiZXJyb3IiLCJzdHJhdGVneSIsIm1heEFnZSIsInNlY3JldCIsInByb2Nlc3MiLCJlbnYiLCJORVhUQVVUSF9TRUNSRVQiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./src/lib/auth.ts\n");

/***/ }),

/***/ "(rsc)/./src/lib/prisma.ts":
/*!***************************!*\
  !*** ./src/lib/prisma.ts ***!
  \***************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   prisma: () => (/* binding */ prisma)\n/* harmony export */ });\n/* harmony import */ var _prisma_client__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @prisma/client */ \"@prisma/client\");\n/* harmony import */ var _prisma_client__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_prisma_client__WEBPACK_IMPORTED_MODULE_0__);\n\nconst globalForPrisma = global;\nconst prisma = globalForPrisma.prisma || new _prisma_client__WEBPACK_IMPORTED_MODULE_0__.PrismaClient({\n    log: [\n        \"warn\",\n        \"error\"\n    ]\n});\nif (true) globalForPrisma.prisma = prisma;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvbGliL3ByaXNtYS50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7QUFBOEM7QUFFOUMsTUFBTUMsa0JBQWtCQztBQUVqQixNQUFNQyxTQUNYRixnQkFBZ0JFLE1BQU0sSUFDdEIsSUFBSUgsd0RBQVlBLENBQUM7SUFDZkksS0FBSztRQUFDO1FBQVE7S0FBUTtBQUN4QixHQUFHO0FBRUwsSUFBSUMsSUFBcUMsRUFBRUosZ0JBQWdCRSxNQUFNLEdBQUdBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZnJvbnRlbmQvLi9zcmMvbGliL3ByaXNtYS50cz8wMWQ3Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IFByaXNtYUNsaWVudCB9IGZyb20gXCJAcHJpc21hL2NsaWVudFwiO1xuXG5jb25zdCBnbG9iYWxGb3JQcmlzbWEgPSBnbG9iYWwgYXMgdW5rbm93biBhcyB7IHByaXNtYT86IFByaXNtYUNsaWVudCB9O1xuXG5leHBvcnQgY29uc3QgcHJpc21hID1cbiAgZ2xvYmFsRm9yUHJpc21hLnByaXNtYSB8fFxuICBuZXcgUHJpc21hQ2xpZW50KHtcbiAgICBsb2c6IFtcIndhcm5cIiwgXCJlcnJvclwiXSxcbiAgfSk7XG5cbmlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gXCJwcm9kdWN0aW9uXCIpIGdsb2JhbEZvclByaXNtYS5wcmlzbWEgPSBwcmlzbWE7XG4iXSwibmFtZXMiOlsiUHJpc21hQ2xpZW50IiwiZ2xvYmFsRm9yUHJpc21hIiwiZ2xvYmFsIiwicHJpc21hIiwibG9nIiwicHJvY2VzcyJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./src/lib/prisma.ts\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next","vendor-chunks/next-auth","vendor-chunks/@babel","vendor-chunks/jose","vendor-chunks/openid-client","vendor-chunks/bcryptjs","vendor-chunks/oauth","vendor-chunks/preact","vendor-chunks/uuid","vendor-chunks/@next-auth","vendor-chunks/yallist","vendor-chunks/preact-render-to-string","vendor-chunks/cookie","vendor-chunks/@panva","vendor-chunks/oidc-token-hash"], () => (__webpack_exec__("(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fusers%2F%5Bid%5D%2Fpermissions%2Froute&page=%2Fapi%2Fusers%2F%5Bid%5D%2Fpermissions%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fusers%2F%5Bid%5D%2Fpermissions%2Froute.ts&appDir=C%3A%5CUsers%5CUser%5Cboaz%5Cfrontend%5Csrc%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5CUser%5Cboaz%5Cfrontend&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=standalone&preferredRegion=&middlewareConfig=e30%3D!")));
module.exports = __webpack_exports__;

})();