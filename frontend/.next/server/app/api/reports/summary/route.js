"use strict";(()=>{var e={};e.id=6144,e.ids=[6144],e.modules={20399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},30517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},25099:(e,t,r)=>{r.r(t),r.d(t,{originalPathname:()=>c,patchFetch:()=>v,requestAsyncStorage:()=>d,routeModule:()=>l,serverHooks:()=>g,staticGenerationAsyncStorage:()=>p});var a={};r.r(a),r.d(a,{GET:()=>m});var n=r(49303),i=r(88716),o=r(60670),s=r(87070),u=r(20728);async function m(e){let{searchParams:t}=new URL(e.url),r=t.get("customerId")||void 0,a=t.get("stack")||void 0,n=t.get("itemKey")||void 0,i=t.get("start")||void 0,o=t.get("end")||void 0,m={};r&&(m.customerId=r),n&&(m.itemKey=n),(i||o)&&(m.measuredAt={gte:i?new Date(i):void 0,lte:o?new Date(o):void 0}),a&&(m.stack={name:a});let l=await u._.measurement.findMany({where:m,include:{item:!0}}),d=l.length,p=new Date,g=l.filter(e=>{let t=new Date(e.measuredAt);return t.getFullYear()===p.getFullYear()&&t.getMonth()===p.getMonth()}).length,c=l.filter(e=>e.item&&"number"==typeof e.item.limit&&Number(e.value)>e.item.limit).length,v=l.length?Number((l.reduce((e,t)=>e+Number(t.value),0)/l.length).toFixed(1)):0;return s.NextResponse.json({data:{totalCount:d,monthCount:g,exceed:c,avg:v}})}let l=new n.AppRouteRouteModule({definition:{kind:i.x.APP_ROUTE,page:"/api/reports/summary/route",pathname:"/api/reports/summary",filename:"route",bundlePath:"app/api/reports/summary/route"},resolvedPagePath:"C:\\Users\\User\\boaz\\frontend\\src\\app\\api\\reports\\summary\\route.ts",nextConfigOutput:"standalone",userland:a}),{requestAsyncStorage:d,staticGenerationAsyncStorage:p,serverHooks:g}=l,c="/api/reports/summary/route";function v(){return(0,o.patchFetch)({serverHooks:g,staticGenerationAsyncStorage:p})}},20728:(e,t,r)=>{r.d(t,{_:()=>n});let a=require("@prisma/client"),n=global.prisma||new a.PrismaClient({log:["warn","error"]})}};var t=require("../../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),a=t.X(0,[8948,5972],()=>r(25099));module.exports=a})();