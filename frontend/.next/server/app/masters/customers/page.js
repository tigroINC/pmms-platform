(()=>{var e={};e.id=8201,e.ids=[8201],e.modules={72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},55315:e=>{"use strict";e.exports=require("path")},17360:e=>{"use strict";e.exports=require("url")},7002:(e,s,t)=>{"use strict";t.r(s),t.d(s,{GlobalError:()=>n.a,__next_app__:()=>m,originalPathname:()=>x,pages:()=>o,routeModule:()=>g,tree:()=>c}),t(23541),t(92553),t(35866);var a=t(23191),r=t(88716),l=t(37922),n=t.n(l),i=t(95231),d={};for(let e in i)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(d[e]=()=>i[e]);t.d(s,d);let c=["",{children:["masters",{children:["customers",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,23541)),"C:\\Users\\User\\boaz\\frontend\\src\\app\\masters\\customers\\page.tsx"]}]},{}]},{metadata:{icon:[async e=>(await Promise.resolve().then(t.bind(t,73881))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(t.bind(t,92553)),"C:\\Users\\User\\boaz\\frontend\\src\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(t.t.bind(t,35866,23)),"next/dist/client/components/not-found-error"],metadata:{icon:[async e=>(await Promise.resolve().then(t.bind(t,73881))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}],o=["C:\\Users\\User\\boaz\\frontend\\src\\app\\masters\\customers\\page.tsx"],x="/masters/customers/page",m={require:t,loadChunk:()=>Promise.resolve()},g=new a.AppPageRouteModule({definition:{kind:r.x.APP_PAGE,page:"/masters/customers/page",pathname:"/masters/customers",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},41758:(e,s,t)=>{Promise.resolve().then(t.bind(t,84646))},84646:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>j});var a=t(10326),r=t(17577),l=t(21120),n=t(33326);function i(){let{user:e}=(0,l.a)(),[s,t]=(0,r.useState)(new Set),[a,n]=(0,r.useState)(!0),i=e=>{if(a)return!1;if(s.has("*")||s.has(e))return!0;let t=e.split(".")[0];return!!s.has(`${t}.*`)};return{hasPermission:i,hasAnyPermission:e=>e.some(e=>i(e)),hasAllPermissions:e=>e.every(e=>i(e)),loading:a,permissions:Array.from(s)}}var d=t(89175),c=t(99837),o=t(94585);function x({isOpen:e,onClose:s,onSuccess:t,customer:l}){let n=!!l,[i,o]=(0,r.useState)({code:l?.code||"",name:l?.name||"",businessNumber:l?.businessNumber||"",corporateNumber:l?.corporateNumber||"",fullName:l?.fullName||"",representative:l?.representative||"",siteType:l?.siteType||"",address:l?.address||"",businessType:l?.businessType||"",industry:l?.industry||"",siteCategory:l?.siteCategory||""}),[x,m]=(0,r.useState)(!1),[g,u]=(0,r.useState)(""),h=(e,s)=>{o(t=>{let a={...t,[e]:s};return!n&&"businessNumber"===e&&s&&(a.code=s),a})},p=async e=>{if(e.preventDefault(),u(""),!i.name){u("고객사명은 필수입니다.");return}if(!n&&!i.businessNumber){u("사업자등록번호는 필수입니다.");return}m(!0);try{let e=n?`/api/customers/${l.id}`:"/api/customers",a=await fetch(e,{method:n?"PATCH":"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(i)});if(!a.ok){let e=await a.json();throw Error(e.error||"저장 실패")}n||o({code:"",name:"",businessNumber:"",corporateNumber:"",fullName:"",representative:"",siteType:"",address:"",businessType:"",industry:"",siteCategory:""}),t(),s()}catch(e){u(e.message)}finally{m(!1)}};return e?a.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50",onClick:s,children:(0,a.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl w-full max-w-5xl max-h-[90vh] overflow-y-auto",onClick:e=>e.stopPropagation(),children:[(0,a.jsxs)("div",{className:"sticky top-0 bg-white dark:bg-gray-800 border-b px-6 py-4 flex items-center justify-between",children:[a.jsx("h2",{className:"text-xl font-semibold",children:n?"고객사 정보 수정":"신규 고객사 추가"}),a.jsx("button",{onClick:s,className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300",children:"✕"})]}),(0,a.jsxs)("form",{onSubmit:p,className:"p-6 space-y-4",children:[g&&a.jsx("div",{className:"bg-red-50 dark:bg-red-900/20 text-red-600 dark:text-red-400 px-4 py-3 rounded",children:g}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsxs)("label",{className:"text-sm font-medium",children:["고객사명 ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx(d.Z,{value:i.name,onChange:e=>h("name",e.target.value),required:!0})]}),(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsxs)("label",{className:"text-sm font-medium",children:["사업자등록번호 ",!n&&a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx(d.Z,{value:i.businessNumber,onChange:e=>h("businessNumber",e.target.value),placeholder:"123-45-67890",required:!n,disabled:n})]}),(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsxs)("label",{className:"text-sm font-medium",children:["고객사 코드 ",a.jsx("span",{className:"text-gray-400",children:"(선택)"})]}),a.jsx(d.Z,{value:i.code,onChange:e=>h("code",e.target.value)})]}),(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsxs)("label",{className:"text-sm font-medium",children:["고객사명(정식) ",a.jsx("span",{className:"text-gray-400",children:"(선택)"})]}),a.jsx(d.Z,{value:i.fullName,onChange:e=>h("fullName",e.target.value)})]}),(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsxs)("label",{className:"text-sm font-medium",children:["대표자 ",a.jsx("span",{className:"text-gray-400",children:"(선택)"})]}),a.jsx(d.Z,{value:i.representative,onChange:e=>h("representative",e.target.value)})]}),(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsxs)("label",{className:"text-sm font-medium",children:["사업장 구분 ",a.jsx("span",{className:"text-gray-400",children:"(선택)"})]}),a.jsx(d.Z,{value:i.siteType,onChange:e=>h("siteType",e.target.value)})]}),(0,a.jsxs)("div",{className:"col-span-2 space-y-1",children:[(0,a.jsxs)("label",{className:"text-sm font-medium",children:["주소 ",a.jsx("span",{className:"text-gray-400",children:"(선택)"})]}),a.jsx(d.Z,{value:i.address,onChange:e=>h("address",e.target.value),className:"w-full"})]}),(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsxs)("label",{className:"text-sm font-medium",children:["업태 ",a.jsx("span",{className:"text-gray-400",children:"(선택)"})]}),a.jsx(d.Z,{value:i.businessType,onChange:e=>h("businessType",e.target.value)})]}),(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsxs)("label",{className:"text-sm font-medium",children:["업종 ",a.jsx("span",{className:"text-gray-400",children:"(선택)"})]}),a.jsx("textarea",{value:i.industry,onChange:e=>h("industry",e.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500 resize-none",rows:2})]}),(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsxs)("label",{className:"text-sm font-medium",children:["사업장 종별 ",a.jsx("span",{className:"text-gray-400",children:"(선택)"})]}),a.jsx(d.Z,{value:i.siteCategory,onChange:e=>h("siteCategory",e.target.value)})]}),(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsxs)("label",{className:"text-sm font-medium",children:["법인등록번호 ",a.jsx("span",{className:"text-gray-400",children:"(선택)"})]}),a.jsx(d.Z,{value:i.corporateNumber,onChange:e=>h("corporateNumber",e.target.value),placeholder:"123456-1234567"})]})]}),!n&&a.jsx("div",{className:"bg-blue-50 dark:bg-blue-900/20 p-4 rounded-lg",children:(0,a.jsxs)("p",{className:"text-sm text-gray-700 dark:text-gray-300",children:["\uD83D\uDCA1 고객사 정보만 저장됩니다. 저장 후 ",a.jsx("strong",{children:"초대 링크"}),"를 생성하여 고객사 관리자를 초대하세요."]})}),(0,a.jsxs)("div",{className:"flex gap-3 pt-4",children:[a.jsx(c.Z,{type:"button",variant:"secondary",onClick:s,className:"flex-1",children:"취소"}),a.jsx(c.Z,{type:"submit",disabled:x,className:"flex-1",children:x?"저장 중...":"저장"})]})]})]})}):null}function m({isOpen:e,onClose:s,customer:t,onSuccess:l}){let[n,i]=(0,r.useState)(""),[d,c]=(0,r.useState)(""),[o,x]=(0,r.useState)(""),[m,g]=(0,r.useState)("ADMIN"),[u,h]=(0,r.useState)(""),[p,b]=(0,r.useState)(7),[y,j]=(0,r.useState)(!1),[f,N]=(0,r.useState)(""),v=t?.siteType||"-";if(!e||!t)return null;let k=async e=>{e.preventDefault(),j(!0);try{let e=await fetch("/api/customer-invitations",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({customerId:t.id,adminEmail:n,adminName:d,adminPhone:o,suggestedRole:m,roleNote:u,siteType:t?.siteType,expiryDays:p})}),s=await e.json();if(e.ok){if(s.isExistingEmail){alert(s.autoConnectMessage),C();return}N(s.inviteUrl),l()}else 400===e.status&&s.inviteUrl?confirm("이미 활성화된 초대 링크가 있습니다.\n\n기존 링크를 사용하시겠습니까?\n(취소를 누르면 기존 링크를 무효화하고 새 링크를 생성합니다)")?(N(s.inviteUrl),l()):await w():alert(s.error||"초대 링크 생성 실패")}catch(e){alert("초대 링크 생성 중 오류가 발생했습니다.")}finally{j(!1)}},w=async()=>{j(!0);try{let e=await fetch("/api/customer-invitations",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({customerId:t.id,adminEmail:n,adminName:d,adminPhone:o,suggestedRole:m,roleNote:u,siteType:t?.siteType,expiryDays:p,forceCreate:!0})}),s=await e.json();if(e.ok){if(s.isExistingEmail){alert(s.autoConnectMessage),C();return}N(s.inviteUrl),l()}else alert(s.error||"초대 링크 생성 실패")}catch(e){alert("초대 링크 생성 중 오류가 발생했습니다.")}finally{j(!1)}},C=()=>{i(""),c(""),x(""),g("ADMIN"),h(""),b(7),N(""),s()};return a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,a.jsxs)("div",{className:"bg-white rounded-lg p-6 w-full max-w-md",children:[a.jsx("h2",{className:"text-xl font-bold mb-4",children:"고객사 초대 링크 생성"}),f?(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"mb-4 p-4 bg-green-50 border border-green-200 rounded",children:[a.jsx("p",{className:"text-sm text-green-800 mb-2",children:"✅ 초대 링크가 생성되었습니다!"}),a.jsx("div",{className:"bg-white p-3 rounded border break-all text-sm",children:f})]}),a.jsx("div",{className:"mb-4",children:a.jsx("p",{className:"text-sm text-gray-600",children:"이 링크를 고객사 담당자에게 전달하세요. 링크를 통해 회원가입하면 자동으로 연결됩니다."})}),(0,a.jsxs)("div",{className:"flex gap-2",children:[a.jsx("button",{onClick:()=>{navigator.clipboard.writeText(f),alert("링크가 복사되었습니다!")},className:"flex-1 px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700",children:"\uD83D\uDCCB 링크 복사"}),a.jsx("button",{onClick:C,className:"flex-1 px-4 py-2 border rounded hover:bg-gray-50",children:"닫기"})]})]}):(0,a.jsxs)("form",{onSubmit:k,children:[(0,a.jsxs)("div",{className:"mb-4",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"고객사"}),(0,a.jsxs)("div",{className:"p-3 bg-gray-50 rounded border",children:[a.jsx("div",{className:"font-medium",children:t.name}),a.jsx("div",{className:"text-sm text-gray-500",children:t.businessNumber})]})]}),(0,a.jsxs)("div",{className:"mb-4",children:[(0,a.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["담당자 이메일 ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx("input",{type:"email",value:n,onChange:e=>i(e.target.value),className:"w-full border rounded px-3 py-2",placeholder:"example@company.com",required:!0}),a.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"해당 이메일로만 가입이 가능합니다."})]}),(0,a.jsxs)("div",{className:"mb-4",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"담당자 이름 (선택)"}),a.jsx("input",{type:"text",value:d,onChange:e=>c(e.target.value),className:"w-full border rounded px-3 py-2",placeholder:"홍길동"})]}),(0,a.jsxs)("div",{className:"mb-4",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"담당자 전화번호 (선택)"}),a.jsx("input",{type:"tel",value:o,onChange:e=>x(e.target.value),className:"w-full border rounded px-3 py-2",placeholder:"010-1234-5678"})]}),(0,a.jsxs)("div",{className:"mb-4",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"권장 역할"}),(0,a.jsxs)("select",{value:m,onChange:e=>g(e.target.value),className:"w-full border rounded px-3 py-2",children:[a.jsx("option",{value:"ADMIN",children:"관리자 (CUSTOMER_ADMIN)"}),a.jsx("option",{value:"USER",children:"일반 사용자 (CUSTOMER_USER)"})]}),a.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"초대받은 사람이 가입 시 이 역할로 기본 설정됩니다."})]}),(0,a.jsxs)("div",{className:"mb-4",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"역할 설명 (선택)"}),a.jsx("input",{type:"text",value:u,onChange:e=>h(e.target.value),className:"w-full border rounded px-3 py-2",placeholder:"예: 환경안전팀장급"}),a.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"담당자의 직급이나 역할을 메모할 수 있습니다."})]}),(0,a.jsxs)("div",{className:"mb-4",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"사업장구분"}),a.jsx("div",{className:"p-3 bg-gray-50 rounded border text-gray-700",children:v}),a.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"고객사 정보의 사업장구분이 자동으로 표시됩니다."})]}),(0,a.jsxs)("div",{className:"mb-4",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"링크 유효기간"}),(0,a.jsxs)("select",{value:p,onChange:e=>b(Number(e.target.value)),className:"w-full border rounded px-3 py-2",children:[a.jsx("option",{value:1,children:"1일"}),a.jsx("option",{value:3,children:"3일"}),a.jsx("option",{value:7,children:"7일 (권장)"}),a.jsx("option",{value:14,children:"14일"}),a.jsx("option",{value:30,children:"30일"})]})]}),(0,a.jsxs)("div",{className:"flex gap-2",children:[a.jsx("button",{type:"button",onClick:C,className:"flex-1 px-4 py-2 border rounded hover:bg-gray-50",disabled:y,children:"취소"}),a.jsx("button",{type:"submit",className:"flex-1 px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700 disabled:bg-gray-400",disabled:y,children:y?"생성 중...":"초대 링크 생성"})]})]})]})})}var g=t(32743);function u({isOpen:e,onClose:s}){let{hasPermission:t}=i(),[l,n]=(0,r.useState)([]),[d,c]=(0,r.useState)(!1),[o,x]=(0,r.useState)(null),[m,g]=(0,r.useState)({startDate:"",endDate:"",memo:""});t("contract.view");let u=t("contract.create"),h=t("contract.update"),p=t("contract.delete"),b=async()=>{c(!0);try{let e=await fetch("/api/contracts/customers"),s=await e.json();e.ok?n(s.customers||[]):alert(s.error||"고객사 목록 조회 실패")}catch(e){alert("고객사 목록 조회 중 오류가 발생했습니다.")}finally{c(!1)}},y=(e,s)=>{x(e),s?g({startDate:new Date(s.startDate).toISOString().split("T")[0],endDate:new Date(s.endDate).toISOString().split("T")[0],memo:s.memo||""}):g({startDate:"",endDate:"",memo:""})},j=async e=>{if(!m.startDate||!m.endDate){alert("계약 시작일과 종료일을 입력해주세요.");return}c(!0);try{let s=await fetch("/api/contracts",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({customerId:e,startDate:m.startDate,endDate:m.endDate,memo:m.memo})}),t=await s.json();s.ok?(alert("계약이 저장되었습니다."),x(null),b()):alert(t.error||"저장 실패")}catch(e){alert("저장 중 오류가 발생했습니다.")}finally{c(!1)}},f=async e=>{if(confirm("계약을 삭제하시겠습니까?")){c(!0);try{let s=await fetch(`/api/contracts/${e}`,{method:"DELETE"});if(s.ok)alert("계약이 삭제되었습니다."),b();else{let e=await s.json();alert(e.error||"삭제 실패")}}catch(e){alert("삭제 중 오류가 발생했습니다.")}finally{c(!1)}}},N=e=>{if(!e)return a.jsx("span",{className:"px-2 py-1 text-xs rounded bg-gray-100 text-gray-600 dark:bg-gray-700 dark:text-gray-300",children:"미등록"});let{daysRemaining:s}=e;return s<0?a.jsx("span",{className:"px-2 py-1 text-xs rounded bg-red-100 text-red-700 dark:bg-red-900 dark:text-red-200",children:"만료"}):s<=7?a.jsx("span",{className:"px-2 py-1 text-xs rounded bg-orange-100 text-orange-700 dark:bg-orange-900 dark:text-orange-200",children:"긴급"}):s<=28?a.jsx("span",{className:"px-2 py-1 text-xs rounded bg-yellow-100 text-yellow-700 dark:bg-yellow-900 dark:text-yellow-200",children:"주의"}):a.jsx("span",{className:"px-2 py-1 text-xs rounded bg-green-100 text-green-700 dark:bg-green-900 dark:text-green-200",children:"정상"})};return e?a.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:(0,a.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl w-full max-w-[95vw] max-h-[95vh] overflow-hidden flex flex-col",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between p-6 border-b border-gray-200 dark:border-gray-700",children:[a.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:"계약 관리"}),a.jsx("button",{onClick:s,className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300",children:"✕"})]}),(0,a.jsxs)("div",{className:"flex-1 overflow-y-auto p-6",children:[a.jsx("div",{className:"mb-4",children:(0,a.jsxs)("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:["총 ",l.length,"개 고객사 (잔여일 짧은 순)"]})}),d?a.jsx("div",{className:"text-center py-8 text-gray-500",children:"로딩 중..."}):0===l.length?a.jsx("div",{className:"text-center py-8 text-gray-500",children:"연결된 고객사가 없습니다."}):(0,a.jsxs)(a.Fragment,{children:[a.jsx("div",{className:"hidden md:block overflow-x-auto",children:(0,a.jsxs)("table",{className:"w-full",children:[a.jsx("thead",{className:"bg-gray-50 dark:bg-gray-700",children:(0,a.jsxs)("tr",{children:[a.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase",children:"고객사"}),a.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase",children:"계약 시작일"}),a.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase",children:"계약 종료일"}),a.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase",children:"잔여일"}),a.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase",children:"상태"}),a.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase",children:"메모"}),a.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase",children:"액션"})]})}),a.jsx("tbody",{className:"divide-y divide-gray-200 dark:divide-gray-700",children:l.map(({customer:e,contract:s})=>{let t=o===e.id;return(0,a.jsxs)("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-700",children:[(0,a.jsxs)("td",{className:"px-4 py-3 text-sm font-medium text-gray-900 dark:text-white",children:[e.name,e.code&&(0,a.jsxs)("span",{className:"ml-2 text-xs text-gray-500",children:["(",e.code,")"]})]}),a.jsx("td",{className:"px-4 py-3 text-sm",children:t?a.jsx("input",{type:"date",value:m.startDate,onChange:e=>g({...m,startDate:e.target.value}),className:"border rounded px-2 py-1 text-sm w-full dark:bg-gray-700 dark:border-gray-600"}):s?a.jsx("span",{className:"text-gray-600 dark:text-gray-300",children:new Date(s.startDate).toLocaleDateString()}):a.jsx("span",{className:"text-gray-400",children:"-"})}),a.jsx("td",{className:"px-4 py-3 text-sm",children:t?a.jsx("input",{type:"date",value:m.endDate,onChange:e=>g({...m,endDate:e.target.value}),className:"border rounded px-2 py-1 text-sm w-full dark:bg-gray-700 dark:border-gray-600"}):s?a.jsx("span",{className:"text-gray-600 dark:text-gray-300",children:new Date(s.endDate).toLocaleDateString()}):a.jsx("span",{className:"text-gray-400",children:"-"})}),a.jsx("td",{className:"px-4 py-3 text-sm",children:s?a.jsx("span",{className:s.daysRemaining<0?"text-red-600 font-semibold":s.daysRemaining<=28?"text-orange-600 font-semibold":"text-gray-600 dark:text-gray-300",children:s.daysRemaining<0?`${Math.abs(s.daysRemaining)}일 초과`:`${s.daysRemaining}일`}):a.jsx("span",{className:"text-gray-400",children:"-"})}),a.jsx("td",{className:"px-4 py-3 text-sm",children:N(s)}),a.jsx("td",{className:"px-4 py-3 text-sm",children:t?a.jsx("input",{type:"text",value:m.memo,onChange:e=>g({...m,memo:e.target.value}),placeholder:"메모",className:"border rounded px-2 py-1 text-sm w-full dark:bg-gray-700 dark:border-gray-600"}):a.jsx("span",{className:"text-gray-600 dark:text-gray-300",children:s?.memo||"-"})}),a.jsx("td",{className:"px-4 py-3 text-sm",children:t?(0,a.jsxs)("div",{className:"flex gap-2",children:[a.jsx("button",{onClick:()=>j(e.id),className:"text-green-600 hover:text-green-800 dark:text-green-400 font-medium",disabled:d,children:"저장"}),a.jsx("button",{onClick:()=>x(null),className:"text-gray-600 hover:text-gray-800 dark:text-gray-400",children:"취소"})]}):(0,a.jsxs)("div",{className:"flex gap-2",children:[(u||h)&&a.jsx("button",{onClick:()=>y(e.id,s),className:"text-blue-600 hover:text-blue-800 dark:text-blue-400",children:s?"수정":"등록"}),p&&s&&a.jsx("button",{onClick:()=>f(s.id),className:"text-red-600 hover:text-red-800 dark:text-red-400",children:"삭제"}),!u&&!h&&!p&&a.jsx("span",{className:"text-gray-400",children:"조회만"})]})})]},e.id)})})]})}),a.jsx("div",{className:"md:hidden space-y-3",children:l.map(({customer:e,contract:s})=>{let t=o===e.id;return(0,a.jsxs)("div",{className:"rounded-lg border bg-gray-50 dark:bg-gray-700 p-4 space-y-3",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[a.jsx("div",{className:"font-medium text-gray-900 dark:text-white",children:e.name}),e.code&&(0,a.jsxs)("div",{className:"text-xs text-gray-500",children:["(",e.code,")"]})]}),N(s)]}),t?(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{children:[a.jsx("label",{className:"text-xs text-gray-500",children:"시작일"}),a.jsx("input",{type:"date",value:m.startDate,onChange:e=>g({...m,startDate:e.target.value}),className:"border rounded px-2 py-1 text-sm w-full dark:bg-gray-700 dark:border-gray-600 mt-1"})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"text-xs text-gray-500",children:"종료일"}),a.jsx("input",{type:"date",value:m.endDate,onChange:e=>g({...m,endDate:e.target.value}),className:"border rounded px-2 py-1 text-sm w-full dark:bg-gray-700 dark:border-gray-600 mt-1"})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"text-xs text-gray-500",children:"메모"}),a.jsx("input",{type:"text",value:m.memo,onChange:e=>g({...m,memo:e.target.value}),placeholder:"메모",className:"border rounded px-2 py-1 text-sm w-full dark:bg-gray-700 dark:border-gray-600 mt-1"})]}),(0,a.jsxs)("div",{className:"flex gap-2 pt-2",children:[a.jsx("button",{onClick:()=>j(e.id),className:"flex-1 px-3 py-2 bg-blue-500 text-white rounded hover:bg-blue-600",disabled:d,children:"저장"}),a.jsx("button",{onClick:()=>x(null),className:"flex-1 px-3 py-2 bg-gray-500 text-white rounded hover:bg-gray-600",children:"취소"})]})]}):(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-2 text-sm",children:[(0,a.jsxs)("div",{children:[a.jsx("span",{className:"text-gray-500",children:"\uD83D\uDCC5 시작:"})," ",s?new Date(s.startDate).toLocaleDateString():"-"]}),(0,a.jsxs)("div",{children:[a.jsx("span",{className:"text-gray-500",children:"\uD83D\uDCC5 종료:"})," ",s?new Date(s.endDate).toLocaleDateString():"-"]}),(0,a.jsxs)("div",{children:[a.jsx("span",{className:"text-gray-500",children:"⏱️ 잔여:"})," ",s?s.daysRemaining<0?`${Math.abs(s.daysRemaining)}일 초과`:`${s.daysRemaining}일`:"-"]}),(0,a.jsxs)("div",{className:"col-span-2",children:[a.jsx("span",{className:"text-gray-500",children:"\uD83D\uDCDD 메모:"})," ",s?.memo||"-"]}),(0,a.jsxs)("div",{className:"col-span-2 flex gap-2 pt-2",children:[(u||h)&&a.jsx("button",{onClick:()=>y(e.id,s),className:"flex-1 px-3 py-2 bg-blue-500 text-white rounded hover:bg-blue-600 text-sm",children:s?"수정":"등록"}),p&&s&&a.jsx("button",{onClick:()=>f(s.id),className:"flex-1 px-3 py-2 bg-gray-500 text-white rounded hover:bg-gray-600 text-sm",children:"삭제"})]})]})]},e.id)})})]})]})]})}):null}function h({isOpen:e,onClose:s,organizationId:t,onSuccess:l}){let[n,i]=(0,r.useState)(""),[o,x]=(0,r.useState)([]),[m,g]=(0,r.useState)(!1),[u,h]=(0,r.useState)(!1),[p,b]=(0,r.useState)(null),[y,j]=(0,r.useState)(null);if(!e)return null;let f=o.filter(e=>e.isPublic),N=o.filter(e=>!e.isPublic&&e.createdBy),v=async()=>{if(!n.trim()){alert("검색어를 입력하세요.");return}h(!0);try{let e=await fetch(`/api/customers?tab=search&organizationId=${t}&q=${encodeURIComponent(n)}`),s=await e.json();e.ok?x(s.customers||[]):alert(s.error||"검색 실패")}catch(e){alert("검색 중 오류가 발생했습니다.")}finally{h(!1)}},k=async(e,s)=>{if(confirm(s?`"${e.name}" 고객사와 내부 고객사 정보를 병합하여 연결 요청을 보내시겠습니까?`:`"${e.name}" 고객사에 연결 요청을 보내시겠습니까?`)){g(!0);try{let a={customerId:e.id,organizationId:t};s&&(a.proposedData={internalCustomerId:s.id,code:s.code,corporateNumber:s.corporateNumber,fullName:s.fullName,representative:s.representative,siteType:s.siteType,address:s.address,businessType:s.businessType,industry:s.industry,siteCategory:s.siteCategory});let r=await fetch("/api/customer-organizations",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)}),n=await r.json();r.ok?(alert(n.message||"연결 요청을 보냈습니다."),w(),l()):alert(n.error||"연결 요청 실패")}catch(e){alert("연결 요청 중 오류가 발생했습니다.")}finally{g(!1)}}},w=()=>{i(""),x([]),b(null),j(null),s()};return a.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50",children:(0,a.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl w-full max-w-3xl max-h-[80vh] overflow-hidden flex flex-col",children:[(0,a.jsxs)("div",{className:"px-6 py-4 border-b border-gray-200 dark:border-gray-700 flex items-center justify-between",children:[a.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:"고객사 검색 및 연결"}),a.jsx("button",{onClick:w,className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300",children:"✕"})]}),(0,a.jsxs)("div",{className:"p-6 space-y-4",children:[(0,a.jsxs)("div",{className:"flex gap-2",children:[a.jsx(d.Z,{value:n,onChange:e=>i(e.target.value),placeholder:"회사명 또는 사업자번호 입력",className:"flex-1",onKeyPress:e=>"Enter"===e.key&&v()}),a.jsx(c.Z,{onClick:v,disabled:u,children:u?"검색 중...":"검색"})]}),a.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:"\uD83D\uDCA1 회사명 일부 또는 사업자번호(하이픈 유무 무관)로 검색하세요."})]}),a.jsx("div",{className:"flex-1 overflow-y-auto px-6 pb-6",children:0===o.length?a.jsx("div",{className:"text-center py-12 text-gray-500 dark:text-gray-400",children:u?"검색 중...":"검색 결과가 없습니다."}):(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("h3",{className:"text-sm font-semibold mb-2 text-gray-700 dark:text-gray-300",children:["고객사(가입) (",f.length,")"]}),a.jsx("div",{className:"space-y-2",children:f.map(e=>(0,a.jsxs)("div",{onClick:()=>b(e),className:`border rounded-lg p-3 cursor-pointer transition-colors ${p?.id===e.id?"border-blue-500 bg-blue-50 dark:bg-blue-900/20":"border-gray-200 dark:border-gray-700 hover:bg-gray-50 dark:hover:bg-gray-700/50"}`,children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[a.jsx("span",{className:"font-medium text-sm",children:e.name}),e.siteType&&(0,a.jsxs)("span",{className:"text-xs text-gray-500",children:["(",e.siteType,")"]})]}),a.jsx("div",{className:"text-xs text-gray-500",children:e.businessNumber||"-"})]},e.id))})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("h3",{className:"text-sm font-semibold mb-2 text-gray-700 dark:text-gray-300",children:["고객사(내부) (",N.length,")"]}),a.jsx("div",{className:"space-y-2",children:N.map(e=>(0,a.jsxs)("div",{onClick:()=>j(e),className:`border rounded-lg p-3 cursor-pointer transition-colors ${y?.id===e.id?"border-orange-500 bg-orange-50 dark:bg-orange-900/20":"border-gray-200 dark:border-gray-700 hover:bg-gray-50 dark:hover:bg-gray-700/50"}`,children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[a.jsx("span",{className:"font-medium text-sm",children:e.name}),e.siteType&&(0,a.jsxs)("span",{className:"text-xs text-gray-500",children:["(",e.siteType,")"]})]}),a.jsx("div",{className:"text-xs text-gray-500",children:e.businessNumber||"-"})]},e.id))})]})]})}),(0,a.jsxs)("div",{className:"px-6 py-4 border-t border-gray-200 dark:border-gray-700 flex justify-between items-center",children:[(0,a.jsxs)("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:[p&&y&&a.jsx("span",{className:"text-blue-600 dark:text-blue-400",children:"\uD83D\uDCA1 병합 연결: 내부 정보가 가입 고객사에 추가됩니다"}),p&&!y&&a.jsx("span",{children:"일반 연결 요청"})]}),(0,a.jsxs)("div",{className:"flex gap-2",children:[a.jsx(c.Z,{variant:"secondary",onClick:w,children:"닫기"}),a.jsx(c.Z,{onClick:()=>{if(!p){alert("공개 고객사를 선택하세요.");return}k(p,y)},disabled:!p||m,children:y?"병합 연결":"연결 요청"})]})]})]})})}var p=t(43150);function b({isOpen:e,onClose:s}){let t=[{id:"create",title:"신규 생성",content:`
<h3 style="margin-top: 0; margin-bottom: 16px; font-size: 18px; font-weight: 600;">개별 생성</h3>
<ol style="margin: 0 0 24px 0; padding-left: 24px; line-height: 1.8;">
  <li><strong>신규 등록</strong> 버튼 클릭</li>
  <li>필수 정보 입력:
    <ul style="margin: 8px 0; padding-left: 24px;">
      <li>고객사명</li>
      <li>사업자등록번호</li>
      <li>사업장 구분 (1사업장, 2사업장 등)</li>
    </ul>
  </li>
  <li>선택 정보 입력 (주소, 대표자, 업태/업종 등)</li>
  <li><strong>등록</strong> 버튼으로 저장</li>
</ol>

<h3 style="margin-bottom: 16px; font-size: 18px; font-weight: 600;">일괄 업로드</h3>
<ol style="margin: 0 0 24px 0; padding-left: 24px; line-height: 1.8;">
  <li><strong>일괄 업로드</strong> 버튼 클릭</li>
  <li>Excel/CSV 템플릿 다운로드</li>
  <li>고객사 정보 입력</li>
  <li>파일 업로드</li>
  <li>검증 후 일괄 등록</li>
</ol>

<div style="padding: 12px 16px; background-color: #f0f9ff; border-left: 4px solid #3b82f6; border-radius: 4px; margin-top: 16px;">
  <strong>💡 참고:</strong> 같은 사업자번호로 여러 사업장 생성 가능
</div>
      `.trim()},{id:"invitation",title:"초대 링크 연결",content:`
<h3 style="margin-top: 0; margin-bottom: 16px; font-size: 18px; font-weight: 600;">초대 링크 생성</h3>
<ol style="margin: 0 0 24px 0; padding-left: 24px; line-height: 1.8;">
  <li><strong>내부</strong> 탭에서 고객사 선택</li>
  <li><strong>초대 링크</strong> 버튼 클릭</li>
  <li>관리자 정보 입력:
    <ul style="margin: 8px 0; padding-left: 24px;">
      <li>이메일</li>
      <li>이름</li>
      <li>연락처</li>
      <li>권한 (관리자/일반)</li>
    </ul>
  </li>
  <li>유효기간 설정 (기본 7일)</li>
</ol>

<h3 style="margin-bottom: 16px; font-size: 18px; font-weight: 600;">기존 계정이 있는 경우</h3>
<div style="margin-bottom: 24px; line-height: 1.8;">
  <p style="margin: 0 0 12px 0;"><strong>같은 사업자번호 내 동일 이메일</strong>이 이미 가입되어 있으면:</p>
  <ul style="margin: 0; padding-left: 24px;">
    <li>초대 링크가 생성되지 않음</li>
    <li>안내 메시지 표시: "이미 연결된 계정입니다. 고객시스템에서 승인하면 자동 연결됩니다."</li>
    <li>고객사 시스템의 <strong>환경측정기업관리</strong> 메뉴에 승인 대기 상태로 표시</li>
    <li>고객이 승인하면 새 사업장 자동 연결</li>
  </ul>
</div>

<h3 style="margin-bottom: 16px; font-size: 18px; font-weight: 600;">기존 계정이 없는 경우</h3>
<ul style="margin: 0 0 24px 0; padding-left: 24px; line-height: 1.8;">
  <li>초대 링크 생성 및 표시</li>
  <li>링크 복사 버튼으로 클립보드에 복사</li>
  <li>이메일, 메신저, 문자 등으로 직접 전달</li>
  <li>고객이 링크로 접속하여 회원가입</li>
  <li>가입 완료 시 자동 연결</li>
</ul>

<div style="padding: 12px 16px; background-color: #f0f9ff; border-left: 4px solid #3b82f6; border-radius: 4px; margin-top: 16px;">
  <strong>💡 참고:</strong><br/>
  • 같은 사업자번호의 다른 사업장에 이미 가입한 이메일은 자동 연결<br/>
  • 초대 링크는 유효기간 내 1회만 사용 가능
</div>
      `.trim()},{id:"search",title:"검색 연결",content:`
<h3 style="margin-top: 0; margin-bottom: 16px; font-size: 18px; font-weight: 600;">신규 검색 연결</h3>
<ol style="margin: 0 0 24px 0; padding-left: 24px; line-height: 1.8;">
  <li><strong>연결</strong> 탭으로 이동</li>
  <li><strong>신규 검색 연결</strong> 버튼 클릭</li>
  <li>고객사 유형 선택:
    <ul style="margin: 8px 0; padding-left: 24px;">
      <li><strong>고객사(가입)</strong>: 이미 시스템에 가입한 고객사</li>
      <li><strong>고객사(내부)</strong>: 내부에서 생성한 미연결 고객사</li>
    </ul>
  </li>
  <li>검색 조건 입력 (고객사명, 사업자번호 등)</li>
  <li>검색 결과에서 선택</li>
  <li><strong>연결 요청</strong> 버튼 클릭</li>
</ol>

<h3 style="margin-bottom: 16px; font-size: 18px; font-weight: 600;">연결 승인</h3>
<ul style="margin: 0 0 24px 0; padding-left: 24px; line-height: 1.8;">
  <li>고객사 시스템에서 연결 요청 확인</li>
  <li>고객이 승인하면 연결 완료</li>
  <li><strong>연결</strong> 탭에서 연결 상태 확인</li>
</ul>

<div style="padding: 12px 16px; background-color: #f0f9ff; border-left: 4px solid #3b82f6; border-radius: 4px; margin-top: 16px;">
  <strong>💡 참고:</strong><br/>
  • 고객사(가입): 이미 다른 환경측정기업과 연결된 고객사<br/>
  • 고객사(내부): 아직 연결되지 않은 내부 생성 고객사
</div>
      `.trim()},{id:"management",title:"관리 기능",content:`
<h3 style="margin-top: 0; margin-bottom: 16px; font-size: 18px; font-weight: 600;">수정</h3>
<ul style="margin: 0 0 24px 0; padding-left: 24px; line-height: 1.8;">
  <li>각 고객사 행의 <strong>수정</strong> 버튼 클릭</li>
  <li>정보 수정 후 저장</li>
  <li>수정 시 고객사에 알림 전송</li>
</ul>

<h3 style="margin-bottom: 16px; font-size: 18px; font-weight: 600;">비활성화</h3>
<ul style="margin: 0 0 24px 0; padding-left: 24px; line-height: 1.8;">
  <li><strong>비활성화</strong> 버튼으로 일시 중지</li>
  <li>비활성 상태에서도 데이터 유지</li>
  <li><strong>활성화</strong> 버튼으로 재활성화 가능</li>
</ul>

<h3 style="margin-bottom: 16px; font-size: 18px; font-weight: 600;">삭제</h3>
<ul style="margin: 0 0 24px 0; padding-left: 24px; line-height: 1.8;">
  <li>비활성화된 고객사만 삭제 가능</li>
  <li>측정 기록이 있으면 삭제 불가</li>
  <li><strong>삭제</strong> 버튼 클릭 후 확인</li>
</ul>

<h3 style="margin-bottom: 16px; font-size: 18px; font-weight: 600;">연결 해제</h3>
<ul style="margin: 0 0 24px 0; padding-left: 24px; line-height: 1.8;">
  <li><strong>연결</strong> 탭에서 연결 해제 가능</li>
  <li>연결 해제 시 고객사 데이터는 유지</li>
  <li>재연결 가능</li>
</ul>

<h3 style="margin-bottom: 16px; font-size: 18px; font-weight: 600;">탭별 필터</h3>
<ul style="margin: 0 0 24px 0; padding-left: 24px; line-height: 1.8;">
  <li><strong>전체</strong>: 모든 고객사 (생성 + 연결)</li>
  <li><strong>내부</strong>: 내부 생성 미연결 고객사</li>
  <li><strong>연결</strong>: 연결 완료된 고객사</li>
</ul>

<div style="padding: 12px 16px; background-color: #f0f9ff; border-left: 4px solid #3b82f6; border-radius: 4px; margin-top: 16px;">
  <strong>💡 참고:</strong><br/>
  • 같은 사업자번호의 여러 사업장은 그룹으로 표시<br/>
  • 각 사업장은 독립적으로 관리 가능
</div>
      `.trim()}];return a.jsx(p.Z,{isOpen:e,onClose:s,title:"고객사 관리 도움말",sections:t})}function y({customer:e,role:s,onRefetch:t,onEdit:l,activeTab:n,onCreateInvitation:i,onRequestConnection:d,isGrouped:c=!1,isFirstInGroup:x=!1,isLastInGroup:m=!1,groupSize:g=1,isReadOnly:u=!1}){let[h,p]=(0,r.useState)(!1),b=async()=>{if(!h){p(!0);try{(await fetch(`/api/customers/${e.id}`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({isActive:!e.isActive})})).ok?t():alert("상태 변경 실패")}catch(e){alert("오류 발생")}finally{p(!1)}}},y=async()=>{if(e._count?.measurements>0){alert("측정 기록이 있는 고객사는 삭제할 수 없습니다. 비활성화를 사용하세요.");return}if(confirm(`"${e.name}" 고객사를 삭제하시겠습니까?

굴뚝: ${e._count?.stacks||0}개도 함께 삭제됩니다.`)){p(!0);try{let s=await fetch(`/api/customers/${e.id}`,{method:"DELETE"});if(s.ok)t();else{let e=await s.json();alert(e.error||"삭제 실패")}}catch(e){alert("오류 발생")}finally{p(!1)}}},j=!1!==e.isActive,f=c?x?"border-l-4 border-l-blue-400":m?"border-l-4 border-l-blue-200":"border-l-4 border-l-blue-300":"";return(0,a.jsxs)(o.Tr,{className:`${j?"":"opacity-50 bg-gray-50 dark:bg-gray-900/20"} ${f}`,children:[a.jsx(o.Td,{children:j?a.jsx("span",{className:"inline-block px-2 py-0.5 rounded bg-green-100 text-green-700 dark:bg-green-900/30 dark:text-green-300 text-xs",children:"활성"}):a.jsx("span",{className:"inline-block px-2 py-0.5 rounded bg-gray-100 text-gray-600 dark:bg-gray-700 dark:text-gray-400 text-xs",children:"비활성"})}),(0,a.jsxs)(o.Td,{className:"font-mono text-xs break-words",children:[e.code||"-",c&&x&&(0,a.jsxs)("span",{className:"ml-2 text-xs text-blue-600",children:["(",g,"개 사업장)"]})]}),a.jsx(o.Td,{className:"break-words",children:e.name}),a.jsx(o.Td,{className:"font-mono text-xs break-words",children:e.businessNumber||"-"}),a.jsx(o.Td,{className:"break-words",children:e.fullName||e.name}),a.jsx(o.Td,{className:"break-words",children:e.representative||"-"}),a.jsx(o.Td,{className:"break-words",children:e._siteType||e.siteType||"-"}),a.jsx(o.Td,{className:"break-words",children:e.address||"-"}),a.jsx(o.Td,{className:"break-words",children:e.businessType||"-"}),a.jsx(o.Td,{className:"break-words",children:e.industry||"-"}),a.jsx(o.Td,{className:"break-words",children:e.siteCategory||"-"}),a.jsx(o.Td,{className:"font-mono text-xs break-words",children:e.corporateNumber||"-"}),a.jsx(o.Td,{className:"text-center",children:e._count?.stacks??0}),!u&&a.jsx(o.Td,{children:(0,a.jsxs)("div",{className:"flex gap-2",children:[a.jsx("button",{onClick:()=>l(e),disabled:h,className:"text-xs text-green-600 hover:underline disabled:opacity-50",children:"수정"}),a.jsx("button",{onClick:b,disabled:h,className:"text-xs text-blue-600 hover:underline disabled:opacity-50",children:j?"비활성화":"활성화"}),!j&&!e._count?.measurements&&a.jsx("button",{onClick:y,disabled:h,className:"text-xs text-red-600 hover:underline disabled:opacity-50",children:"삭제"}),"internal"===n&&i&&a.jsx("button",{onClick:()=>i(e),disabled:h,className:"text-xs text-purple-600 hover:underline disabled:opacity-50",children:"초대 링크"}),"connected"===n&&e.organizations?.[0]&&a.jsx("button",{onClick:async()=>{if(confirm("연결을 해제하시겠습니까?"))try{let s=await fetch(`/api/customer-organizations/${e.organizations[0].id}`,{method:"DELETE"});if(s.ok)alert("연결이 해제되었습니다."),t();else{let e=await s.json();alert(e.error||"연결 해제 실패")}}catch(e){alert("연결 해제 중 오류가 발생했습니다.")}},disabled:h,className:"text-xs text-orange-600 hover:underline disabled:opacity-50",children:"연결 해제"})]})})]})}function j(){let{user:e}=(0,l.a)(),s=e?.role,t="OPERATOR"===s,{selectedOrg:p,loading:j}=(0,n.o)(),{hasPermission:f,loading:N}=i(),[v,k]=(0,r.useState)("all"),[w,C]=(0,r.useState)([]),[D,T]=(0,r.useState)(!0),[S,$]=(0,r.useState)(""),[z,E]=(0,r.useState)(!1),[O,A]=(0,r.useState)(!1),[P,_]=(0,r.useState)(null),[L,Z]=(0,r.useState)(!1),[U,R]=(0,r.useState)(null),[I,M]=(0,r.useState)(!1),[F,q]=(0,r.useState)(!1),[B,G]=(0,r.useState)(!1),[J,H]=(0,r.useState)(!1),V=async()=>{if(p)try{T(!0);let e=await fetch(`/api/customers?tab=${v}&organizationId=${p.id}`),s=await e.json();e.ok&&C(s.customers||[])}catch(e){}finally{T(!1)}},W=e=>{_(e),E(!0)},K=()=>{E(!1),_(null)},X=e=>{R(e),Z(!0)},Q=async e=>{if(confirm(`"${e.name}" 고객사에 연결 요청을 보내시겠습니까?`))try{let s=await fetch("/api/customer-organizations",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({customerId:e.id})}),t=await s.json();s.ok?(alert(t.message||"연결 요청을 보냈습니다."),V()):alert(t.error||"연결 요청 실패")}catch(e){alert("연결 요청 중 오류가 발생했습니다.")}},Y=(0,r.useMemo)(()=>{let e=w;return("connected"===v||"all"===v)&&(e=w.flatMap(e=>e.organizations&&e.organizations.length>1?e.organizations.map(s=>({...e,organizations:[s],_connectionId:s.id,_siteType:s.proposedData?.siteType})):[e])),e.filter(e=>{if(!S)return!!O||!1!==e.isActive;let s=S.toLowerCase(),t=e.code&&e.code.toLowerCase().includes(s)||e.name&&e.name.toLowerCase().includes(s)||e.businessNumber&&e.businessNumber.toLowerCase().includes(s)||e.fullName&&e.fullName.toLowerCase().includes(s)||e.representative&&e.representative.toLowerCase().includes(s)||e.siteType&&e.siteType.toLowerCase().includes(s)||e.address&&e.address.toLowerCase().includes(s)||e.businessType&&e.businessType.toLowerCase().includes(s)||e.industry&&e.industry.toLowerCase().includes(s)||e.siteCategory&&e.siteCategory.toLowerCase().includes(s)||e.corporateNumber&&e.corporateNumber.toLowerCase().includes(s),a=!!O||!1!==e.isActive;return t&&a}).sort((e,s)=>"CUST999"===e.code?1:"CUST999"===s.code?-1:(e.code||e.name).localeCompare(s.code||s.name))},[w,S,O,v]),ee=(0,r.useMemo)(()=>{let e={};return Y.forEach(s=>{let t=s.code||s.name;e[t]||(e[t]=[]),e[t].push(s)}),e},[Y]),es=async e=>{try{let s=await e.text(),t=await fetch("/api/customers/bulk",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({csvText:s})}),a=await t.json();if(t.ok)return await V(),{success:!0,message:a.message||"업로드 성공",count:a.count};return{success:!1,message:a.error||"업로드 실패"}}catch(e){return{success:!1,message:e.message||"오류 발생"}}};return j?a.jsx("div",{className:"flex items-center justify-center h-screen",children:a.jsx("div",{className:"text-lg",children:"로딩 중..."})}):p?(0,a.jsxs)("section",{className:"space-y-3",children:[a.jsx("div",{className:"rounded-lg border bg-white/50 dark:bg-white/5 p-2.5",children:(0,a.jsxs)("div",{className:"flex flex-wrap items-end gap-2",children:[a.jsx("h1",{className:"text-lg font-semibold whitespace-nowrap mb-1.5",children:"고객사 관리"}),a.jsx("span",{className:"text-gray-300 dark:text-gray-600 mb-1.5",children:"|"}),(0,a.jsxs)("div",{className:"flex gap-2 mb-1.5",children:[f("customer.tab.all")&&a.jsx("button",{onClick:()=>k("all"),className:`px-3 py-1 rounded text-sm font-medium transition-colors ${"all"===v?"bg-blue-600 text-white":"bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600"}`,children:"\uD83D\uDCCA 전체"}),f("customer.tab.internal")&&a.jsx("button",{onClick:()=>k("internal"),className:`px-3 py-1 rounded text-sm font-medium transition-colors ${"internal"===v?"bg-blue-600 text-white":"bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600"}`,children:"\uD83D\uDCCB 내부"}),f("customer.tab.connected")&&a.jsx("button",{onClick:()=>k("connected"),className:`px-3 py-1 rounded text-sm font-medium transition-colors ${"connected"===v?"bg-blue-600 text-white":"bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600"}`,children:"\uD83E\uDD1D 연결"})]}),f("customer.search")&&(0,a.jsxs)("div",{className:"flex flex-col",style:{minWidth:"280px"},children:[a.jsx("label",{className:"text-xs text-gray-600 dark:text-gray-400 mb-0.5",children:"검색"}),a.jsx(d.Z,{className:"text-sm h-8",value:S,onChange:e=>$(e.target.value),placeholder:"코드, 고객사명, 대표자, 주소, 업태, 업종 등"})]}),f("customer.filter")&&(0,a.jsxs)("label",{className:"flex items-center gap-1.5 text-xs cursor-pointer mb-1.5 whitespace-nowrap",children:[a.jsx("input",{type:"checkbox",checked:O,onChange:e=>A(e.target.checked),className:"rounded"}),"비활성 표시"]}),(0,a.jsxs)("div",{className:"flex gap-1.5 ml-auto mb-1.5",children:[a.jsx(c.Z,{size:"sm",variant:"secondary",onClick:()=>H(!0),children:"❓ 도움말"}),!t&&(0,a.jsxs)(a.Fragment,{children:[f("customer.export")&&a.jsx(c.Z,{size:"sm",variant:"secondary",onClick:()=>{let e=new Blob(["\uFEFF"+[["고객사코드","고객사명(약칭)","사업자번호","고객사명(정식)","대표자","사업장구분","주소","업태","업종","사업장종별","법인등록번호","굴뚝수"],...Y.map(e=>[e.code||"",e.name,e.businessNumber||"-",e.fullName||e.name,e.representative||"-",e.siteType||"-",e.address||"-",e.businessType||"-",e.industry||"-",e.siteCategory||"-",e.corporateNumber||"-",e._count?.stacks??0])].map(e=>e.map(e=>`"${String(e??"").replace(/"/g,'""')}"`).join(",")).join("\n")],{type:"text/csv;charset=utf-8;"}),s=URL.createObjectURL(e),t=document.createElement("a");t.href=s,t.download=`customers_${new Date().toISOString().slice(0,10)}.csv`,document.body.appendChild(t),t.click(),document.body.removeChild(t),URL.revokeObjectURL(s)},children:"Excel"}),f("customer.bulk_upload")&&a.jsx(c.Z,{size:"sm",variant:"secondary",onClick:()=>M(!0),children:"일괄업로드"}),p?.hasContractManagement&&f("contract.view")&&a.jsx(c.Z,{size:"sm",variant:"secondary",onClick:()=>q(!0),children:"계약관리"}),"connected"===v&&f("customer.create")&&a.jsx(c.Z,{size:"sm",onClick:()=>G(!0),children:"\uD83D\uDD0D 신규검색연결"}),"connected"!==v&&f("customer.create")&&a.jsx(c.Z,{size:"sm",onClick:()=>E(!0),children:"+ 신규 추가"})]})]})]})}),a.jsx("div",{className:"hidden md:block rounded-lg border overflow-x-auto max-h-[calc(100vh-180px)] overflow-y-auto",children:(0,a.jsxs)(o.iA,{className:"w-full table-fixed",children:[a.jsx(o.hr,{className:"bg-gray-50 dark:bg-white/10 sticky top-0 z-10",children:(0,a.jsxs)(o.Tr,{children:[a.jsx(o.Th,{className:"bg-gray-50 dark:bg-gray-800 w-[3%]",children:"상태"}),a.jsx(o.Th,{className:"bg-gray-50 dark:bg-gray-800 w-[6%]",children:"고객사코드"}),a.jsx(o.Th,{className:"bg-gray-50 dark:bg-gray-800 w-[7%]",children:"고객사명(약칭)"}),a.jsx(o.Th,{className:"bg-gray-50 dark:bg-gray-800 w-[5%]",children:"사업자번호"}),a.jsx(o.Th,{className:"bg-gray-50 dark:bg-gray-800 w-[8%]",children:"고객사명(정식)"}),a.jsx(o.Th,{className:"bg-gray-50 dark:bg-gray-800 w-[4%]",children:"대표자"}),a.jsx(o.Th,{className:"bg-gray-50 dark:bg-gray-800 w-[5%]",children:"사업장구분"}),a.jsx(o.Th,{className:"bg-gray-50 dark:bg-gray-800 w-[9%]",children:"주소"}),a.jsx(o.Th,{className:"bg-gray-50 dark:bg-gray-800 w-[4%]",children:"업태"}),a.jsx(o.Th,{className:"bg-gray-50 dark:bg-gray-800 w-[7%]",children:"업종"}),a.jsx(o.Th,{className:"bg-gray-50 dark:bg-gray-800 w-[4%]",children:"사업장종별"}),a.jsx(o.Th,{className:"bg-gray-50 dark:bg-gray-800 w-[6%]",children:"법인등록번호"}),a.jsx(o.Th,{className:"bg-gray-50 dark:bg-gray-800 w-[3%]",children:"굴뚝수"}),!t&&a.jsx(o.Th,{className:"bg-gray-50 dark:bg-gray-800 w-[10%]",children:"액션"})]})}),a.jsx(o.p3,{children:D?a.jsx(o.Tr,{children:a.jsx(o.Td,{colSpan:14,className:"text-center text-gray-500 py-8",children:"로딩 중..."})}):0===Y.length?a.jsx(o.Tr,{children:(0,a.jsxs)(o.Td,{colSpan:14,className:"text-center text-gray-500 py-8",children:["all"===v&&"등록된 고객사가 없습니다","internal"===v&&"내부 관리 고객사가 없습니다","connected"===v&&"연결된 고객사가 없습니다","search"===v&&"검색 가능한 고객사가 없습니다"]})}):Object.entries(ee).map(([e,r])=>a.jsx(a.Fragment,{children:r.map((e,l)=>a.jsx(y,{customer:e,role:s,onRefetch:V,onEdit:W,activeTab:v,onCreateInvitation:X,onRequestConnection:Q,isGrouped:r.length>1,isFirstInGroup:0===l,isLastInGroup:l===r.length-1,groupSize:r.length,isReadOnly:t},e.id))}))})]})}),a.jsx("div",{className:"md:hidden space-y-3",children:D?a.jsx("div",{className:"rounded-lg border bg-white/50 dark:bg-white/5 p-6 text-center text-gray-500",children:"로딩 중..."}):0===Y.length?(0,a.jsxs)("div",{className:"rounded-lg border bg-white/50 dark:bg-white/5 p-6 text-center text-gray-500",children:["all"===v&&"등록된 고객사가 없습니다","internal"===v&&"내부 관리 고객사가 없습니다","connected"===v&&"연결된 고객사가 없습니다","search"===v&&"검색 가능한 고객사가 없습니다"]}):Object.entries(ee).map(([e,s])=>a.jsx("div",{children:s.map((e,r)=>{let l=!1!==e.isActive,n=s.length>1;return(0,a.jsxs)("div",{className:`rounded-lg border bg-white/50 dark:bg-white/5 p-4 space-y-2 ${l?"":"opacity-50"} ${n?"border-l-4 border-l-blue-400":""}`,children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[a.jsx("span",{className:`inline-block px-2 py-0.5 rounded text-xs ${l?"bg-green-100 text-green-700 dark:bg-green-900/30 dark:text-green-300":"bg-gray-100 text-gray-600 dark:bg-gray-700 dark:text-gray-400"}`,children:l?"활성":"비활성"}),!t&&(0,a.jsxs)("div",{className:"flex gap-2",children:[a.jsx("button",{onClick:()=>W(e),className:"text-xs text-green-600 hover:underline",children:"수정"}),a.jsx("button",{onClick:async()=>{try{(await fetch(`/api/customers/${e.id}`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({isActive:!e.isActive})})).ok?V():alert("상태 변경 실패")}catch(e){alert("오류 발생")}},className:"text-xs text-blue-600 hover:underline",children:l?"비활성화":"활성화"}),!l&&!e._count?.measurements&&a.jsx("button",{onClick:async()=>{if(e._count?.measurements>0){alert("측정 기록이 있는 고객사는 삭제할 수 없습니다.");return}if(confirm(`"${e.name}" 고객사를 삭제하시겠습니까?`))try{(await fetch(`/api/customers/${e.id}`,{method:"DELETE"})).ok?V():alert("삭제 실패")}catch(e){alert("오류 발생")}},className:"text-xs text-red-600 hover:underline",children:"삭제"})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-2 text-sm",children:[(0,a.jsxs)("div",{children:[a.jsx("span",{className:"text-gray-500",children:"\uD83D\uDCCB 코드:"})," ",e.code||"-"]}),n&&0===r&&(0,a.jsxs)("div",{className:"text-blue-600",children:[a.jsx("span",{className:"text-gray-500",children:"\uD83C\uDFE2 사업장:"})," ",s.length,"개"]}),(0,a.jsxs)("div",{className:"col-span-2",children:[a.jsx("span",{className:"text-gray-500",children:"\uD83D\uDCCD 약칭:"})," ",e.name]}),(0,a.jsxs)("div",{className:"col-span-2",children:[a.jsx("span",{className:"text-gray-500",children:"\uD83D\uDD22 사업자번호:"})," ",e.businessNumber||"-"]}),(0,a.jsxs)("div",{className:"col-span-2",children:[a.jsx("span",{className:"text-gray-500",children:"\uD83C\uDFED 정식명:"})," ",e.fullName||e.name]}),(0,a.jsxs)("div",{children:[a.jsx("span",{className:"text-gray-500",children:"\uD83D\uDC64 대표자:"})," ",e.representative||"-"]}),(0,a.jsxs)("div",{children:[a.jsx("span",{className:"text-gray-500",children:"\uD83C\uDFD7️ 구분:"})," ",e.siteType||"-"]}),(0,a.jsxs)("div",{className:"col-span-2",children:[a.jsx("span",{className:"text-gray-500",children:"\uD83D\uDCCD 주소:"})," ",e.address||"-"]}),(0,a.jsxs)("div",{children:[a.jsx("span",{className:"text-gray-500",children:"\uD83D\uDCBC 업태:"})," ",e.businessType||"-"]}),(0,a.jsxs)("div",{children:[a.jsx("span",{className:"text-gray-500",children:"\uD83C\uDFE2 업종:"})," ",e.industry||"-"]}),(0,a.jsxs)("div",{children:[a.jsx("span",{className:"text-gray-500",children:"⚙️ 종별:"})," ",e.siteCategory||"-"]}),(0,a.jsxs)("div",{className:"col-span-2",children:[a.jsx("span",{className:"text-gray-500",children:"\uD83C\uDFDB️ 법인등록번호:"})," ",e.corporateNumber||"-"]}),(0,a.jsxs)("div",{children:[a.jsx("span",{className:"text-gray-500",children:"\uD83C\uDFED 굴뚝:"})," ",e._count?.stacks??0,"개"]})]})]},e.id)})},e))}),a.jsx(x,{isOpen:z,onClose:K,onSuccess:()=>{V(),K()},customer:P}),a.jsx(m,{isOpen:L,onClose:()=>Z(!1),customer:U,onSuccess:V}),a.jsx(g.Z,{isOpen:I,onClose:()=>M(!1),title:"고객사 일괄업로드",templateHeaders:["고객사코드","고객사명(약칭)","사업자번호","고객사명(정식)","대표자","사업장구분","주소","업태","업종","사업장종별","법인등록번호"],exampleRow:["CUST001","AA제조","123-45-67890","주식회사 AA제조","홍길동","본사","서울시 강남구","제조","제조업","1종","123456-1234567"],templateFileName:"고객사_일괄업로드_양식.csv",onUpload:es,parseInstructions:"고객사명(약칭)은 필수 항목입니다. 나머지 항목은 선택사항입니다."}),a.jsx(u,{isOpen:F,onClose:()=>q(!1)}),a.jsx(h,{isOpen:B,onClose:()=>G(!1),organizationId:p?.id||"",onSuccess:V}),a.jsx(b,{isOpen:J,onClose:()=>H(!1)})]}):a.jsx("div",{className:"flex items-center justify-center h-screen",children:a.jsx("div",{className:"text-lg text-red-600",children:"조직 정보를 불러올 수 없습니다."})})}},32743:(e,s,t)=>{"use strict";t.d(s,{Z:()=>n});var a=t(10326),r=t(17577),l=t(99837);function n({isOpen:e,onClose:s,title:t,templateHeaders:n,exampleRow:i,templateFileName:d,onUpload:c,parseInstructions:o="양식에 맞게 작성한 CSV 파일을 업로드하세요."}){let[x,m]=(0,r.useState)(null),[g,u]=(0,r.useState)(!1),[h,p]=(0,r.useState)(""),b=async()=>{if(!x){p("파일을 선택해주세요.");return}u(!0),p("");try{let e=await c(x);if(e.success){let s=e.message||"업로드 완료";p(`✅ ${s}`),m(null)}else p(`❌ ${e.message||"업로드 실패"}`)}catch(e){p(`❌ 오류: ${e.message||"업로드 중 문제가 발생했습니다."}`)}finally{u(!1)}},y=()=>{g||(m(null),p(""),s())};return e?a.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",onClick:y,children:(0,a.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-6 max-w-2xl w-full mx-4",onClick:e=>e.stopPropagation(),children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[a.jsx("h2",{className:"text-xl font-bold",children:t}),a.jsx("button",{onClick:y,disabled:g,className:"text-gray-500 hover:text-gray-700 disabled:opacity-50",children:"✕"})]}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"text-sm text-gray-600 dark:text-gray-400 bg-blue-50 dark:bg-blue-900/20 p-3 rounded",children:[a.jsx("p",{className:"font-medium mb-1",children:"\uD83D\uDCCB 업로드 절차"}),(0,a.jsxs)("ol",{className:"list-decimal list-inside space-y-1 text-xs",children:[a.jsx("li",{children:'아래 "업로드 양식 다운로드" 버튼을 클릭하여 CSV 양식을 다운로드합니다.'}),a.jsx("li",{children:"다운로드한 양식에 데이터를 입력합니다. (예시 행 참고)"}),a.jsx("li",{children:'"파일 선택" 버튼을 클릭하여 작성한 CSV 파일을 선택합니다.'}),a.jsx("li",{children:'"업로드" 버튼을 클릭하여 데이터를 등록합니다.'})]})]}),a.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:o}),(0,a.jsxs)("div",{className:"flex flex-col gap-3",children:[a.jsx("div",{className:"flex gap-2",children:a.jsx(l.Z,{variant:"secondary",onClick:()=>{let e=new Blob(["\uFEFF"+n.map(e=>`"${e}"`).join(",")+"\n"+i.map(e=>`"${e}"`).join(",")+"\n"],{type:"text/csv;charset=utf-8;"}),s=URL.createObjectURL(e),t=document.createElement("a");t.href=s,t.download=d,t.click(),URL.revokeObjectURL(s)},disabled:g,className:"flex-1",children:"\uD83D\uDCE5 업로드 양식 다운로드"})}),a.jsx("div",{className:"flex gap-2",children:(0,a.jsxs)("label",{className:"flex-1",children:[a.jsx("div",{className:`px-4 py-2 border-2 border-dashed rounded cursor-pointer text-center transition-colors ${x?"border-blue-500 bg-blue-50 dark:bg-blue-900/20":"border-gray-300 dark:border-gray-600 hover:border-blue-400"} ${g?"opacity-50 cursor-not-allowed":""}`,children:x?(0,a.jsxs)("span",{className:"text-sm",children:["\uD83D\uDCC4 ",x.name]}):a.jsx("span",{className:"text-sm text-gray-500",children:"\uD83D\uDCC1 파일 선택 (CSV)"})}),a.jsx("input",{type:"file",accept:".csv",className:"hidden",onChange:e=>{let s=e.target.files?.[0];s&&(m(s),p(""))},disabled:g})]})}),a.jsx(l.Z,{onClick:b,disabled:!x||g,className:"w-full",children:g?"업로드 중...":"업로드"})]}),h&&a.jsx("div",{className:`text-sm p-4 rounded border-2 ${h.startsWith("✅")?"bg-green-50 dark:bg-green-900/20 text-green-700 dark:text-green-300 border-green-500":"bg-red-50 dark:bg-red-900/20 text-red-700 dark:text-red-300 border-red-500"}`,children:(0,a.jsxs)("div",{className:"flex flex-col gap-3",children:[a.jsx("pre",{className:"whitespace-pre-wrap font-sans",children:h}),a.jsx(l.Z,{size:"sm",onClick:()=>{p(""),y()},className:"self-end",children:"확인"})]})})]}),!h&&a.jsx("div",{className:"mt-6 flex justify-end gap-2",children:a.jsx(l.Z,{variant:"secondary",onClick:y,disabled:g,children:"닫기"})})]})}):null}},43150:(e,s,t)=>{"use strict";t.d(s,{Z:()=>l});var a=t(10326),r=t(17577);function l({isOpen:e,onClose:s,title:t,sections:l}){let[n,i]=(0,r.useState)(0);return e?a.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:(0,a.jsxs)("div",{className:"flex items-center justify-center min-h-screen px-4 pt-4 pb-20 text-center sm:block sm:p-0",children:[a.jsx("div",{className:"fixed inset-0 transition-opacity bg-gray-500 bg-opacity-75",onClick:s}),(0,a.jsxs)("div",{className:"inline-block align-bottom bg-white dark:bg-gray-800 rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-4xl sm:w-full",children:[a.jsx("div",{className:"bg-gradient-to-r from-blue-600 to-blue-700 px-6 py-4",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"w-10 h-10 bg-white/20 rounded-lg flex items-center justify-center text-2xl",children:"\uD83D\uDCDA"}),a.jsx("h3",{className:"text-xl font-bold text-white",children:t})]}),a.jsx("button",{onClick:s,className:"text-white hover:text-gray-200 transition-colors",children:a.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})}),l.length>1&&a.jsx("div",{className:"border-b border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-900",children:a.jsx("nav",{className:"flex -mb-px overflow-x-auto",children:l.map((e,s)=>a.jsx("button",{onClick:()=>i(s),className:`px-6 py-3 text-sm font-medium whitespace-nowrap border-b-2 transition-colors ${n===s?"border-blue-600 text-blue-600 dark:text-blue-400":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300 dark:text-gray-400 dark:hover:text-gray-300"}`,children:e.title},s))})}),a.jsx("div",{className:"px-6 py-6 max-h-[70vh] overflow-y-auto",children:a.jsx("div",{className:"prose dark:prose-invert max-w-none",children:"string"==typeof l[n].content?a.jsx("div",{dangerouslySetInnerHTML:{__html:l[n].content}}):l[n].content})}),(0,a.jsxs)("div",{className:"bg-gray-50 dark:bg-gray-900 px-6 py-4 flex justify-between items-center",children:[a.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:"\uD83D\uDCA1 추가 도움이 필요하시면 시스템 관리자에게 문의하세요."}),a.jsx("button",{onClick:s,className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors",children:"닫기"})]})]})]})}):null}},99837:(e,s,t)=>{"use strict";t.d(s,{Z:()=>n});var a=t(10326);t(17577);let r={primary:"bg-black text-white hover:bg-black/90 dark:bg-white dark:text-black dark:hover:bg-white/90",secondary:"border border-gray-300 text-gray-900 hover:bg-gray-50 dark:border-white/20 dark:text-white dark:hover:bg-white/10",ghost:"text-gray-700 hover:bg-gray-100 dark:text-gray-200 dark:hover:bg-white/10"},l={sm:"h-8 px-3 text-sm",md:"h-10 px-4 text-sm",lg:"h-11 px-5 text-base"};function n({variant:e="primary",size:s="md",className:t="",...n}){return a.jsx("button",{className:`inline-flex items-center justify-center rounded-md font-medium transition-colors focus:outline-none focus:ring-2 focus:ring-offset-2 disabled:opacity-50 disabled:pointer-events-none ${r[e]} ${l[s]} ${t}`,...n})}},89175:(e,s,t)=>{"use strict";t.d(s,{Z:()=>r});var a=t(10326);function r({className:e="",...s}){return a.jsx("input",{className:`rounded-md border bg-transparent px-3 py-2 text-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:border-white/20 ${e}`,...s})}t(17577)},94585:(e,s,t)=>{"use strict";t.d(s,{Td:()=>c,Th:()=>d,Tr:()=>i,hr:()=>l,iA:()=>r,p3:()=>n});var a=t(10326);function r({className:e="",...s}){return a.jsx("table",{className:`w-full text-sm border-collapse ${e}`,...s})}function l(e){return a.jsx("thead",{...e})}function n(e){return a.jsx("tbody",{...e})}function i(e){return a.jsx("tr",{className:"border-b last:border-0 border-gray-200 dark:border-white/10",...e})}function d({className:e="",...s}){return a.jsx("th",{className:`text-left py-2 px-3 font-medium text-gray-600 dark:text-gray-300 ${e}`,...s})}function c({className:e="",...s}){return a.jsx("td",{className:`py-2 px-3 ${e}`,...s})}t(17577)},23541:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>a});let a=(0,t(68570).createProxy)(String.raw`C:\Users\User\boaz\frontend\src\app\masters\customers\page.tsx#default`)},73881:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>r});var a=t(66621);let r=e=>[{type:"image/x-icon",sizes:"16x16",url:(0,a.fillMetadataSegment)(".",e.params,"favicon.ico")+""}]}};var s=require("../../../webpack-runtime.js");s.C(e);var t=e=>s(s.s=e),a=s.X(0,[8948,9975,6621,5736],()=>t(7002));module.exports=a})();