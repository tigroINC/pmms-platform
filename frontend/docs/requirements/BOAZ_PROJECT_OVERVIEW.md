# PMMS 환경측정 데이터 관리 시스템
## 프로젝트 개요

### 회사 정보
- **회사명**: PMMS 환경측정기업 (PMMS Environment Technology)
- **직원 수**: 18명
- **사업 내용**: 대기오염 측정 서비스 제공
- **주요 고객**: 약 30개 제조 시설

### 시스템 목적
고객사에게 **대기오염 측정 데이터의 통계 시각화 및 AI 예측 분석**을 제공하는 환경 데이터 관리 플랫폼

---

## 핵심 수치

- **측정 대상 시설**: 약 30개 제조 시설
- **측정 지점**: 약 400개 굴뚝/배출구
- **측정 파라미터**: 약 60개 (실제 입력 항목 39개)
- **월 처리 데이터**: 약 20,000건 이상
- **ES 표준 방법**: 13개 (ES 01301.1e ~ ES 01521.a)

---

## 사용자 구조

### 1. 관리자 (PMMS 내부)
**권한:**
- 전체 시스템 관리
- 고객사/굴뚝/측정항목 마스터 데이터 관리
- 배출허용기준 설정
- 사용자 및 권한 관리
- 측정업체 관리

**주요 업무:**
- 시스템 초기 설정
- 기준 데이터 유지보수
- 전체 데이터 모니터링

### 2. 측정담당자 (PMMS 내부)
**권한:**
- 측정 계획 수립
- 측정 데이터 입력/업로드
- 측정 실행 관리
- 데이터 검증

**주요 업무:**
- 현장 측정 계획 수립
- 측정 데이터 입력 (수동/엑셀)
- 측정값 검증 및 품질 관리
- 기준 초과 확인 및 대응

### 3. 고객사 사용자
**권한:**
- 자사 데이터 조회
- 통계 시각화 대시보드 확인
- 리포트 다운로드

**주요 업무:**
- 자사 측정 현황 모니터링
- 트렌드 분석
- 보고서 확인

---

## 핵심 기능

### Phase 1: 기본 데이터 관리
- 고객사/굴뚝/측정항목/측정업체 마스터 관리
- 사용자 및 권한 관리
- 배출허용기준 설정 관리

### Phase 2: 측정 업무 프로세스
- 측정 계획(스케줄) 관리
- 측정 데이터 입력 (수동/엑셀 업로드)
- 배출허용기준 자동 검증 및 알림
- 측정 검증 및 승인 워크플로우

### Phase 3: 리포팅 시스템
- 측정기록부 (굴뚝별/측정일별)
- 월간/연간 보고서
- 기간별 보고서 (커스텀 기간)
- 관공서 제출용 양식
- PDF/Excel 다운로드

### Phase 4: 통계 시각화 및 예측 (MVP에서 예측 제외)
**고객사 대시보드:**
- 실시간 측정 현황
- 월별/분기별 트렌드 그래프
- 허용기준 대비 현황
- 오염물질별 통계

**AI 예측 분석 (Phase 4 - 나중에):**
- 농도 예측 (LSTM, Prophet)
- 초과 위험 예보
- 신뢰도 표시

### Phase 5: 부가 기능
- 파일 Import/Export (엑셀 템플릿)
- 엑셀 자동 업로드 (특정 폴더 감시)
- 알림 시스템 (이메일/SMS) - MVP에서 제외

---

## 측정 워크플로우

```
[1단계: 측정 계획]
└─ 측정 일정 수립
└─ 측정 대상 선정 (고객사, 굴뚝)
└─ 측정업체 배정

[2단계: 측정 실행]
└─ 현장 방문
└─ 시료 채취
└─ 기상 데이터 측정
└─ 배출가스 특성 측정

[3단계: 데이터 입력]
└─ 39개 측정항목 입력
└─ 기상 데이터 입력
└─ 배출가스 특성 입력
└─ 자동 검증 (허용기준 초과 체크)

[4단계: 검증]
└─ 데이터 품질 확인
└─ 이상치 검토
└─ 보정 계산 (표준산소농도)

[5단계: 보고]
└─ 측정기록부 생성
└─ 고객사 전달
└─ 관공서 제출
└─ 데이터베이스 저장
```

---

## 데이터 구조

### 핵심 테이블
1. **고객사 (customers)**
   - 회사명, 사업장 정보, 연락처

2. **굴뚝/배출구 (stacks)**
   - 고객사별 굴뚝 정보
   - 규격, 높이, 배출시설 종류

3. **측정항목 (measurement_items)**
   - 39개 측정항목
   - 항목명, 단위, ES코드, 분류

4. **배출허용기준 (emission_limits)**
   - 굴뚝별/항목별 허용기준
   - 일반기준 vs 특별대책지역

5. **측정 데이터 (measurements)**
   - 측정 기본 정보 (일시, 굴뚝, 측정업체)
   - 39개 항목별 측정값
   - 기상 데이터
   - 배출가스 특성

6. **측정업체 (measurement_companies)**
   - 업체 정보, 담당자

---

## 기술 스택

### 프론트엔드 (현재 개발 중)
- **Framework**: Next.js 14
- **Language**: TypeScript
- **Styling**: Tailwind CSS
- **Charts**: Chart.js
- **State**: React Hooks

### 백엔드 (나중에)
- **Framework**: Python FastAPI (추천)
- **Database**: PostgreSQL
- **AI/ML**: LSTM, Prophet (Python)

---

## 개발 우선순위 (MVP)

### ✅ 포함 (UI 프로토타입 단계)
1. 기본 레이아웃 (네비게이션, 사이드바)
2. 측정 데이터 입력 화면 (39개 항목)
3. 측정 이력 조회
4. 트렌드 차트 시각화
5. 고객사/굴뚝 관리 화면
6. 기본 통계 대시보드

### ❌ 제외 (나중에)
1. AI 예측 분석
2. 이메일/SMS 알림
3. 자동 파일 업로드
4. 복잡한 승인 워크플로우
5. 관공서 제출 양식

---

## 특수 요구사항

### "불검출" 처리
- 측정값이 검출되지 않는 경우
- 입력: "불검출" 또는 "ND"
- 저장: 0 또는 NULL
- 표시: "불검출" 또는 검출한계값

### 표준산소농도 보정
- 측정된 농도를 표준산소농도로 보정
- 보정 공식 자동 적용
- 보정 전/후 값 모두 저장

### 배출허용기준 검증
- 입력 시 실시간 자동 체크
- 초과 시 화면 알림 (붉은색 표시)
- 초과 이력 별도 관리

### 단위 처리
- ppm, mg/S㎥, ppb 등 다양한 단위
- 항목별 단위 자동 표시
- 단위 변환 기능 (선택사항)

---

## 성공 기준

1. **속도**: 측정 데이터 입력 시간 50% 단축
2. **정확도**: 입력 오류 80% 감소
3. **가시성**: 고객사 실시간 데이터 접근
4. **자동화**: 보고서 생성 시간 80% 단축
5. **확장성**: 월 20,000건 이상 처리 가능

---

## 참고 사항

- **환경부 표준 양식**: 대기측정기록부 기준
- **ES 표준 방법**: 환경오염공정시험기준
- **법규 준수**: 대기환경보전법
- **벤치마킹**: Montrose Environmental Group

---

## 연락처
- 전화: 052-707-2255
- 이메일: info@pmms.co.kr

---

**문서 버전**: 1.0
**최종 수정일**: 2025-10-26
**작성자**: 티그로 (프로젝트 기획)