<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Î≥¥ÏïÑÏä§ - Îç∞Ïù¥ÌÑ∞ ÌÜµÍ≥Ñ</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: #f5f7fa;
        }

        .header {
            background: white;
            padding: 20px 40px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .logo {
            font-size: 24px;
            font-weight: bold;
            color: #0066cc;
        }

        .nav {
            display: flex;
            gap: 30px;
        }

        .nav-item {
            color: #666;
            text-decoration: none;
            font-weight: 500;
            transition: color 0.3s;
        }

        .nav-item.active {
            color: #0066cc;
        }

        .container {
            max-width: 1400px;
            margin: 40px auto;
            padding: 0 20px;
        }

        .content-wrapper {
            display: flex;
            gap: 30px;
        }

        .filter-panel {
            width: 280px;
            background: white;
            padding: 30px;
            border-radius: 12px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
            height: fit-content;
        }

        .filter-section {
            margin-bottom: 30px;
        }

        .filter-section h3 {
            font-size: 16px;
            color: #333;
            margin-bottom: 15px;
            font-weight: 600;
        }

        .filter-option {
            display: flex;
            align-items: center;
            padding: 10px;
            cursor: pointer;
            border-radius: 6px;
            transition: background 0.2s;
        }

        .filter-option:hover {
            background: #f0f4f8;
        }

        .filter-option input[type="radio"],
        .filter-option input[type="checkbox"] {
            margin-right: 10px;
            cursor: pointer;
        }

        .filter-option label {
            cursor: pointer;
            color: #555;
            font-size: 14px;
        }

        .chart-area {
            flex: 1;
            background: white;
            padding: 40px;
            border-radius: 12px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }

        .chart-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 30px;
        }

        .chart-title {
            font-size: 20px;
            font-weight: 600;
            color: #333;
        }

        .chart-actions {
            display: flex;
            gap: 10px;
        }

        .btn {
            padding: 10px 20px;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            font-size: 14px;
            font-weight: 500;
            transition: all 0.3s;
        }

        .btn-primary {
            background: #0066cc;
            color: white;
        }

        .btn-primary:hover {
            background: #0052a3;
        }

        .btn-secondary {
            background: #f0f4f8;
            color: #555;
        }

        .btn-secondary:hover {
            background: #e1e8ed;
        }

        .chart-container {
            position: relative;
            height: 500px;
            margin-top: 20px;
        }

        .facility-info {
            background: #f8fafb;
            padding: 20px;
            border-radius: 8px;
            margin-top: 30px;
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 15px;
        }

        .info-item {
            font-size: 13px;
        }

        .info-label {
            color: #666;
            margin-bottom: 4px;
        }

        .info-value {
            color: #333;
            font-weight: 600;
        }

        .tooltip-custom {
            position: absolute;
            background: white;
            padding: 15px;
            border-radius: 8px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.15);
            pointer-events: none;
            opacity: 0;
            transition: opacity 0.2s;
            z-index: 1000;
            font-size: 12px;
            min-width: 200px;
        }

        .tooltip-custom.show {
            opacity: 1;
        }

        .tooltip-header {
            font-weight: 600;
            color: #0066cc;
            margin-bottom: 8px;
            padding-bottom: 8px;
            border-bottom: 1px solid #e0e0e0;
        }

        .tooltip-row {
            display: flex;
            justify-content: space-between;
            padding: 4px 0;
            color: #555;
        }

        .tooltip-label {
            color: #888;
        }

        .tooltip-value {
            font-weight: 600;
            color: #333;
        }

        .prediction-badge {
            display: inline-block;
            background: #fff3e0;
            color: #f57c00;
            padding: 2px 8px;
            border-radius: 4px;
            font-size: 11px;
            font-weight: 600;
            margin-left: 5px;
        }

        .legend-custom {
            display: flex;
            gap: 20px;
            margin-top: 20px;
            justify-content: center;
        }

        .legend-item {
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: 13px;
        }

        .legend-color {
            width: 20px;
            height: 3px;
            border-radius: 2px;
        }
    </style>
</head>
<body>
    <div class="header">
        <div class="logo">BOAZ Environment Technology</div>
        <nav class="nav">
            <a href="#" class="nav-item">ÌöåÏÇ¨Ï†ïÎ≥¥</a>
            <a href="#" class="nav-item">Îç∞Ïù¥ÌÑ∞ Îì±Î°ù</a>
            <a href="#" class="nav-item active">Îç∞Ïù¥ÌÑ∞ ÌÜµÍ≥Ñ</a>
            <a href="#" class="nav-item">Îâ¥Ïä§</a>
            <a href="#" class="nav-item">Í≥ÑÏïΩ</a>
        </nav>
        <div style="color: #666; font-size: 14px;">Î°úÍ∑∏ÏïÑÏõÉ | ÌöåÏõêÏ†ïÎ≥¥</div>
    </div>

    <div class="container">
        <div class="content-wrapper">
            <!-- Ï¢åÏ∏° ÌïÑÌÑ∞ Ìå®ÎÑê -->
            <div class="filter-panel">
                <div class="filter-section">
                    <h3>Ìï≠Î™©</h3>
                    <div class="filter-option">
                        <input type="radio" id="item-all" name="item" checked>
                        <label for="item-all">Ï†ÑÏ≤¥ Ìï≠Î™©</label>
                    </div>
                    <div class="filter-option">
                        <input type="radio" id="item-dust" name="item">
                        <label for="item-dust">Î®ºÏßÄ</label>
                    </div>
                    <div class="filter-option">
                        <input type="radio" id="item-sox" name="item">
                        <label for="item-sox">Ìô©ÏÇ∞ÌôîÎ¨º</label>
                    </div>
                    <div class="filter-option">
                        <input type="radio" id="item-nox" name="item">
                        <label for="item-nox">ÏßàÏÜåÏÇ∞ÌôîÎ¨º</label>
                    </div>
                    <div class="filter-option">
                        <input type="radio" id="item-moisture" name="item">
                        <label for="item-moisture">ÏàòÎ∂Ñ</label>
                    </div>
                    <div class="filter-option">
                        <input type="radio" id="item-flow" name="item">
                        <label for="item-flow">Ïú†Îüâ</label>
                    </div>
                </div>

                <div class="filter-section">
                    <h3>Í∏∞Ï§Ä</h3>
                    <div class="filter-option">
                        <input type="checkbox" id="limit-100" checked>
                        <label for="limit-100">Î∞∞Ï∂ú ÌóàÏö©Í∏∞Ï§Ä</label>
                    </div>
                    <div class="filter-option">
                        <input type="checkbox" id="limit-50">
                        <label for="limit-50">50% ÌóàÏö©Í∏∞Ï§Ä</label>
                    </div>
                    <div class="filter-option">
                        <input type="checkbox" id="limit-30" checked>
                        <label for="limit-30">30% ÌóàÏö©Í∏∞Ï§Ä</label>
                    </div>
                </div>

                <div class="filter-section">
                    <h3>ÏòàÏ∏° ÌëúÏãú</h3>
                    <div class="filter-option">
                        <input type="checkbox" id="show-prediction" checked>
                        <label for="show-prediction">AI ÏòàÏ∏° Îç∞Ïù¥ÌÑ∞</label>
                    </div>
                </div>

                <div class="filter-section">
                    <h3>Ï∞®Ìä∏</h3>
                    <div class="filter-option">
                        <input type="radio" id="chart-scatter" name="chart" checked>
                        <label for="chart-scatter">Scatter Plot</label>
                    </div>
                    <div class="filter-option">
                        <input type="radio" id="chart-line" name="chart">
                        <label for="chart-line">Line Chart</label>
                    </div>
                    <div class="filter-option">
                        <input type="radio" id="chart-bar" name="chart">
                        <label for="chart-bar">Bar Chart</label>
                    </div>
                </div>
            </div>

            <!-- Ïö∞Ï∏° Ï∞®Ìä∏ ÏòÅÏó≠ -->
            <div class="chart-area">
                <div class="chart-header">
                    <div class="chart-title">ÏãúÏÑ§Î≤àÌò∏: #A01 - ÌÉàÌô© 1Ìò∏Í∏∞ (Î®ºÏßÄ ÎÜçÎèÑ)</div>
                    <div class="chart-actions">
                        <button class="btn btn-secondary">üìä ÏóëÏÖÄ</button>
                        <button class="btn btn-secondary">üñ®Ô∏è Ï∂úÎ†•</button>
                        <button class="btn btn-primary">üìÑ PDF</button>
                    </div>
                </div>

                <div class="chart-container">
                    <canvas id="mainChart"></canvas>
                </div>

                <div class="legend-custom">
                    <div class="legend-item">
                        <div class="legend-color" style="background: #ff6633;"></div>
                        <span>Ïã§Ï∏°Í∞í</span>
                    </div>
                    <div class="legend-item">
                        <div class="legend-color" style="background: #ffa500; border: 2px dashed #ff8c00;"></div>
                        <span>AI ÏòàÏ∏°Í∞í</span>
                    </div>
                    <div class="legend-item">
                        <div class="legend-color" style="background: #ff4444;"></div>
                        <span>Î∞∞Ï∂ú ÌóàÏö©Í∏∞Ï§Ä</span>
                    </div>
                    <div class="legend-item">
                        <div class="legend-color" style="background: #4da6ff;"></div>
                        <span>30% ÌóàÏö©Í∏∞Ï§Ä</span>
                    </div>
                </div>

                <div class="facility-info">
                    <div class="info-item">
                        <div class="info-label">ÏãúÏÑ§Î≤àÌò∏</div>
                        <div class="info-value">#A01</div>
                    </div>
                    <div class="info-item">
                        <div class="info-label">Î∞∞Ï∂úÏãúÏÑ§Î™Ö</div>
                        <div class="info-value">ÌÉàÌô© 1Ìò∏Í∏∞</div>
                    </div>
                    <div class="info-item">
                        <div class="info-label">Íµ¥Îöù Ï¢ÖÎ≥Ñ</div>
                        <div class="info-value">1Ï¢Ö</div>
                    </div>
                    <div class="info-item">
                        <div class="info-label">Ïú†Îüâ</div>
                        <div class="info-value">431.1 Sm¬≥/m</div>
                    </div>
                    <div class="info-item">
                        <div class="info-label">Ïú†Îüâ(Î≥¥Ï†ï)</div>
                        <div class="info-value">431.1 Sm¬≥/m</div>
                    </div>
                    <div class="info-item">
                        <div class="info-label">ÌëúÏ§Ä ÏÇ∞ÏÜå</div>
                        <div class="info-value">21%</div>
                    </div>
                    <div class="info-item">
                        <div class="info-label">Ïã§Ï∏° ÏÇ∞ÏÜå</div>
                        <div class="info-value">21%</div>
                    </div>
                    <div class="info-item">
                        <div class="info-label">Ïò®ÎèÑ</div>
                        <div class="info-value">50 ¬∞C</div>
                    </div>
                    <div class="info-item">
                        <div class="info-label">Ïú†ÏÜç</div>
                        <div class="info-value">11.17 m/s</div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="tooltip-custom" id="customTooltip"></div>

    <script>
        // Ïã§Ï∏° Îç∞Ïù¥ÌÑ∞ (2024ÎÖÑ)
        const actualData = [
            { month: 1, day: 15, value: 13.8, temp: 50, flow: 431.1, time: '10:00-11:20' },
            { month: 1, day: 28, value: 7.5, temp: 48, flow: 428.5, time: '14:30-15:50' },
            { month: 2, day: 12, value: 10.8, temp: 52, flow: 435.2, time: '09:15-10:35' },
            { month: 2, day: 25, value: 3.2, temp: 49, flow: 430.8, time: '13:45-15:05' },
            { month: 3, day: 8, value: 12.1, temp: 53, flow: 438.1, time: '11:20-12:40' },
            { month: 3, day: 22, value: 9.5, temp: 51, flow: 433.5, time: '15:00-16:20' },
            { month: 3, day: 25, value: 33.2, temp: 50, flow: 431.1, time: '10:00-11:00' },
            { month: 4, day: 5, value: 11.5, temp: 54, flow: 440.2, time: '09:30-10:50' },
            { month: 4, day: 18, value: 32.8, temp: 52, flow: 436.8, time: '14:15-15:35' },
            { month: 4, day: 29, value: 5.8, temp: 50, flow: 432.4, time: '10:45-12:05' },
            { month: 5, day: 10, value: 13.0, temp: 55, flow: 442.5, time: '13:00-14:20' },
            { month: 5, day: 23, value: 7.2, temp: 53, flow: 438.9, time: '09:45-11:05' },
            { month: 6, day: 6, value: 3.5, temp: 56, flow: 445.1, time: '15:30-16:50' },
            { month: 6, day: 19, value: 11.8, temp: 54, flow: 441.3, time: '11:00-12:20' },
            { month: 6, day: 28, value: 36.5, temp: 57, flow: 447.8, time: '10:15-11:35' },
            { month: 7, day: 11, value: 12.2, temp: 58, flow: 450.2, time: '14:00-15:20' },
            { month: 7, day: 24, value: 5.0, temp: 56, flow: 445.6, time: '09:00-10:20' },
            { month: 8, day: 7, value: 20.3, temp: 59, flow: 453.4, time: '13:30-14:50' },
            { month: 8, day: 20, value: 7.5, temp: 57, flow: 448.9, time: '10:30-11:50' },
            { month: 9, day: 3, value: 17.2, temp: 55, flow: 442.8, time: '15:15-16:35' },
            { month: 9, day: 8, value: 33.8, temp: 186, flow: 1536.8, time: '13:20-14:50' },
            { month: 9, day: 16, value: 11.9, temp: 54, flow: 440.5, time: '09:20-10:40' },
            { month: 9, day: 29, value: 8.0, temp: 52, flow: 436.2, time: '14:45-16:05' },
            { month: 10, day: 12, value: 5.5, temp: 50, flow: 432.7, time: '11:30-12:50' },
            { month: 10, day: 25, value: 13.2, temp: 48, flow: 429.1, time: '10:00-11:20' },
            { month: 11, day: 8, value: 6.5, temp: 46, flow: 425.8, time: '13:15-14:35' },
            { month: 11, day: 21, value: 7.2, temp: 44, flow: 422.3, time: '09:30-10:50' },
            { month: 11, day: 28, value: 12.1, temp: 45, flow: 424.5, time: '15:00-16:20' },
            { month: 12, day: 5, value: 9.2, temp: 42, flow: 419.6, time: '10:45-12:05' },
            { month: 12, day: 18, value: 10.8, temp: 40, flow: 416.2, time: '14:30-15:50' },
            { month: 12, day: 28, value: 3.8, temp: 38, flow: 413.5, time: '11:15-12:35' }
        ];

        // AI ÏòàÏ∏° Îç∞Ïù¥ÌÑ∞ (2025ÎÖÑ 1-3Ïõî)
        const predictionData = [
            { month: 1, day: 15, value: 11.5, confidence: 0.85 },
            { month: 1, day: 28, value: 8.2, confidence: 0.82 },
            { month: 2, day: 12, value: 9.8, confidence: 0.78 },
            { month: 2, day: 25, value: 6.5, confidence: 0.75 },
            { month: 3, day: 8, value: 10.5, confidence: 0.72 },
            { month: 3, day: 22, value: 8.8, confidence: 0.70 }
        ];

        const ctx = document.getElementById('mainChart').getContext('2d');
        let chart;

        function createChart() {
            // Îç∞Ïù¥ÌÑ∞ Ìè¨Ïù∏Ìä∏ ÏÉùÏÑ±
            const actualPoints = actualData.map(d => ({
                x: d.month + (d.day / 31),
                y: d.value,
                month: d.month,
                day: d.day,
                temp: d.temp,
                flow: d.flow,
                time: d.time,
                isPrediction: false
            }));

            const predictionPoints = predictionData.map(d => ({
                x: 13 + (d.month - 1) + (d.day / 31), // 2025ÎÖÑÏù¥ÎØÄÎ°ú 12Í∞úÏõî Ïù¥ÌõÑ
                y: d.value,
                month: d.month,
                day: d.day,
                confidence: d.confidence,
                isPrediction: true
            }));

            chart = new Chart(ctx, {
                type: 'scatter',
                data: {
                    datasets: [
                        {
                            label: 'Ïã§Ï∏°Í∞í',
                            data: actualPoints,
                            backgroundColor: '#ff6633',
                            borderColor: '#ff6633',
                            pointRadius: 6,
                            pointHoverRadius: 8,
                            showLine: false
                        },
                        {
                            label: 'AI ÏòàÏ∏°Í∞í',
                            data: predictionPoints,
                            backgroundColor: 'rgba(255, 165, 0, 0.6)',
                            borderColor: '#ff8c00',
                            pointRadius: 6,
                            pointHoverRadius: 8,
                            pointStyle: 'triangle',
                            showLine: false,
                            borderDash: [5, 5]
                        },
                        {
                            label: 'Î∞∞Ï∂ú ÌóàÏö©Í∏∞Ï§Ä',
                            data: [{x: 1, y: 30}, {x: 15, y: 30}],
                            borderColor: '#ff4444',
                            borderWidth: 2,
                            pointRadius: 0,
                            fill: false,
                            showLine: true,
                            tension: 0
                        },
                        {
                            label: '30% ÌóàÏö©Í∏∞Ï§Ä',
                            data: [{x: 1, y: 9}, {x: 15, y: 9}],
                            borderColor: '#4da6ff',
                            borderWidth: 2,
                            pointRadius: 0,
                            fill: false,
                            showLine: true,
                            tension: 0
                        }
                    ]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            display: false
                        },
                        tooltip: {
                            enabled: false,
                            external: function(context) {
                                const tooltip = document.getElementById('customTooltip');
                                const tooltipModel = context.tooltip;

                                if (tooltipModel.opacity === 0) {
                                    tooltip.classList.remove('show');
                                    return;
                                }

                                if (tooltipModel.body) {
                                    const dataPoint = tooltipModel.dataPoints[0];
                                    const rawData = dataPoint.raw;

                                    let html = '';
                                    if (rawData.isPrediction) {
                                        html = `
                                            <div class="tooltip-header">
                                                AI ÏòàÏ∏° Îç∞Ïù¥ÌÑ∞
                                                <span class="prediction-badge">PREDICTION</span>
                                            </div>
                                            <div class="tooltip-row">
                                                <span class="tooltip-label">ÏòàÏ∏°Ïùº:</span>
                                                <span class="tooltip-value">2025ÎÖÑ ${rawData.month}Ïõî ${rawData.day}Ïùº</span>
                                            </div>
                                            <div class="tooltip-row">
                                                <span class="tooltip-label">ÏòàÏ∏° ÎÜçÎèÑ:</span>
                                                <span class="tooltip-value">${rawData.y.toFixed(1)} mg/m¬≥</span>
                                            </div>
                                            <div class="tooltip-row">
                                                <span class="tooltip-label">Ïã†Î¢∞ÎèÑ:</span>
                                                <span class="tooltip-value">${(rawData.confidence * 100).toFixed(0)}%</span>
                                            </div>
                                            <div class="tooltip-row">
                                                <span class="tooltip-label">ÏòàÏ∏° Î™®Îç∏:</span>
                                                <span class="tooltip-value">LSTM + Prophet</span>
                                            </div>
                                        `;
                                    } else {
                                        html = `
                                            <div class="tooltip-header">ÏãúÏÑ§Î≤àÌò∏: #A01</div>
                                            <div class="tooltip-row">
                                                <span class="tooltip-label">Î∞∞Ï∂úÏãúÏÑ§Î™Ö:</span>
                                                <span class="tooltip-value">ÌÉàÌô© 1Ìò∏Í∏∞</span>
                                            </div>
                                            <div class="tooltip-row">
                                                <span class="tooltip-label">Ï∏°Ï†ïÏùº:</span>
                                                <span class="tooltip-value">2024ÎÖÑ ${rawData.month}Ïõî ${rawData.day}Ïùº</span>
                                            </div>
                                            <div class="tooltip-row">
                                                <span class="tooltip-label">Ï∏°Ï†ïÏãúÍ∞Ñ:</span>
                                                <span class="tooltip-value">${rawData.time}</span>
                                            </div>
                                            <div class="tooltip-row">
                                                <span class="tooltip-label">Î®ºÏßÄ ÎÜçÎèÑ:</span>
                                                <span class="tooltip-value">${rawData.y.toFixed(1)} mg/m¬≥</span>
                                            </div>
                                            <div class="tooltip-row">
                                                <span class="tooltip-label">Ïò®ÎèÑ:</span>
                                                <span class="tooltip-value">${rawData.temp} ¬∞C</span>
                                            </div>
                                            <div class="tooltip-row">
                                                <span class="tooltip-label">Ïú†Îüâ:</span>
                                                <span class="tooltip-value">${rawData.flow} Sm¬≥/m</span>
                                            </div>
                                        `;
                                    }

                                    tooltip.innerHTML = html;

                                    const position = context.chart.canvas.getBoundingClientRect();
                                    tooltip.style.left = position.left + window.pageXOffset + tooltipModel.caretX + 'px';
                                    tooltip.style.top = position.top + window.pageYOffset + tooltipModel.caretY - 100 + 'px';
                                    tooltip.classList.add('show');
                                }
                            }
                        }
                    },
                    scales: {
                        x: {
                            type: 'linear',
                            min: 0,
                            max: 15,
                            ticks: {
                                callback: function(value) {
                                    if (value <= 12) {
                                        return value + 'Ïõî';
                                    } else {
                                        const month = Math.floor(value - 12);
                                        return `'25.${month}Ïõî`;
                                    }
                                },
                                stepSize: 1
                            },
                            grid: {
                                color: '#e0e0e0'
                            },
                            title: {
                                display: true,
                                text: 'ÏùºÏûê (2024ÎÖÑ ‚Üí 2025ÎÖÑ ÏòàÏ∏°)',
                                font: {
                                    size: 12,
                                    weight: 'bold'
                                }
                            }
                        },
                        y: {
                            min: 0,
                            max: 40,
                            ticks: {
                                callback: function(value) {
                                    return value;
                                }
                            },
                            grid: {
                                color: '#e0e0e0'
                            },
                            title: {
                                display: true,
                                text: 'Î∂ÑÏÑùÍ∞í (mg/m¬≥)',
                                font: {
                                    size: 12,
                                    weight: 'bold'
                                }
                            }
                        }
                    },
                    interaction: {
                        mode: 'point',
                        intersect: true
                    }
                }
            });
        }

        // Ï∞®Ìä∏ ÏÉùÏÑ±
        createChart();

        // Ï∞®Ìä∏ Ïô∏Î∂Ä ÌÅ¥Î¶≠ Ïãú Ìà¥ÌåÅ Ïà®Í∏∞Í∏∞
        document.addEventListener('click', function(e) {
            if (!e.target.closest('#mainChart')) {
                document.getElementById('customTooltip').classList.remove('show');
            }
        });
    </script>
</body>
</html>
