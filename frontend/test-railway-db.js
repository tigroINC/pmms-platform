// Railway ë°ì´í„°ë² ì´ìŠ¤ ì—°ê²° í…ŒìŠ¤íŠ¸
const { PrismaClient } = require('@prisma/client');

const prisma = new PrismaClient({
  log: ['query', 'info', 'warn', 'error'],
});

async function testConnection() {
  try {
    console.log('ğŸ”„ ë°ì´í„°ë² ì´ìŠ¤ ì—°ê²° ì‹œë„ ì¤‘...');
    
    // ê°„ë‹¨í•œ ì¿¼ë¦¬ë¡œ ì—°ê²° í…ŒìŠ¤íŠ¸
    await prisma.$connect();
    console.log('âœ… ë°ì´í„°ë² ì´ìŠ¤ ì—°ê²° ì„±ê³µ!');
    
    // í…Œì´ë¸” í™•ì¸
    const customers = await prisma.customer.count();
    console.log(`ğŸ“Š ê³ ê°ì‚¬ ìˆ˜: ${customers}`);
    
    const users = await prisma.user.count();
    console.log(`ğŸ‘¥ ì‚¬ìš©ì ìˆ˜: ${users}`);
    
  } catch (error) {
    console.error('âŒ ì—°ê²° ì‹¤íŒ¨:', error.message);
    console.error('ìƒì„¸ ì˜¤ë¥˜:', error);
  } finally {
    await prisma.$disconnect();
  }
}

testConnection();
